"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/datasets/[name]/pois/map/route";
exports.ids = ["app/api/datasets/[name]/pois/map/route"];
exports.modules = {

/***/ "@aws-sdk/client-s3":
/*!*************************************!*\
  !*** external "@aws-sdk/client-s3" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("@aws-sdk/client-s3");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdatasets%2F%5Bname%5D%2Fpois%2Fmap%2Froute&page=%2Fapi%2Fdatasets%2F%5Bname%5D%2Fpois%2Fmap%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdatasets%2F%5Bname%5D%2Fpois%2Fmap%2Froute.ts&appDir=%2FUsers%2Fjuliangarritz%2Fdev%2Fpy%2Fveraset%2Fveraset-api%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjuliangarritz%2Fdev%2Fpy%2Fveraset%2Fveraset-api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdatasets%2F%5Bname%5D%2Fpois%2Fmap%2Froute&page=%2Fapi%2Fdatasets%2F%5Bname%5D%2Fpois%2Fmap%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdatasets%2F%5Bname%5D%2Fpois%2Fmap%2Froute.ts&appDir=%2FUsers%2Fjuliangarritz%2Fdev%2Fpy%2Fveraset%2Fveraset-api%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjuliangarritz%2Fdev%2Fpy%2Fveraset%2Fveraset-api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_juliangarritz_dev_py_veraset_veraset_api_app_api_datasets_name_pois_map_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/datasets/[name]/pois/map/route.ts */ \"(rsc)/./app/api/datasets/[name]/pois/map/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/datasets/[name]/pois/map/route\",\n        pathname: \"/api/datasets/[name]/pois/map\",\n        filename: \"route\",\n        bundlePath: \"app/api/datasets/[name]/pois/map/route\"\n    },\n    resolvedPagePath: \"/Users/juliangarritz/dev/py/veraset/veraset-api/app/api/datasets/[name]/pois/map/route.ts\",\n    nextConfigOutput,\n    userland: _Users_juliangarritz_dev_py_veraset_veraset_api_app_api_datasets_name_pois_map_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/datasets/[name]/pois/map/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZkYXRhc2V0cyUyRiU1Qm5hbWUlNUQlMkZwb2lzJTJGbWFwJTJGcm91dGUmcGFnZT0lMkZhcGklMkZkYXRhc2V0cyUyRiU1Qm5hbWUlNUQlMkZwb2lzJTJGbWFwJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZGF0YXNldHMlMkYlNUJuYW1lJTVEJTJGcG9pcyUyRm1hcCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmp1bGlhbmdhcnJpdHolMkZkZXYlMkZweSUyRnZlcmFzZXQlMkZ2ZXJhc2V0LWFwaSUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZqdWxpYW5nYXJyaXR6JTJGZGV2JTJGcHklMkZ2ZXJhc2V0JTJGdmVyYXNldC1hcGkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3lDO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ21jLXZlcmFzZXQtYXBpLz80Mzc4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9qdWxpYW5nYXJyaXR6L2Rldi9weS92ZXJhc2V0L3ZlcmFzZXQtYXBpL2FwcC9hcGkvZGF0YXNldHMvW25hbWVdL3BvaXMvbWFwL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9kYXRhc2V0cy9bbmFtZV0vcG9pcy9tYXAvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9kYXRhc2V0cy9bbmFtZV0vcG9pcy9tYXBcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2RhdGFzZXRzL1tuYW1lXS9wb2lzL21hcC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9qdWxpYW5nYXJyaXR6L2Rldi9weS92ZXJhc2V0L3ZlcmFzZXQtYXBpL2FwcC9hcGkvZGF0YXNldHMvW25hbWVdL3BvaXMvbWFwL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9kYXRhc2V0cy9bbmFtZV0vcG9pcy9tYXAvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdatasets%2F%5Bname%5D%2Fpois%2Fmap%2Froute&page=%2Fapi%2Fdatasets%2F%5Bname%5D%2Fpois%2Fmap%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdatasets%2F%5Bname%5D%2Fpois%2Fmap%2Froute.ts&appDir=%2FUsers%2Fjuliangarritz%2Fdev%2Fpy%2Fveraset%2Fveraset-api%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjuliangarritz%2Fdev%2Fpy%2Fveraset%2Fveraset-api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/datasets/[name]/pois/map/route.ts":
/*!***************************************************!*\
  !*** ./app/api/datasets/[name]/pois/map/route.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   revalidate: () => (/* binding */ revalidate)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_poi_mapping__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/poi-mapping */ \"(rsc)/./lib/poi-mapping.ts\");\n\n\nconst dynamic = \"force-dynamic\";\nconst revalidate = 0;\n/**\n * GET /api/datasets/[name]/pois/map?jobId=[jobId]\n * Map Veraset POI IDs to original GeoJSON IDs for a dataset\n */ async function GET(req, { params }) {\n    try {\n        const { searchParams } = new URL(req.url);\n        const jobId = searchParams.get(\"jobId\");\n        if (!jobId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"jobId query parameter is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Get POIs from the dataset\n        const poisRes = await fetch(`${req.nextUrl.origin}/api/datasets/${params.name}/pois`);\n        if (!poisRes.ok) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to fetch POIs\"\n            }, {\n                status: poisRes.status\n            });\n        }\n        const poisData = await poisRes.json();\n        const verasetPoiIds = (poisData.pois || []).map((p)=>p.poiId);\n        // Map Veraset IDs to original GeoJSON IDs\n        const mapping = await (0,_lib_poi_mapping__WEBPACK_IMPORTED_MODULE_1__.mapPoiIds)(jobId, verasetPoiIds);\n        // Get POI names for display\n        const names = await (0,_lib_poi_mapping__WEBPACK_IMPORTED_MODULE_1__.getPoiNames)(jobId);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            mapping,\n            names: names || {},\n            total: Object.keys(mapping).length\n        });\n    } catch (error) {\n        console.error(`GET /api/datasets/${params.name}/pois/map error:`, error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to map POI IDs\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2RhdGFzZXRzL1tuYW1lXS9wb2lzL21hcC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF3RDtBQUNHO0FBRXBELE1BQU1HLFVBQVUsZ0JBQWdCO0FBQ2hDLE1BQU1DLGFBQWEsRUFBRTtBQUU1Qjs7O0NBR0MsR0FDTSxlQUFlQyxJQUNwQkMsR0FBZ0IsRUFDaEIsRUFBRUMsTUFBTSxFQUFnQztJQUV4QyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxZQUFZLEVBQUUsR0FBRyxJQUFJQyxJQUFJSCxJQUFJSSxHQUFHO1FBQ3hDLE1BQU1DLFFBQVFILGFBQWFJLEdBQUcsQ0FBQztRQUUvQixJQUFJLENBQUNELE9BQU87WUFDVixPQUFPWCxxREFBWUEsQ0FBQ2EsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUFvQyxHQUM3QztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsNEJBQTRCO1FBQzVCLE1BQU1DLFVBQVUsTUFBTUMsTUFBTSxDQUFDLEVBQUVYLElBQUlZLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDLGNBQWMsRUFBRVosT0FBT2EsSUFBSSxDQUFDLEtBQUssQ0FBQztRQUNwRixJQUFJLENBQUNKLFFBQVFLLEVBQUUsRUFBRTtZQUNmLE9BQU9yQixxREFBWUEsQ0FBQ2EsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUF1QixHQUNoQztnQkFBRUMsUUFBUUMsUUFBUUQsTUFBTTtZQUFDO1FBRTdCO1FBRUEsTUFBTU8sV0FBVyxNQUFNTixRQUFRSCxJQUFJO1FBQ25DLE1BQU1VLGdCQUFnQixDQUFDRCxTQUFTRSxJQUFJLElBQUksRUFBRSxFQUFFQyxHQUFHLENBQUMsQ0FBQ0MsSUFBV0EsRUFBRUMsS0FBSztRQUVuRSwwQ0FBMEM7UUFDMUMsTUFBTUMsVUFBVSxNQUFNM0IsMkRBQVNBLENBQUNVLE9BQU9ZO1FBRXZDLDRCQUE0QjtRQUM1QixNQUFNTSxRQUFRLE1BQU0zQiw2REFBV0EsQ0FBQ1M7UUFFaEMsT0FBT1gscURBQVlBLENBQUNhLElBQUksQ0FBQztZQUN2QmU7WUFDQUMsT0FBT0EsU0FBUyxDQUFDO1lBQ2pCQyxPQUFPQyxPQUFPQyxJQUFJLENBQUNKLFNBQVNLLE1BQU07UUFDcEM7SUFFRixFQUFFLE9BQU9uQixPQUFZO1FBQ25Cb0IsUUFBUXBCLEtBQUssQ0FBQyxDQUFDLGtCQUFrQixFQUFFUCxPQUFPYSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsRUFBRU47UUFDbEUsT0FBT2QscURBQVlBLENBQUNhLElBQUksQ0FDdEI7WUFBRUMsT0FBTztZQUF5QnFCLFNBQVNyQixNQUFNc0IsT0FBTztRQUFDLEdBQ3pEO1lBQUVyQixRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dtYy12ZXJhc2V0LWFwaS8uL2FwcC9hcGkvZGF0YXNldHMvW25hbWVdL3BvaXMvbWFwL3JvdXRlLnRzP2E4NWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IG1hcFBvaUlkcywgZ2V0UG9pTmFtZXMgfSBmcm9tICdAL2xpYi9wb2ktbWFwcGluZyc7XG5cbmV4cG9ydCBjb25zdCBkeW5hbWljID0gJ2ZvcmNlLWR5bmFtaWMnO1xuZXhwb3J0IGNvbnN0IHJldmFsaWRhdGUgPSAwO1xuXG4vKipcbiAqIEdFVCAvYXBpL2RhdGFzZXRzL1tuYW1lXS9wb2lzL21hcD9qb2JJZD1bam9iSWRdXG4gKiBNYXAgVmVyYXNldCBQT0kgSURzIHRvIG9yaWdpbmFsIEdlb0pTT04gSURzIGZvciBhIGRhdGFzZXRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChcbiAgcmVxOiBOZXh0UmVxdWVzdCxcbiAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgbmFtZTogc3RyaW5nIH0gfVxuKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxLnVybCk7XG4gICAgY29uc3Qgam9iSWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdqb2JJZCcpO1xuICAgIFxuICAgIGlmICgham9iSWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ2pvYklkIHF1ZXJ5IHBhcmFtZXRlciBpcyByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEdldCBQT0lzIGZyb20gdGhlIGRhdGFzZXRcbiAgICBjb25zdCBwb2lzUmVzID0gYXdhaXQgZmV0Y2goYCR7cmVxLm5leHRVcmwub3JpZ2lufS9hcGkvZGF0YXNldHMvJHtwYXJhbXMubmFtZX0vcG9pc2ApO1xuICAgIGlmICghcG9pc1Jlcy5vaykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIFBPSXMnIH0sXG4gICAgICAgIHsgc3RhdHVzOiBwb2lzUmVzLnN0YXR1cyB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHBvaXNEYXRhID0gYXdhaXQgcG9pc1Jlcy5qc29uKCk7XG4gICAgY29uc3QgdmVyYXNldFBvaUlkcyA9IChwb2lzRGF0YS5wb2lzIHx8IFtdKS5tYXAoKHA6IGFueSkgPT4gcC5wb2lJZCk7XG5cbiAgICAvLyBNYXAgVmVyYXNldCBJRHMgdG8gb3JpZ2luYWwgR2VvSlNPTiBJRHNcbiAgICBjb25zdCBtYXBwaW5nID0gYXdhaXQgbWFwUG9pSWRzKGpvYklkLCB2ZXJhc2V0UG9pSWRzKTtcbiAgICBcbiAgICAvLyBHZXQgUE9JIG5hbWVzIGZvciBkaXNwbGF5XG4gICAgY29uc3QgbmFtZXMgPSBhd2FpdCBnZXRQb2lOYW1lcyhqb2JJZCk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgbWFwcGluZyxcbiAgICAgIG5hbWVzOiBuYW1lcyB8fCB7fSxcbiAgICAgIHRvdGFsOiBPYmplY3Qua2V5cyhtYXBwaW5nKS5sZW5ndGgsXG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoYEdFVCAvYXBpL2RhdGFzZXRzLyR7cGFyYW1zLm5hbWV9L3BvaXMvbWFwIGVycm9yOmAsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIG1hcCBQT0kgSURzJywgZGV0YWlsczogZXJyb3IubWVzc2FnZSB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIm1hcFBvaUlkcyIsImdldFBvaU5hbWVzIiwiZHluYW1pYyIsInJldmFsaWRhdGUiLCJHRVQiLCJyZXEiLCJwYXJhbXMiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJqb2JJZCIsImdldCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsInBvaXNSZXMiLCJmZXRjaCIsIm5leHRVcmwiLCJvcmlnaW4iLCJuYW1lIiwib2siLCJwb2lzRGF0YSIsInZlcmFzZXRQb2lJZHMiLCJwb2lzIiwibWFwIiwicCIsInBvaUlkIiwibWFwcGluZyIsIm5hbWVzIiwidG90YWwiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwiY29uc29sZSIsImRldGFpbHMiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/datasets/[name]/pois/map/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/jobs.ts":
/*!*********************!*\
  !*** ./lib/jobs.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createJob: () => (/* binding */ createJob),\n/* harmony export */   getAllJobs: () => (/* binding */ getAllJobs),\n/* harmony export */   getJob: () => (/* binding */ getJob),\n/* harmony export */   markJobSynced: () => (/* binding */ markJobSynced),\n/* harmony export */   updateJob: () => (/* binding */ updateJob),\n/* harmony export */   updateJobStatus: () => (/* binding */ updateJobStatus)\n/* harmony export */ });\n/* harmony import */ var _s3_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./s3-config */ \"(rsc)/./lib/s3-config.ts\");\n\nconst DEFAULT_JOBS = {};\n/**\n * Get all jobs sorted by creation date (newest first)\n */ async function getAllJobs() {\n    const data = await (0,_s3_config__WEBPACK_IMPORTED_MODULE_0__.initConfigIfNeeded)(\"jobs\", DEFAULT_JOBS);\n    return Object.values(data).sort((a, b)=>new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n}\n/**\n * Get a specific job by ID\n */ async function getJob(jobId) {\n    const data = await (0,_s3_config__WEBPACK_IMPORTED_MODULE_0__.initConfigIfNeeded)(\"jobs\", DEFAULT_JOBS);\n    return data[jobId] || null;\n}\n/**\n * Create a new job\n */ async function createJob(job) {\n    const data = await (0,_s3_config__WEBPACK_IMPORTED_MODULE_0__.initConfigIfNeeded)(\"jobs\", DEFAULT_JOBS);\n    const newJob = {\n        ...job,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString()\n    };\n    data[job.jobId] = newJob;\n    try {\n        await (0,_s3_config__WEBPACK_IMPORTED_MODULE_0__.putConfig)(\"jobs\", data);\n        console.log(`‚úÖ Job created: ${job.jobId} - ${job.name}`);\n    } catch (error) {\n        console.error(`‚ùå Failed to save job ${job.jobId}:`, error);\n        throw error;\n    }\n    return newJob;\n}\n/**\n * Update an existing job\n */ async function updateJob(jobId, updates) {\n    const data = await (0,_s3_config__WEBPACK_IMPORTED_MODULE_0__.initConfigIfNeeded)(\"jobs\", DEFAULT_JOBS);\n    if (!data[jobId]) {\n        console.error(`‚ùå Job not found: ${jobId}`);\n        return null;\n    }\n    data[jobId] = {\n        ...data[jobId],\n        ...updates,\n        updatedAt: new Date().toISOString()\n    };\n    try {\n        await (0,_s3_config__WEBPACK_IMPORTED_MODULE_0__.putConfig)(\"jobs\", data);\n        console.log(`‚úÖ Job updated: ${jobId}`);\n    } catch (error) {\n        console.error(`‚ùå Failed to update job ${jobId}:`, error);\n        throw error;\n    }\n    return data[jobId];\n}\n/**\n * Update job status\n */ async function updateJobStatus(jobId, status, errorMessage) {\n    return updateJob(jobId, {\n        status,\n        errorMessage\n    });\n}\n/**\n * Mark job as synced with S3 details\n */ async function markJobSynced(jobId, s3DestPath, objectCount, totalBytes) {\n    return updateJob(jobId, {\n        s3DestPath,\n        objectCount,\n        totalBytes,\n        syncedAt: new Date().toISOString()\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvam9icy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXVFO0FBNEJ2RSxNQUFNRSxlQUF5QixDQUFDO0FBRWhDOztDQUVDLEdBQ00sZUFBZUM7SUFDcEIsTUFBTUMsT0FBTyxNQUFNSCw4REFBa0JBLENBQVcsUUFBUUM7SUFDeEQsT0FBT0csT0FBT0MsTUFBTSxDQUFDRixNQUFNRyxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFDbEMsSUFBSUMsS0FBS0QsRUFBRUUsU0FBUyxFQUFFQyxPQUFPLEtBQUssSUFBSUYsS0FBS0YsRUFBRUcsU0FBUyxFQUFFQyxPQUFPO0FBRW5FO0FBRUE7O0NBRUMsR0FDTSxlQUFlQyxPQUFPQyxLQUFhO0lBQ3hDLE1BQU1WLE9BQU8sTUFBTUgsOERBQWtCQSxDQUFXLFFBQVFDO0lBQ3hELE9BQU9FLElBQUksQ0FBQ1UsTUFBTSxJQUFJO0FBQ3hCO0FBRUE7O0NBRUMsR0FDTSxlQUFlQyxVQUFVQyxHQUF5QztJQUN2RSxNQUFNWixPQUFPLE1BQU1ILDhEQUFrQkEsQ0FBVyxRQUFRQztJQUV4RCxNQUFNZSxTQUFjO1FBQ2xCLEdBQUdELEdBQUc7UUFDTkwsV0FBVyxJQUFJRCxPQUFPUSxXQUFXO1FBQ2pDQyxXQUFXLElBQUlULE9BQU9RLFdBQVc7SUFDbkM7SUFFQWQsSUFBSSxDQUFDWSxJQUFJRixLQUFLLENBQUMsR0FBR0c7SUFFbEIsSUFBSTtRQUNGLE1BQU1qQixxREFBU0EsQ0FBQyxRQUFRSTtRQUN4QmdCLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGVBQWUsRUFBRUwsSUFBSUYsS0FBSyxDQUFDLEdBQUcsRUFBRUUsSUFBSU0sSUFBSSxDQUFDLENBQUM7SUFDekQsRUFBRSxPQUFPQyxPQUFPO1FBQ2RILFFBQVFHLEtBQUssQ0FBQyxDQUFDLHFCQUFxQixFQUFFUCxJQUFJRixLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUVTO1FBQ3BELE1BQU1BO0lBQ1I7SUFFQSxPQUFPTjtBQUNUO0FBRUE7O0NBRUMsR0FDTSxlQUFlTyxVQUFVVixLQUFhLEVBQUVXLE9BQXFCO0lBQ2xFLE1BQU1yQixPQUFPLE1BQU1ILDhEQUFrQkEsQ0FBVyxRQUFRQztJQUV4RCxJQUFJLENBQUNFLElBQUksQ0FBQ1UsTUFBTSxFQUFFO1FBQ2hCTSxRQUFRRyxLQUFLLENBQUMsQ0FBQyxpQkFBaUIsRUFBRVQsTUFBTSxDQUFDO1FBQ3pDLE9BQU87SUFDVDtJQUVBVixJQUFJLENBQUNVLE1BQU0sR0FBRztRQUNaLEdBQUdWLElBQUksQ0FBQ1UsTUFBTTtRQUNkLEdBQUdXLE9BQU87UUFDVk4sV0FBVyxJQUFJVCxPQUFPUSxXQUFXO0lBQ25DO0lBRUEsSUFBSTtRQUNGLE1BQU1sQixxREFBU0EsQ0FBQyxRQUFRSTtRQUN4QmdCLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGVBQWUsRUFBRVAsTUFBTSxDQUFDO0lBQ3ZDLEVBQUUsT0FBT1MsT0FBTztRQUNkSCxRQUFRRyxLQUFLLENBQUMsQ0FBQyx1QkFBdUIsRUFBRVQsTUFBTSxDQUFDLENBQUMsRUFBRVM7UUFDbEQsTUFBTUE7SUFDUjtJQUVBLE9BQU9uQixJQUFJLENBQUNVLE1BQU07QUFDcEI7QUFFQTs7Q0FFQyxHQUNNLGVBQWVZLGdCQUNwQlosS0FBYSxFQUNiYSxNQUFxQixFQUNyQkMsWUFBcUI7SUFFckIsT0FBT0osVUFBVVYsT0FBTztRQUFFYTtRQUFRQztJQUFhO0FBQ2pEO0FBRUE7O0NBRUMsR0FDTSxlQUFlQyxjQUNwQmYsS0FBYSxFQUNiZ0IsVUFBa0IsRUFDbEJDLFdBQW1CLEVBQ25CQyxVQUFrQjtJQUVsQixPQUFPUixVQUFVVixPQUFPO1FBQ3RCZ0I7UUFDQUM7UUFDQUM7UUFDQUMsVUFBVSxJQUFJdkIsT0FBT1EsV0FBVztJQUNsQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ21jLXZlcmFzZXQtYXBpLy4vbGliL2pvYnMudHM/NzhiYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRDb25maWcsIHB1dENvbmZpZywgaW5pdENvbmZpZ0lmTmVlZGVkIH0gZnJvbSAnLi9zMy1jb25maWcnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEpvYiB7XG4gIGpvYklkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdHlwZTogJ3BpbmdzJyB8ICdhZ2dyZWdhdGUnIHwgJ2RldmljZXMnIHwgJ2NvaG9ydCc7XG4gIHBvaUNvdW50OiBudW1iZXI7XG4gIHBvaUNvbGxlY3Rpb25JZD86IHN0cmluZztcbiAgZGF0ZVJhbmdlOiB7IGZyb206IHN0cmluZzsgdG86IHN0cmluZyB9O1xuICByYWRpdXM6IG51bWJlcjtcbiAgc2NoZW1hOiAnQkFTSUMnIHwgJ0ZVTEwnIHwgJ0VOSEFOQ0VEJyB8ICdOL0EnO1xuICBzdGF0dXM6ICdRVUVVRUQnIHwgJ1JVTk5JTkcnIHwgJ1NVQ0NFU1MnIHwgJ0ZBSUxFRCcgfCAnU0NIRURVTEVEJztcbiAgczNTb3VyY2VQYXRoPzogc3RyaW5nO1xuICBzM0Rlc3RQYXRoPzogc3RyaW5nIHwgbnVsbDtcbiAgb2JqZWN0Q291bnQ/OiBudW1iZXI7XG4gIHRvdGFsQnl0ZXM/OiBudW1iZXI7XG4gIHN5bmNlZEF0Pzogc3RyaW5nIHwgbnVsbDtcbiAgZXJyb3JNZXNzYWdlPzogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IHN0cmluZztcbiAgdXBkYXRlZEF0Pzogc3RyaW5nO1xuICBzdW1tYXJ5TWV0cmljcz86IHN0cmluZztcbiAgZXh0ZXJuYWw/OiBib29sZWFuOyAvLyB0cnVlID0gY3JlYXRlZCBvdXRzaWRlIGFwcCwgZG9lc24ndCBjb3VudCB0b3dhcmQgcXVvdGFcbiAgcG9pTWFwcGluZz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47IC8vIE1hcHMgVmVyYXNldCBQT0kgSURzIChnZW9fcmFkaXVzX1gpIHRvIG9yaWdpbmFsIEdlb0pTT04gSURzXG4gIHBvaU5hbWVzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjsgLy8gTWFwcyBWZXJhc2V0IFBPSSBJRHMgKGdlb19yYWRpdXNfWCkgdG8gaHVtYW4tcmVhZGFibGUgbmFtZXMgZnJvbSBHZW9KU09OIHByb3BlcnRpZXMubmFtZVxufVxuXG50eXBlIEpvYnNEYXRhID0gUmVjb3JkPHN0cmluZywgSm9iPjtcblxuY29uc3QgREVGQVVMVF9KT0JTOiBKb2JzRGF0YSA9IHt9O1xuXG4vKipcbiAqIEdldCBhbGwgam9icyBzb3J0ZWQgYnkgY3JlYXRpb24gZGF0ZSAobmV3ZXN0IGZpcnN0KVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsSm9icygpOiBQcm9taXNlPEpvYltdPiB7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBpbml0Q29uZmlnSWZOZWVkZWQ8Sm9ic0RhdGE+KCdqb2JzJywgREVGQVVMVF9KT0JTKTtcbiAgcmV0dXJuIE9iamVjdC52YWx1ZXMoZGF0YSkuc29ydCgoYSwgYikgPT4gXG4gICAgbmV3IERhdGUoYi5jcmVhdGVkQXQpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEuY3JlYXRlZEF0KS5nZXRUaW1lKClcbiAgKTtcbn1cblxuLyoqXG4gKiBHZXQgYSBzcGVjaWZpYyBqb2IgYnkgSURcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEpvYihqb2JJZDogc3RyaW5nKTogUHJvbWlzZTxKb2IgfCBudWxsPiB7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBpbml0Q29uZmlnSWZOZWVkZWQ8Sm9ic0RhdGE+KCdqb2JzJywgREVGQVVMVF9KT0JTKTtcbiAgcmV0dXJuIGRhdGFbam9iSWRdIHx8IG51bGw7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGpvYlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlSm9iKGpvYjogT21pdDxKb2IsICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+KTogUHJvbWlzZTxKb2I+IHtcbiAgY29uc3QgZGF0YSA9IGF3YWl0IGluaXRDb25maWdJZk5lZWRlZDxKb2JzRGF0YT4oJ2pvYnMnLCBERUZBVUxUX0pPQlMpO1xuICBcbiAgY29uc3QgbmV3Sm9iOiBKb2IgPSB7XG4gICAgLi4uam9iLFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICB9O1xuICBcbiAgZGF0YVtqb2Iuam9iSWRdID0gbmV3Sm9iO1xuICBcbiAgdHJ5IHtcbiAgICBhd2FpdCBwdXRDb25maWcoJ2pvYnMnLCBkYXRhKTtcbiAgICBjb25zb2xlLmxvZyhg4pyFIEpvYiBjcmVhdGVkOiAke2pvYi5qb2JJZH0gLSAke2pvYi5uYW1lfWApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBGYWlsZWQgdG8gc2F2ZSBqb2IgJHtqb2Iuam9iSWR9OmAsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICBcbiAgcmV0dXJuIG5ld0pvYjtcbn1cblxuLyoqXG4gKiBVcGRhdGUgYW4gZXhpc3Rpbmcgam9iXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVKb2Ioam9iSWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxKb2I+KTogUHJvbWlzZTxKb2IgfCBudWxsPiB7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBpbml0Q29uZmlnSWZOZWVkZWQ8Sm9ic0RhdGE+KCdqb2JzJywgREVGQVVMVF9KT0JTKTtcbiAgXG4gIGlmICghZGF0YVtqb2JJZF0pIHtcbiAgICBjb25zb2xlLmVycm9yKGDinYwgSm9iIG5vdCBmb3VuZDogJHtqb2JJZH1gKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBcbiAgZGF0YVtqb2JJZF0gPSB7XG4gICAgLi4uZGF0YVtqb2JJZF0sXG4gICAgLi4udXBkYXRlcyxcbiAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgfTtcbiAgXG4gIHRyeSB7XG4gICAgYXdhaXQgcHV0Q29uZmlnKCdqb2JzJywgZGF0YSk7XG4gICAgY29uc29sZS5sb2coYOKchSBKb2IgdXBkYXRlZDogJHtqb2JJZH1gKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIHVwZGF0ZSBqb2IgJHtqb2JJZH06YCwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIFxuICByZXR1cm4gZGF0YVtqb2JJZF07XG59XG5cbi8qKlxuICogVXBkYXRlIGpvYiBzdGF0dXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUpvYlN0YXR1cyhcbiAgam9iSWQ6IHN0cmluZyxcbiAgc3RhdHVzOiBKb2JbJ3N0YXR1cyddLFxuICBlcnJvck1lc3NhZ2U/OiBzdHJpbmdcbik6IFByb21pc2U8Sm9iIHwgbnVsbD4ge1xuICByZXR1cm4gdXBkYXRlSm9iKGpvYklkLCB7IHN0YXR1cywgZXJyb3JNZXNzYWdlIH0pO1xufVxuXG4vKipcbiAqIE1hcmsgam9iIGFzIHN5bmNlZCB3aXRoIFMzIGRldGFpbHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1hcmtKb2JTeW5jZWQoXG4gIGpvYklkOiBzdHJpbmcsXG4gIHMzRGVzdFBhdGg6IHN0cmluZyxcbiAgb2JqZWN0Q291bnQ6IG51bWJlcixcbiAgdG90YWxCeXRlczogbnVtYmVyXG4pOiBQcm9taXNlPEpvYiB8IG51bGw+IHtcbiAgcmV0dXJuIHVwZGF0ZUpvYihqb2JJZCwge1xuICAgIHMzRGVzdFBhdGgsXG4gICAgb2JqZWN0Q291bnQsXG4gICAgdG90YWxCeXRlcyxcbiAgICBzeW5jZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJwdXRDb25maWciLCJpbml0Q29uZmlnSWZOZWVkZWQiLCJERUZBVUxUX0pPQlMiLCJnZXRBbGxKb2JzIiwiZGF0YSIsIk9iamVjdCIsInZhbHVlcyIsInNvcnQiLCJhIiwiYiIsIkRhdGUiLCJjcmVhdGVkQXQiLCJnZXRUaW1lIiwiZ2V0Sm9iIiwiam9iSWQiLCJjcmVhdGVKb2IiLCJqb2IiLCJuZXdKb2IiLCJ0b0lTT1N0cmluZyIsInVwZGF0ZWRBdCIsImNvbnNvbGUiLCJsb2ciLCJuYW1lIiwiZXJyb3IiLCJ1cGRhdGVKb2IiLCJ1cGRhdGVzIiwidXBkYXRlSm9iU3RhdHVzIiwic3RhdHVzIiwiZXJyb3JNZXNzYWdlIiwibWFya0pvYlN5bmNlZCIsInMzRGVzdFBhdGgiLCJvYmplY3RDb3VudCIsInRvdGFsQnl0ZXMiLCJzeW5jZWRBdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/jobs.ts\n");

/***/ }),

/***/ "(rsc)/./lib/poi-mapping.ts":
/*!****************************!*\
  !*** ./lib/poi-mapping.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getOriginalPoiId: () => (/* binding */ getOriginalPoiId),\n/* harmony export */   getPoiDisplayName: () => (/* binding */ getPoiDisplayName),\n/* harmony export */   getPoiNames: () => (/* binding */ getPoiNames),\n/* harmony export */   mapPoiIds: () => (/* binding */ mapPoiIds)\n/* harmony export */ });\n/* harmony import */ var _jobs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./jobs */ \"(rsc)/./lib/jobs.ts\");\n/**\n * Utilities for mapping Veraset POI IDs to original GeoJSON IDs\n */ \n/**\n * Get the original POI ID from GeoJSON for a Veraset-generated POI ID\n * Veraset generates IDs as geo_radius_0, geo_radius_1, etc. based on array index\n */ async function getOriginalPoiId(jobId, verasetPoiId) {\n    try {\n        const job = await (0,_jobs__WEBPACK_IMPORTED_MODULE_0__.getJob)(jobId);\n        if (!job || !job.poiMapping) {\n            return null;\n        }\n        return job.poiMapping[verasetPoiId] || null;\n    } catch (error) {\n        console.error(`Error getting original POI ID for ${verasetPoiId}:`, error);\n        return null;\n    }\n}\n/**\n * Map an array of Veraset POI IDs to their original GeoJSON IDs\n */ async function mapPoiIds(jobId, verasetPoiIds) {\n    try {\n        const job = await (0,_jobs__WEBPACK_IMPORTED_MODULE_0__.getJob)(jobId);\n        if (!job || !job.poiMapping) {\n            // Return identity mapping if no mapping available\n            return Object.fromEntries(verasetPoiIds.map((id)=>[\n                    id,\n                    id\n                ]));\n        }\n        const mapping = {};\n        for (const verasetId of verasetPoiIds){\n            mapping[verasetId] = job.poiMapping[verasetId] || verasetId;\n        }\n        return mapping;\n    } catch (error) {\n        console.error(`Error mapping POI IDs for job ${jobId}:`, error);\n        // Return identity mapping on error\n        return Object.fromEntries(verasetPoiIds.map((id)=>[\n                id,\n                id\n            ]));\n    }\n}\n/**\n * Get display name for a POI ID\n * Returns human-readable name if available, otherwise original ID, otherwise Veraset ID\n */ function getPoiDisplayName(verasetPoiId, originalPoiId, poiName = null) {\n    if (poiName) {\n        return poiName;\n    }\n    if (originalPoiId && originalPoiId !== verasetPoiId) {\n        return originalPoiId;\n    }\n    return verasetPoiId;\n}\n/**\n * Get POI names mapping for a job\n */ async function getPoiNames(jobId) {\n    try {\n        const job = await (0,_jobs__WEBPACK_IMPORTED_MODULE_0__.getJob)(jobId);\n        if (!job || !job.poiNames) {\n            return null;\n        }\n        return job.poiNames;\n    } catch (error) {\n        console.error(`Error getting POI names for job ${jobId}:`, error);\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcG9pLW1hcHBpbmcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7Q0FFQyxHQUUrQjtBQUVoQzs7O0NBR0MsR0FDTSxlQUFlQyxpQkFDcEJDLEtBQWEsRUFDYkMsWUFBb0I7SUFFcEIsSUFBSTtRQUNGLE1BQU1DLE1BQU0sTUFBTUosNkNBQU1BLENBQUNFO1FBQ3pCLElBQUksQ0FBQ0UsT0FBTyxDQUFDQSxJQUFJQyxVQUFVLEVBQUU7WUFDM0IsT0FBTztRQUNUO1FBRUEsT0FBT0QsSUFBSUMsVUFBVSxDQUFDRixhQUFhLElBQUk7SUFDekMsRUFBRSxPQUFPRyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxDQUFDLGtDQUFrQyxFQUFFSCxhQUFhLENBQUMsQ0FBQyxFQUFFRztRQUNwRSxPQUFPO0lBQ1Q7QUFDRjtBQUVBOztDQUVDLEdBQ00sZUFBZUUsVUFDcEJOLEtBQWEsRUFDYk8sYUFBdUI7SUFFdkIsSUFBSTtRQUNGLE1BQU1MLE1BQU0sTUFBTUosNkNBQU1BLENBQUNFO1FBQ3pCLElBQUksQ0FBQ0UsT0FBTyxDQUFDQSxJQUFJQyxVQUFVLEVBQUU7WUFDM0Isa0RBQWtEO1lBQ2xELE9BQU9LLE9BQU9DLFdBQVcsQ0FBQ0YsY0FBY0csR0FBRyxDQUFDQyxDQUFBQSxLQUFNO29CQUFDQTtvQkFBSUE7aUJBQUc7UUFDNUQ7UUFFQSxNQUFNQyxVQUFrQyxDQUFDO1FBQ3pDLEtBQUssTUFBTUMsYUFBYU4sY0FBZTtZQUNyQ0ssT0FBTyxDQUFDQyxVQUFVLEdBQUdYLElBQUlDLFVBQVUsQ0FBQ1UsVUFBVSxJQUFJQTtRQUNwRDtRQUVBLE9BQU9EO0lBQ1QsRUFBRSxPQUFPUixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxDQUFDLDhCQUE4QixFQUFFSixNQUFNLENBQUMsQ0FBQyxFQUFFSTtRQUN6RCxtQ0FBbUM7UUFDbkMsT0FBT0ksT0FBT0MsV0FBVyxDQUFDRixjQUFjRyxHQUFHLENBQUNDLENBQUFBLEtBQU07Z0JBQUNBO2dCQUFJQTthQUFHO0lBQzVEO0FBQ0Y7QUFFQTs7O0NBR0MsR0FDTSxTQUFTRyxrQkFDZGIsWUFBb0IsRUFDcEJjLGFBQTRCLEVBQzVCQyxVQUF5QixJQUFJO0lBRTdCLElBQUlBLFNBQVM7UUFDWCxPQUFPQTtJQUNUO0lBQ0EsSUFBSUQsaUJBQWlCQSxrQkFBa0JkLGNBQWM7UUFDbkQsT0FBT2M7SUFDVDtJQUNBLE9BQU9kO0FBQ1Q7QUFFQTs7Q0FFQyxHQUNNLGVBQWVnQixZQUNwQmpCLEtBQWE7SUFFYixJQUFJO1FBQ0YsTUFBTUUsTUFBTSxNQUFNSiw2Q0FBTUEsQ0FBQ0U7UUFDekIsSUFBSSxDQUFDRSxPQUFPLENBQUNBLElBQUlnQixRQUFRLEVBQUU7WUFDekIsT0FBTztRQUNUO1FBRUEsT0FBT2hCLElBQUlnQixRQUFRO0lBQ3JCLEVBQUUsT0FBT2QsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsQ0FBQyxnQ0FBZ0MsRUFBRUosTUFBTSxDQUFDLENBQUMsRUFBRUk7UUFDM0QsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nbWMtdmVyYXNldC1hcGkvLi9saWIvcG9pLW1hcHBpbmcudHM/M2E0NiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFV0aWxpdGllcyBmb3IgbWFwcGluZyBWZXJhc2V0IFBPSSBJRHMgdG8gb3JpZ2luYWwgR2VvSlNPTiBJRHNcbiAqL1xuXG5pbXBvcnQgeyBnZXRKb2IgfSBmcm9tICcuL2pvYnMnO1xuXG4vKipcbiAqIEdldCB0aGUgb3JpZ2luYWwgUE9JIElEIGZyb20gR2VvSlNPTiBmb3IgYSBWZXJhc2V0LWdlbmVyYXRlZCBQT0kgSURcbiAqIFZlcmFzZXQgZ2VuZXJhdGVzIElEcyBhcyBnZW9fcmFkaXVzXzAsIGdlb19yYWRpdXNfMSwgZXRjLiBiYXNlZCBvbiBhcnJheSBpbmRleFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3JpZ2luYWxQb2lJZChcbiAgam9iSWQ6IHN0cmluZyxcbiAgdmVyYXNldFBvaUlkOiBzdHJpbmdcbik6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IGpvYiA9IGF3YWl0IGdldEpvYihqb2JJZCk7XG4gICAgaWYgKCFqb2IgfHwgIWpvYi5wb2lNYXBwaW5nKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGpvYi5wb2lNYXBwaW5nW3ZlcmFzZXRQb2lJZF0gfHwgbnVsbDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBnZXR0aW5nIG9yaWdpbmFsIFBPSSBJRCBmb3IgJHt2ZXJhc2V0UG9pSWR9OmAsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIE1hcCBhbiBhcnJheSBvZiBWZXJhc2V0IFBPSSBJRHMgdG8gdGhlaXIgb3JpZ2luYWwgR2VvSlNPTiBJRHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1hcFBvaUlkcyhcbiAgam9iSWQ6IHN0cmluZyxcbiAgdmVyYXNldFBvaUlkczogc3RyaW5nW11cbik6IFByb21pc2U8UmVjb3JkPHN0cmluZywgc3RyaW5nPj4ge1xuICB0cnkge1xuICAgIGNvbnN0IGpvYiA9IGF3YWl0IGdldEpvYihqb2JJZCk7XG4gICAgaWYgKCFqb2IgfHwgIWpvYi5wb2lNYXBwaW5nKSB7XG4gICAgICAvLyBSZXR1cm4gaWRlbnRpdHkgbWFwcGluZyBpZiBubyBtYXBwaW5nIGF2YWlsYWJsZVxuICAgICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyh2ZXJhc2V0UG9pSWRzLm1hcChpZCA9PiBbaWQsIGlkXSkpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBtYXBwaW5nOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gICAgZm9yIChjb25zdCB2ZXJhc2V0SWQgb2YgdmVyYXNldFBvaUlkcykge1xuICAgICAgbWFwcGluZ1t2ZXJhc2V0SWRdID0gam9iLnBvaU1hcHBpbmdbdmVyYXNldElkXSB8fCB2ZXJhc2V0SWQ7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBtYXBwaW5nO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIG1hcHBpbmcgUE9JIElEcyBmb3Igam9iICR7am9iSWR9OmAsIGVycm9yKTtcbiAgICAvLyBSZXR1cm4gaWRlbnRpdHkgbWFwcGluZyBvbiBlcnJvclxuICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXModmVyYXNldFBvaUlkcy5tYXAoaWQgPT4gW2lkLCBpZF0pKTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBkaXNwbGF5IG5hbWUgZm9yIGEgUE9JIElEXG4gKiBSZXR1cm5zIGh1bWFuLXJlYWRhYmxlIG5hbWUgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2Ugb3JpZ2luYWwgSUQsIG90aGVyd2lzZSBWZXJhc2V0IElEXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb2lEaXNwbGF5TmFtZShcbiAgdmVyYXNldFBvaUlkOiBzdHJpbmcsXG4gIG9yaWdpbmFsUG9pSWQ6IHN0cmluZyB8IG51bGwsXG4gIHBvaU5hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsXG4pOiBzdHJpbmcge1xuICBpZiAocG9pTmFtZSkge1xuICAgIHJldHVybiBwb2lOYW1lO1xuICB9XG4gIGlmIChvcmlnaW5hbFBvaUlkICYmIG9yaWdpbmFsUG9pSWQgIT09IHZlcmFzZXRQb2lJZCkge1xuICAgIHJldHVybiBvcmlnaW5hbFBvaUlkO1xuICB9XG4gIHJldHVybiB2ZXJhc2V0UG9pSWQ7XG59XG5cbi8qKlxuICogR2V0IFBPSSBuYW1lcyBtYXBwaW5nIGZvciBhIGpvYlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UG9pTmFtZXMoXG4gIGpvYklkOiBzdHJpbmdcbik6IFByb21pc2U8UmVjb3JkPHN0cmluZywgc3RyaW5nPiB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBqb2IgPSBhd2FpdCBnZXRKb2Ioam9iSWQpO1xuICAgIGlmICgham9iIHx8ICFqb2IucG9pTmFtZXMpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gam9iLnBvaU5hbWVzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGdldHRpbmcgUE9JIG5hbWVzIGZvciBqb2IgJHtqb2JJZH06YCwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG4iXSwibmFtZXMiOlsiZ2V0Sm9iIiwiZ2V0T3JpZ2luYWxQb2lJZCIsImpvYklkIiwidmVyYXNldFBvaUlkIiwiam9iIiwicG9pTWFwcGluZyIsImVycm9yIiwiY29uc29sZSIsIm1hcFBvaUlkcyIsInZlcmFzZXRQb2lJZHMiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsIm1hcCIsImlkIiwibWFwcGluZyIsInZlcmFzZXRJZCIsImdldFBvaURpc3BsYXlOYW1lIiwib3JpZ2luYWxQb2lJZCIsInBvaU5hbWUiLCJnZXRQb2lOYW1lcyIsInBvaU5hbWVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/poi-mapping.ts\n");

/***/ }),

/***/ "(rsc)/./lib/s3-config.ts":
/*!**************************!*\
  !*** ./lib/s3-config.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BUCKET: () => (/* binding */ BUCKET),\n/* harmony export */   configExists: () => (/* binding */ configExists),\n/* harmony export */   getConfig: () => (/* binding */ getConfig),\n/* harmony export */   getPOICollection: () => (/* binding */ getPOICollection),\n/* harmony export */   initConfigIfNeeded: () => (/* binding */ initConfigIfNeeded),\n/* harmony export */   listObjects: () => (/* binding */ listObjects),\n/* harmony export */   putConfig: () => (/* binding */ putConfig),\n/* harmony export */   putPOICollection: () => (/* binding */ putPOICollection),\n/* harmony export */   s3Client: () => (/* binding */ s3Client),\n/* harmony export */   updateConfig: () => (/* binding */ updateConfig)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/client-s3 */ \"@aws-sdk/client-s3\");\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst s3Client = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.S3Client({\n    region: process.env.AWS_REGION || \"us-west-2\",\n    credentials: {\n        accessKeyId: process.env.AWS_ACCESS_KEY_ID || \"\",\n        secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY || \"\"\n    }\n});\nconst BUCKET = process.env.S3_BUCKET || \"garritz-veraset-data-us-west-2\";\n/**\n * Check if config file exists in S3\n */ async function configExists(key) {\n    try {\n        if (!process.env.AWS_ACCESS_KEY_ID || !process.env.AWS_SECRET_ACCESS_KEY) {\n            return false;\n        }\n        await s3Client.send(new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.HeadObjectCommand({\n            Bucket: BUCKET,\n            Key: `config/${key}.json`\n        }));\n        return true;\n    } catch (error) {\n        if (error.name === \"NoSuchKey\" || error.$metadata?.httpStatusCode === 404) {\n            return false;\n        }\n        // Other errors (permissions, network) - assume doesn't exist\n        return false;\n    }\n}\n/**\n * Read a JSON config file from S3 with proper error handling\n */ async function getConfig(key) {\n    try {\n        // Check if AWS credentials are configured\n        if (!process.env.AWS_ACCESS_KEY_ID || !process.env.AWS_SECRET_ACCESS_KEY) {\n            console.warn(`AWS credentials not configured. Returning null for config/${key}.json`);\n            return null;\n        }\n        const command = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.GetObjectCommand({\n            Bucket: BUCKET,\n            Key: `config/${key}.json`\n        });\n        const response = await s3Client.send(command);\n        const body = await response.Body?.transformToString();\n        if (!body) {\n            return null;\n        }\n        return JSON.parse(body);\n    } catch (error) {\n        // File doesn't exist\n        if (error.name === \"NoSuchKey\" || error.$metadata?.httpStatusCode === 404) {\n            console.warn(`Config file not found: config/${key}.json`);\n            return null;\n        }\n        // Don't throw errors in development - just log and return null\n        if (true) {\n            console.warn(`Error reading config/${key}.json:`, error.message || error);\n            return null;\n        }\n        console.error(`Error reading config/${key}.json:`, error);\n        throw error;\n    }\n}\n/**\n * Write a JSON config file to S3 with validation\n */ async function putConfig(key, data) {\n    try {\n        if (!process.env.AWS_ACCESS_KEY_ID || !process.env.AWS_SECRET_ACCESS_KEY) {\n            throw new Error(\"AWS credentials not configured\");\n        }\n        const json = JSON.stringify(data, null, 2);\n        // Validate JSON before saving\n        JSON.parse(json);\n        const command = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.PutObjectCommand({\n            Bucket: BUCKET,\n            Key: `config/${key}.json`,\n            Body: json,\n            ContentType: \"application/json\"\n        });\n        await s3Client.send(command);\n        console.log(`‚úÖ Saved config/${key}.json`);\n    } catch (error) {\n        console.error(`‚ùå Error saving config/${key}.json:`, error.message || error);\n        throw error;\n    }\n}\n/**\n * Initialize config file if it doesn't exist\n */ async function initConfigIfNeeded(key, defaultData) {\n    const exists = await configExists(key);\n    if (!exists) {\n        console.log(`üìù Initializing config/${key}.json with defaults`);\n        try {\n            await putConfig(key, defaultData);\n            return defaultData;\n        } catch (error) {\n            console.warn(`Could not initialize config/${key}.json, using in-memory default`);\n            return defaultData;\n        }\n    }\n    const existing = await getConfig(key);\n    return existing || defaultData;\n}\n/**\n * Update a JSON config file (read, modify, write)\n */ async function updateConfig(key, updater) {\n    const existing = await getConfig(key);\n    const updated = updater(existing);\n    await putConfig(key, updated);\n    return updated;\n}\n/**\n * List all objects in a prefix\n */ async function listObjects(prefix) {\n    try {\n        if (!process.env.AWS_ACCESS_KEY_ID || !process.env.AWS_SECRET_ACCESS_KEY) {\n            return [];\n        }\n        const { ListObjectsV2Command } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! @aws-sdk/client-s3 */ \"@aws-sdk/client-s3\", 23));\n        const command = new ListObjectsV2Command({\n            Bucket: BUCKET,\n            Prefix: prefix\n        });\n        const response = await s3Client.send(command);\n        return (response.Contents || []).map((obj)=>obj.Key || \"\").filter(Boolean);\n    } catch (error) {\n        console.warn(`Error listing objects with prefix ${prefix}:`, error);\n        return [];\n    }\n}\n/**\n * Get POI collection GeoJSON from S3, with fallback to local files\n */ async function getPOICollection(collectionId) {\n    try {\n        // Get collection metadata to find the correct GeoJSON path\n        const collections = await getConfig(\"poi-collections\") || {};\n        const collection = collections[collectionId];\n        // Use geojsonPath from collection metadata if available, otherwise construct from ID\n        const geojsonKey = collection?.geojsonPath || `pois/${collectionId}.geojson`;\n        // Try S3 first if credentials are configured and collection exists in config\n        if (collection && process.env.AWS_ACCESS_KEY_ID && process.env.AWS_SECRET_ACCESS_KEY) {\n            try {\n                const command = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.GetObjectCommand({\n                    Bucket: BUCKET,\n                    Key: geojsonKey\n                });\n                const response = await s3Client.send(command);\n                const body = await response.Body?.transformToString();\n                if (body) {\n                    return JSON.parse(body);\n                }\n            } catch (s3Error) {\n                if (s3Error.name !== \"NoSuchKey\" && s3Error.$metadata?.httpStatusCode !== 404) {\n                    console.warn(`S3 error for ${geojsonKey}, trying local fallback:`, s3Error.message);\n                }\n            // Fall through to local file check\n            }\n        }\n        // Fallback: Try to read from local POIs directory\n        // Map collection IDs to local file names (with underscores)\n        const localFileMap = {\n            \"spain-ecigarette-combined\": \"spain_ecigarette_combined.geojson\",\n            \"spain-tobacco-combined\": \"spain_tobacco_combined.geojson\",\n            \"spain-nicotine-full\": \"overture_spain_nicotine_clean.geojson\"\n        };\n        const localFileName = localFileMap[collectionId] || `${collectionId.replace(/-/g, \"_\")}.geojson`;\n        const localPath = path__WEBPACK_IMPORTED_MODULE_2__.join(process.cwd(), \"POIs\", localFileName);\n        if (fs__WEBPACK_IMPORTED_MODULE_1__.existsSync(localPath)) {\n            console.log(`üìÅ Using local GeoJSON file: ${localPath}`);\n            const fileContent = fs__WEBPACK_IMPORTED_MODULE_1__.readFileSync(localPath, \"utf-8\");\n            return JSON.parse(fileContent);\n        }\n        if (!collection) {\n            console.warn(`POI collection ${collectionId} not found in config and no local file found`);\n        } else {\n            console.warn(`GeoJSON file not found in S3 or locally for collection ${collectionId}`);\n        }\n        return null;\n    } catch (error) {\n        console.error(`Error reading GeoJSON for collection ${collectionId}:`, error);\n        throw error;\n    }\n}\n/**\n * Save POI collection GeoJSON to S3\n */ async function putPOICollection(collectionId, geojson) {\n    if (!process.env.AWS_ACCESS_KEY_ID || !process.env.AWS_SECRET_ACCESS_KEY) {\n        throw new Error(\"AWS credentials not configured\");\n    }\n    const command = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.PutObjectCommand({\n        Bucket: BUCKET,\n        Key: `pois/${collectionId}.geojson`,\n        Body: JSON.stringify(geojson, null, 2),\n        ContentType: \"application/json\"\n    });\n    await s3Client.send(command);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxFQUFFdkM7UUFDdkUsTUFBTUE7SUFDUjtBQUNGO0FBRUE7O0NBRUMsR0FDTSxlQUFlc0QsaUJBQWlCZixZQUFvQixFQUFFZ0IsT0FBWTtJQUN2RSxJQUFJLENBQUN0RSxRQUFRQyxHQUFHLENBQUNJLGlCQUFpQixJQUFJLENBQUNMLFFBQVFDLEdBQUcsQ0FBQ00scUJBQXFCLEVBQUU7UUFDeEUsTUFBTSxJQUFJeUIsTUFBTTtJQUNsQjtJQUVBLE1BQU1WLFVBQVUsSUFBSTVCLGdFQUFnQkEsQ0FBQztRQUNuQ21CLFFBQVFMO1FBQ1JNLEtBQUssQ0FBQyxLQUFLLEVBQUV3QyxhQUFhLFFBQVEsQ0FBQztRQUNuQzdCLE1BQU1FLEtBQUtPLFNBQVMsQ0FBQ29DLFNBQVMsTUFBTTtRQUNwQ25DLGFBQWE7SUFDZjtJQUVBLE1BQU1yQyxTQUFTYyxJQUFJLENBQUNVO0FBQ3RCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ21jLXZlcmFzZXQtYXBpLy4vbGliL3MzLWNvbmZpZy50cz9mYTFjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFMzQ2xpZW50LCBHZXRPYmplY3RDb21tYW5kLCBQdXRPYmplY3RDb21tYW5kLCBIZWFkT2JqZWN0Q29tbWFuZCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1zMyc7XG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuXG5leHBvcnQgY29uc3QgczNDbGllbnQgPSBuZXcgUzNDbGllbnQoe1xuICByZWdpb246IHByb2Nlc3MuZW52LkFXU19SRUdJT04gfHwgJ3VzLXdlc3QtMicsXG4gIGNyZWRlbnRpYWxzOiB7XG4gICAgYWNjZXNzS2V5SWQ6IHByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lEIHx8ICcnLFxuICAgIHNlY3JldEFjY2Vzc0tleTogcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIHx8ICcnLFxuICB9LFxufSk7XG5cbmV4cG9ydCBjb25zdCBCVUNLRVQgPSBwcm9jZXNzLmVudi5TM19CVUNLRVQgfHwgJ2dhcnJpdHotdmVyYXNldC1kYXRhLXVzLXdlc3QtMic7XG5cbi8qKlxuICogQ2hlY2sgaWYgY29uZmlnIGZpbGUgZXhpc3RzIGluIFMzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25maWdFeGlzdHMoa2V5OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICBpZiAoIXByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lEIHx8ICFwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgYXdhaXQgczNDbGllbnQuc2VuZChuZXcgSGVhZE9iamVjdENvbW1hbmQoe1xuICAgICAgQnVja2V0OiBCVUNLRVQsXG4gICAgICBLZXk6IGBjb25maWcvJHtrZXl9Lmpzb25gLFxuICAgIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGlmIChlcnJvci5uYW1lID09PSAnTm9TdWNoS2V5JyB8fCBlcnJvci4kbWV0YWRhdGE/Lmh0dHBTdGF0dXNDb2RlID09PSA0MDQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gT3RoZXIgZXJyb3JzIChwZXJtaXNzaW9ucywgbmV0d29yaykgLSBhc3N1bWUgZG9lc24ndCBleGlzdFxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIFJlYWQgYSBKU09OIGNvbmZpZyBmaWxlIGZyb20gUzMgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmdcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbmZpZzxUPihrZXk6IHN0cmluZyk6IFByb21pc2U8VCB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICAvLyBDaGVjayBpZiBBV1MgY3JlZGVudGlhbHMgYXJlIGNvbmZpZ3VyZWRcbiAgICBpZiAoIXByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lEIHx8ICFwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkpIHtcbiAgICAgIGNvbnNvbGUud2FybihgQVdTIGNyZWRlbnRpYWxzIG5vdCBjb25maWd1cmVkLiBSZXR1cm5pbmcgbnVsbCBmb3IgY29uZmlnLyR7a2V5fS5qc29uYCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBjb21tYW5kID0gbmV3IEdldE9iamVjdENvbW1hbmQoe1xuICAgICAgQnVja2V0OiBCVUNLRVQsXG4gICAgICBLZXk6IGBjb25maWcvJHtrZXl9Lmpzb25gLFxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgczNDbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVzcG9uc2UuQm9keT8udHJhbnNmb3JtVG9TdHJpbmcoKTtcbiAgICBcbiAgICBpZiAoIWJvZHkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gSlNPTi5wYXJzZShib2R5KSBhcyBUO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgLy8gRmlsZSBkb2Vzbid0IGV4aXN0XG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdOb1N1Y2hLZXknIHx8IGVycm9yLiRtZXRhZGF0YT8uaHR0cFN0YXR1c0NvZGUgPT09IDQwNCkge1xuICAgICAgY29uc29sZS53YXJuKGBDb25maWcgZmlsZSBub3QgZm91bmQ6IGNvbmZpZy8ke2tleX0uanNvbmApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIC8vIERvbid0IHRocm93IGVycm9ycyBpbiBkZXZlbG9wbWVudCAtIGp1c3QgbG9nIGFuZCByZXR1cm4gbnVsbFxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgY29uc29sZS53YXJuKGBFcnJvciByZWFkaW5nIGNvbmZpZy8ke2tleX0uanNvbjpgLCBlcnJvci5tZXNzYWdlIHx8IGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciByZWFkaW5nIGNvbmZpZy8ke2tleX0uanNvbjpgLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBXcml0ZSBhIEpTT04gY29uZmlnIGZpbGUgdG8gUzMgd2l0aCB2YWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwdXRDb25maWc8VD4oa2V5OiBzdHJpbmcsIGRhdGE6IFQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBpZiAoIXByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lEIHx8ICFwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQVdTIGNyZWRlbnRpYWxzIG5vdCBjb25maWd1cmVkJyk7XG4gICAgfVxuXG4gICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpO1xuICAgIFxuICAgIC8vIFZhbGlkYXRlIEpTT04gYmVmb3JlIHNhdmluZ1xuICAgIEpTT04ucGFyc2UoanNvbik7XG4gICAgXG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBQdXRPYmplY3RDb21tYW5kKHtcbiAgICAgIEJ1Y2tldDogQlVDS0VULFxuICAgICAgS2V5OiBgY29uZmlnLyR7a2V5fS5qc29uYCxcbiAgICAgIEJvZHk6IGpzb24sXG4gICAgICBDb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIH0pO1xuICAgIFxuICAgIGF3YWl0IHMzQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgY29uc29sZS5sb2coYOKchSBTYXZlZCBjb25maWcvJHtrZXl9Lmpzb25gKTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBFcnJvciBzYXZpbmcgY29uZmlnLyR7a2V5fS5qc29uOmAsIGVycm9yLm1lc3NhZ2UgfHwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBjb25maWcgZmlsZSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0Q29uZmlnSWZOZWVkZWQ8VD4oa2V5OiBzdHJpbmcsIGRlZmF1bHREYXRhOiBUKTogUHJvbWlzZTxUPiB7XG4gIGNvbnN0IGV4aXN0cyA9IGF3YWl0IGNvbmZpZ0V4aXN0cyhrZXkpO1xuICBcbiAgaWYgKCFleGlzdHMpIHtcbiAgICBjb25zb2xlLmxvZyhg8J+TnSBJbml0aWFsaXppbmcgY29uZmlnLyR7a2V5fS5qc29uIHdpdGggZGVmYXVsdHNgKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgcHV0Q29uZmlnKGtleSwgZGVmYXVsdERhdGEpO1xuICAgICAgcmV0dXJuIGRlZmF1bHREYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBpbml0aWFsaXplIGNvbmZpZy8ke2tleX0uanNvbiwgdXNpbmcgaW4tbWVtb3J5IGRlZmF1bHRgKTtcbiAgICAgIHJldHVybiBkZWZhdWx0RGF0YTtcbiAgICB9XG4gIH1cbiAgXG4gIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgZ2V0Q29uZmlnPFQ+KGtleSk7XG4gIHJldHVybiBleGlzdGluZyB8fCBkZWZhdWx0RGF0YTtcbn1cblxuLyoqXG4gKiBVcGRhdGUgYSBKU09OIGNvbmZpZyBmaWxlIChyZWFkLCBtb2RpZnksIHdyaXRlKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQ29uZmlnPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+PihcbiAga2V5OiBzdHJpbmcsXG4gIHVwZGF0ZXI6IChkYXRhOiBUIHwgbnVsbCkgPT4gVFxuKTogUHJvbWlzZTxUPiB7XG4gIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgZ2V0Q29uZmlnPFQ+KGtleSk7XG4gIGNvbnN0IHVwZGF0ZWQgPSB1cGRhdGVyKGV4aXN0aW5nKTtcbiAgYXdhaXQgcHV0Q29uZmlnKGtleSwgdXBkYXRlZCk7XG4gIHJldHVybiB1cGRhdGVkO1xufVxuXG4vKipcbiAqIExpc3QgYWxsIG9iamVjdHMgaW4gYSBwcmVmaXhcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxpc3RPYmplY3RzKHByZWZpeDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICB0cnkge1xuICAgIGlmICghcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVlfSUQgfHwgIXByb2Nlc3MuZW52LkFXU19TRUNSRVRfQUNDRVNTX0tFWSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHsgTGlzdE9iamVjdHNWMkNvbW1hbmQgfSA9IGF3YWl0IGltcG9ydCgnQGF3cy1zZGsvY2xpZW50LXMzJyk7XG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBMaXN0T2JqZWN0c1YyQ29tbWFuZCh7XG4gICAgICBCdWNrZXQ6IEJVQ0tFVCxcbiAgICAgIFByZWZpeDogcHJlZml4LFxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgczNDbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICByZXR1cm4gKHJlc3BvbnNlLkNvbnRlbnRzIHx8IFtdKS5tYXAob2JqID0+IG9iai5LZXkgfHwgJycpLmZpbHRlcihCb29sZWFuKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oYEVycm9yIGxpc3Rpbmcgb2JqZWN0cyB3aXRoIHByZWZpeCAke3ByZWZpeH06YCwgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBQT0kgY29sbGVjdGlvbiBHZW9KU09OIGZyb20gUzMsIHdpdGggZmFsbGJhY2sgdG8gbG9jYWwgZmlsZXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBPSUNvbGxlY3Rpb24oY29sbGVjdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPGFueSB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICAvLyBHZXQgY29sbGVjdGlvbiBtZXRhZGF0YSB0byBmaW5kIHRoZSBjb3JyZWN0IEdlb0pTT04gcGF0aFxuICAgIGNvbnN0IGNvbGxlY3Rpb25zID0gYXdhaXQgZ2V0Q29uZmlnPFJlY29yZDxzdHJpbmcsIGFueT4+KCdwb2ktY29sbGVjdGlvbnMnKSB8fCB7fTtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gY29sbGVjdGlvbnNbY29sbGVjdGlvbklkXTtcbiAgICBcbiAgICAvLyBVc2UgZ2VvanNvblBhdGggZnJvbSBjb2xsZWN0aW9uIG1ldGFkYXRhIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGNvbnN0cnVjdCBmcm9tIElEXG4gICAgY29uc3QgZ2VvanNvbktleSA9IGNvbGxlY3Rpb24/Lmdlb2pzb25QYXRoIHx8IGBwb2lzLyR7Y29sbGVjdGlvbklkfS5nZW9qc29uYDtcblxuICAgIC8vIFRyeSBTMyBmaXJzdCBpZiBjcmVkZW50aWFscyBhcmUgY29uZmlndXJlZCBhbmQgY29sbGVjdGlvbiBleGlzdHMgaW4gY29uZmlnXG4gICAgaWYgKGNvbGxlY3Rpb24gJiYgcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVlfSUQgJiYgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IEdldE9iamVjdENvbW1hbmQoe1xuICAgICAgICAgIEJ1Y2tldDogQlVDS0VULFxuICAgICAgICAgIEtleTogZ2VvanNvbktleSxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHMzQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXNwb25zZS5Cb2R5Py50cmFuc2Zvcm1Ub1N0cmluZygpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGJvZHkpIHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShib2R5KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoczNFcnJvcjogYW55KSB7XG4gICAgICAgIGlmIChzM0Vycm9yLm5hbWUgIT09ICdOb1N1Y2hLZXknICYmIHMzRXJyb3IuJG1ldGFkYXRhPy5odHRwU3RhdHVzQ29kZSAhPT0gNDA0KSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBTMyBlcnJvciBmb3IgJHtnZW9qc29uS2V5fSwgdHJ5aW5nIGxvY2FsIGZhbGxiYWNrOmAsIHMzRXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRmFsbCB0aHJvdWdoIHRvIGxvY2FsIGZpbGUgY2hlY2tcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGYWxsYmFjazogVHJ5IHRvIHJlYWQgZnJvbSBsb2NhbCBQT0lzIGRpcmVjdG9yeVxuICAgIC8vIE1hcCBjb2xsZWN0aW9uIElEcyB0byBsb2NhbCBmaWxlIG5hbWVzICh3aXRoIHVuZGVyc2NvcmVzKVxuICAgIGNvbnN0IGxvY2FsRmlsZU1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICdzcGFpbi1lY2lnYXJldHRlLWNvbWJpbmVkJzogJ3NwYWluX2VjaWdhcmV0dGVfY29tYmluZWQuZ2VvanNvbicsXG4gICAgICAnc3BhaW4tdG9iYWNjby1jb21iaW5lZCc6ICdzcGFpbl90b2JhY2NvX2NvbWJpbmVkLmdlb2pzb24nLFxuICAgICAgJ3NwYWluLW5pY290aW5lLWZ1bGwnOiAnb3ZlcnR1cmVfc3BhaW5fbmljb3RpbmVfY2xlYW4uZ2VvanNvbicsIC8vIFVzZSB0aGUgY29tYmluZWQgbmljb3RpbmUgZmlsZVxuICAgIH07XG5cbiAgICBjb25zdCBsb2NhbEZpbGVOYW1lID0gbG9jYWxGaWxlTWFwW2NvbGxlY3Rpb25JZF0gfHwgYCR7Y29sbGVjdGlvbklkLnJlcGxhY2UoLy0vZywgJ18nKX0uZ2VvanNvbmA7XG4gICAgY29uc3QgbG9jYWxQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdQT0lzJywgbG9jYWxGaWxlTmFtZSk7XG5cbiAgICBpZiAoZnMuZXhpc3RzU3luYyhsb2NhbFBhdGgpKSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+TgSBVc2luZyBsb2NhbCBHZW9KU09OIGZpbGU6ICR7bG9jYWxQYXRofWApO1xuICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMobG9jYWxQYXRoLCAndXRmLTgnKTtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGZpbGVDb250ZW50KTtcbiAgICB9XG5cbiAgICBpZiAoIWNvbGxlY3Rpb24pIHtcbiAgICAgIGNvbnNvbGUud2FybihgUE9JIGNvbGxlY3Rpb24gJHtjb2xsZWN0aW9uSWR9IG5vdCBmb3VuZCBpbiBjb25maWcgYW5kIG5vIGxvY2FsIGZpbGUgZm91bmRgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKGBHZW9KU09OIGZpbGUgbm90IGZvdW5kIGluIFMzIG9yIGxvY2FsbHkgZm9yIGNvbGxlY3Rpb24gJHtjb2xsZWN0aW9uSWR9YCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgcmVhZGluZyBHZW9KU09OIGZvciBjb2xsZWN0aW9uICR7Y29sbGVjdGlvbklkfTpgLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBTYXZlIFBPSSBjb2xsZWN0aW9uIEdlb0pTT04gdG8gUzNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHB1dFBPSUNvbGxlY3Rpb24oY29sbGVjdGlvbklkOiBzdHJpbmcsIGdlb2pzb246IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIXByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lEIHx8ICFwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0FXUyBjcmVkZW50aWFscyBub3QgY29uZmlndXJlZCcpO1xuICB9XG5cbiAgY29uc3QgY29tbWFuZCA9IG5ldyBQdXRPYmplY3RDb21tYW5kKHtcbiAgICBCdWNrZXQ6IEJVQ0tFVCxcbiAgICBLZXk6IGBwb2lzLyR7Y29sbGVjdGlvbklkfS5nZW9qc29uYCxcbiAgICBCb2R5OiBKU09OLnN0cmluZ2lmeShnZW9qc29uLCBudWxsLCAyKSxcbiAgICBDb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICB9KTtcbiAgXG4gIGF3YWl0IHMzQ2xpZW50LnNlbmQoY29tbWFuZCk7XG59XG4iXSwibmFtZXMiOlsiUzNDbGllbnQiLCJHZXRPYmplY3RDb21tYW5kIiwiUHV0T2JqZWN0Q29tbWFuZCIsIkhlYWRPYmplY3RDb21tYW5kIiwiZnMiLCJwYXRoIiwiczNDbGllbnQiLCJyZWdpb24iLCJwcm9jZXNzIiwiZW52IiwiQVdTX1JFR0lPTiIsImNyZWRlbnRpYWxzIiwiYWNjZXNzS2V5SWQiLCJBV1NfQUNDRVNTX0tFWV9JRCIsInNlY3JldEFjY2Vzc0tleSIsIkFXU19TRUNSRVRfQUNDRVNTX0tFWSIsIkJVQ0tFVCIsIlMzX0JVQ0tFVCIsImNvbmZpZ0V4aXN0cyIsImtleSIsInNlbmQiLCJCdWNrZXQiLCJLZXkiLCJlcnJvciIsIm5hbWUiLCIkbWV0YWRhdGEiLCJodHRwU3RhdHVzQ29kZSIsImdldENvbmZpZyIsImNvbnNvbGUiLCJ3YXJuIiwiY29tbWFuZCIsInJlc3BvbnNlIiwiYm9keSIsIkJvZHkiLCJ0cmFuc2Zvcm1Ub1N0cmluZyIsIkpTT04iLCJwYXJzZSIsIm1lc3NhZ2UiLCJwdXRDb25maWciLCJkYXRhIiwiRXJyb3IiLCJqc29uIiwic3RyaW5naWZ5IiwiQ29udGVudFR5cGUiLCJsb2ciLCJpbml0Q29uZmlnSWZOZWVkZWQiLCJkZWZhdWx0RGF0YSIsImV4aXN0cyIsImV4aXN0aW5nIiwidXBkYXRlQ29uZmlnIiwidXBkYXRlciIsInVwZGF0ZWQiLCJsaXN0T2JqZWN0cyIsInByZWZpeCIsIkxpc3RPYmplY3RzVjJDb21tYW5kIiwiUHJlZml4IiwiQ29udGVudHMiLCJtYXAiLCJvYmoiLCJmaWx0ZXIiLCJCb29sZWFuIiwiZ2V0UE9JQ29sbGVjdGlvbiIsImNvbGxlY3Rpb25JZCIsImNvbGxlY3Rpb25zIiwiY29sbGVjdGlvbiIsImdlb2pzb25LZXkiLCJnZW9qc29uUGF0aCIsInMzRXJyb3IiLCJsb2NhbEZpbGVNYXAiLCJsb2NhbEZpbGVOYW1lIiwicmVwbGFjZSIsImxvY2FsUGF0aCIsImpvaW4iLCJjd2QiLCJleGlzdHNTeW5jIiwiZmlsZUNvbnRlbnQiLCJyZWFkRmlsZVN5bmMiLCJwdXRQT0lDb2xsZWN0aW9uIiwiZ2VvanNvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/s3-config.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdatasets%2F%5Bname%5D%2Fpois%2Fmap%2Froute&page=%2Fapi%2Fdatasets%2F%5Bname%5D%2Fpois%2Fmap%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdatasets%2F%5Bname%5D%2Fpois%2Fmap%2Froute.ts&appDir=%2FUsers%2Fjuliangarritz%2Fdev%2Fpy%2Fveraset%2Fveraset-api%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjuliangarritz%2Fdev%2Fpy%2Fveraset%2Fveraset-api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();