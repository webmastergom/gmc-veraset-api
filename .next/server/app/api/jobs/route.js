"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/jobs/route";
exports.ids = ["app/api/jobs/route"];
exports.modules = {

/***/ "@aws-sdk/client-s3":
/*!*************************************!*\
  !*** external "@aws-sdk/client-s3" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("@aws-sdk/client-s3");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fjobs%2Froute&page=%2Fapi%2Fjobs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fjobs%2Froute.ts&appDir=%2FUsers%2Fjuliangarritz%2Fdev%2Fpy%2Fveraset%2Fveraset-api%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjuliangarritz%2Fdev%2Fpy%2Fveraset%2Fveraset-api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fjobs%2Froute&page=%2Fapi%2Fjobs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fjobs%2Froute.ts&appDir=%2FUsers%2Fjuliangarritz%2Fdev%2Fpy%2Fveraset%2Fveraset-api%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjuliangarritz%2Fdev%2Fpy%2Fveraset%2Fveraset-api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_juliangarritz_dev_py_veraset_veraset_api_app_api_jobs_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/jobs/route.ts */ \"(rsc)/./app/api/jobs/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/jobs/route\",\n        pathname: \"/api/jobs\",\n        filename: \"route\",\n        bundlePath: \"app/api/jobs/route\"\n    },\n    resolvedPagePath: \"/Users/juliangarritz/dev/py/veraset/veraset-api/app/api/jobs/route.ts\",\n    nextConfigOutput,\n    userland: _Users_juliangarritz_dev_py_veraset_veraset_api_app_api_jobs_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/jobs/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZqb2JzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZqb2JzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGam9icyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmp1bGlhbmdhcnJpdHolMkZkZXYlMkZweSUyRnZlcmFzZXQlMkZ2ZXJhc2V0LWFwaSUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZqdWxpYW5nYXJyaXR6JTJGZGV2JTJGcHklMkZ2ZXJhc2V0JTJGdmVyYXNldC1hcGkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3FCO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ21jLXZlcmFzZXQtYXBpLz81ZDc1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9qdWxpYW5nYXJyaXR6L2Rldi9weS92ZXJhc2V0L3ZlcmFzZXQtYXBpL2FwcC9hcGkvam9icy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvam9icy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2pvYnNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2pvYnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvanVsaWFuZ2Fycml0ei9kZXYvcHkvdmVyYXNldC92ZXJhc2V0LWFwaS9hcHAvYXBpL2pvYnMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2pvYnMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fjobs%2Froute&page=%2Fapi%2Fjobs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fjobs%2Froute.ts&appDir=%2FUsers%2Fjuliangarritz%2Fdev%2Fpy%2Fveraset%2Fveraset-api%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjuliangarritz%2Fdev%2Fpy%2Fveraset%2Fveraset-api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/jobs/route.ts":
/*!*******************************!*\
  !*** ./app/api/jobs/route.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   revalidate: () => (/* binding */ revalidate)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_jobs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/jobs */ \"(rsc)/./lib/jobs.ts\");\n/* harmony import */ var _lib_usage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/usage */ \"(rsc)/./lib/usage.ts\");\n/* harmony import */ var _lib_seed_jobs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/seed-jobs */ \"(rsc)/./lib/seed-jobs.ts\");\n/* harmony import */ var _lib_s3_config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/s3-config */ \"(rsc)/./lib/s3-config.ts\");\n/* harmony import */ var _lib_validation__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/validation */ \"(rsc)/./lib/validation.ts\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/logger */ \"(rsc)/./lib/logger.ts\");\n/* harmony import */ var _lib_security__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/lib/security */ \"(rsc)/./lib/security.ts\");\n\n\n\n\n\n\n\n\nconst dynamic = \"force-dynamic\";\nconst revalidate = 0;\nasync function GET(request) {\n    try {\n        // Initialize with seed data if needed\n        const jobsData = await (0,_lib_s3_config__WEBPACK_IMPORTED_MODULE_4__.initConfigIfNeeded)(\"jobs\", _lib_seed_jobs__WEBPACK_IMPORTED_MODULE_3__.initialJobsData);\n        // Get all jobs\n        const jobs = await (0,_lib_jobs__WEBPACK_IMPORTED_MODULE_1__.getAllJobs)();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(jobs);\n    } catch (error) {\n        _lib_logger__WEBPACK_IMPORTED_MODULE_6__.logger.error(\"GET /api/jobs error:\", error);\n        // Fallback to seed data if S3 fails\n        try {\n            const jobs = Object.values(_lib_seed_jobs__WEBPACK_IMPORTED_MODULE_3__.initialJobsData);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(jobs);\n        } catch (seedError) {\n            const isProduction = \"development\" === \"production\";\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to fetch jobs\",\n                details: isProduction ? undefined : (0,_lib_security__WEBPACK_IMPORTED_MODULE_7__.sanitizeError)(error)\n            }, {\n                status: 500\n            });\n        }\n    }\n}\nasync function POST(request) {\n    try {\n        // 1. Validate request body\n        const validation = await (0,_lib_validation__WEBPACK_IMPORTED_MODULE_5__.validateRequestBody)(request, _lib_validation__WEBPACK_IMPORTED_MODULE_5__.createJobSchema);\n        if (!validation.success) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: validation.error\n            }, {\n                status: validation.status\n            });\n        }\n        const body = validation.data;\n        // 2. Check usage limit\n        const { allowed, reason, remaining } = await (0,_lib_usage__WEBPACK_IMPORTED_MODULE_2__.canCreateJob)();\n        if (!allowed) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Limit reached\",\n                message: reason,\n                remaining\n            }, {\n                status: 429\n            });\n        }\n        const { name, type, poiCount, poiCollectionId, dateRange, radius, schema, verasetConfig, poiMapping, poiNames } = body;\n        // 3. Call Veraset API\n        const apiUrl = \"https://gmc-veraset-api.vercel.app\" || 0;\n        // Log POI count being sent (sanitized in production)\n        // Handle both place_key (Veraset POIs) and geo_radius (GeoJSON POIs)\n        const poisToSend = verasetConfig?.place_key || verasetConfig?.geo_radius || body.pois || [];\n        const poiCountToSend = Array.isArray(poisToSend) ? poisToSend.length : 0;\n        _lib_logger__WEBPACK_IMPORTED_MODULE_6__.logger.log(`Job Creation: ${name}`, {\n            poiCount: poiCountToSend,\n            expectedPoiCount: poiCount || 0,\n            dateRange: {\n                from: dateRange.from_date || dateRange.from,\n                to: dateRange.to_date || dateRange.to\n            },\n            type,\n            schema: schema || \"BASIC\"\n        });\n        if (poiCountToSend !== poiCount && poiCount) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_6__.logger.warn(`POI count mismatch: sending ${poiCountToSend} but expected ${poiCount}`);\n        }\n        if (poiCountToSend === 0) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_6__.logger.error(\"No POIs to send! This will cause the job to fail.\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"No POIs provided. Please ensure POI collection is valid and contains Point geometries.\"\n            }, {\n                status: 400\n            });\n        }\n        const verasetResponse = await fetch(`${apiUrl}/api/veraset/movement`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(verasetConfig || {\n                type,\n                date_range: dateRange,\n                pois: body.pois || [],\n                schema: schema || \"BASIC\"\n            })\n        });\n        // Log response for debugging (sanitized in production)\n        const responseText = await verasetResponse.text();\n        let verasetData;\n        try {\n            verasetData = JSON.parse(responseText);\n        } catch  {\n            verasetData = {\n                raw: responseText\n            };\n        }\n        if (!verasetResponse.ok) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_6__.logger.error(\"Veraset API error response\", {\n                status: verasetResponse.status\n            });\n            const isProduction = \"development\" === \"production\";\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Veraset API failed\",\n                details: isProduction ? undefined : responseText.substring(0, 500)\n            }, {\n                status: 502\n            });\n        }\n        _lib_logger__WEBPACK_IMPORTED_MODULE_6__.logger.log(\"Veraset API success\", {\n            jobId: verasetData.job_id || verasetData.data?.job_id,\n            processedPois: verasetData.processed_pois\n        });\n        // Log any warnings or info from Veraset about POI processing\n        if (verasetData.warnings || verasetData.info) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_6__.logger.info(\"Veraset API info/warnings\", {\n                warnings: verasetData.warnings,\n                info: verasetData.info\n            });\n        }\n        // Check if Veraset returned a different POI count than sent\n        if (verasetData.processed_pois !== undefined && poiCountToSend > 0) {\n            const processedCount = verasetData.processed_pois;\n            if (processedCount !== poiCountToSend) {\n                _lib_logger__WEBPACK_IMPORTED_MODULE_6__.logger.warn(`Veraset processed ${processedCount} POIs out of ${poiCountToSend} sent`);\n            }\n        }\n        const jobId = verasetData.job_id || verasetData.data?.job_id;\n        if (!jobId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"No job_id returned from Veraset\",\n                data: verasetData\n            }, {\n                status: 502\n            });\n        }\n        // 4. Save job to S3 (jobs created through app are NOT external)\n        // Normalize dateRange to always have from and to\n        const normalizedDateRange = {\n            from: dateRange.from || dateRange.from_date || \"\",\n            to: dateRange.to || dateRange.to_date || \"\"\n        };\n        const job = await (0,_lib_jobs__WEBPACK_IMPORTED_MODULE_1__.createJob)({\n            jobId,\n            name,\n            type,\n            poiCount: poiCount || 0,\n            poiCollectionId,\n            dateRange: normalizedDateRange,\n            radius: radius || 10,\n            schema: schema === \"ENHANCED\" ? \"ENHANCED\" : schema === \"FULL\" ? \"FULL\" : \"BASIC\",\n            status: \"QUEUED\",\n            s3SourcePath: `s3://veraset-prd-platform-us-west-2/output/garritz/${jobId}/`,\n            external: false,\n            poiMapping: poiMapping || undefined,\n            poiNames: poiNames || undefined\n        });\n        // 5. Increment usage (atomic operation) - only for non-external jobs\n        if (!job.external) {\n            await (0,_lib_usage__WEBPACK_IMPORTED_MODULE_2__.incrementUsage)(jobId);\n        }\n        // 6. Return success\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            job,\n            remaining: remaining - 1\n        });\n    } catch (error) {\n        _lib_logger__WEBPACK_IMPORTED_MODULE_6__.logger.error(\"POST /api/jobs error:\", error);\n        const isProduction = \"development\" === \"production\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to create job\",\n            details: isProduction ? undefined : (0,_lib_security__WEBPACK_IMPORTED_MODULE_7__.sanitizeError)(error)\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1lBQzNFaEIsUUFBUTtZQUNSNkQsY0FBYyxDQUFDLG1EQUFtRCxFQUFFVCxNQUFNLENBQUMsQ0FBQztZQUM1RVUsVUFBVTtZQUNWNUMsWUFBWUEsY0FBY25CO1lBQzFCb0IsVUFBVUEsWUFBWXBCO1FBQ3hCO1FBRUEscUVBQXFFO1FBQ3JFLElBQUksQ0FBQzZELElBQUlFLFFBQVEsRUFBRTtZQUNqQixNQUFNcEYsMERBQWNBLENBQUMwRTtRQUN2QjtRQUVBLG9CQUFvQjtRQUNwQixPQUFPOUUscURBQVlBLENBQUNpQixJQUFJLENBQUM7WUFDdkJZLFNBQVM7WUFDVHlEO1lBQ0FwRCxXQUFXQSxZQUFZO1FBQ3pCO0lBRUYsRUFBRSxPQUFPaEIsT0FBWTtRQUNuQlQsK0NBQU1BLENBQUNTLEtBQUssQ0FBQyx5QkFBeUJBO1FBQ3RDLE1BQU1JLGVBQWVDLGtCQUF5QjtRQUM5QyxPQUFPdkIscURBQVlBLENBQUNpQixJQUFJLENBQ3RCO1lBQ0VDLE9BQU87WUFDUE0sU0FBU0YsZUFBZUcsWUFBWWYsNERBQWFBLENBQUNRO1FBQ3BELEdBQ0E7WUFBRVEsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nbWMtdmVyYXNldC1hcGkvLi9hcHAvYXBpL2pvYnMvcm91dGUudHM/OWU3OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBnZXRBbGxKb2JzLCBjcmVhdGVKb2IgfSBmcm9tIFwiQC9saWIvam9ic1wiO1xuaW1wb3J0IHsgY2FuQ3JlYXRlSm9iLCBpbmNyZW1lbnRVc2FnZSB9IGZyb20gXCJAL2xpYi91c2FnZVwiO1xuaW1wb3J0IHsgaW5pdGlhbEpvYnNEYXRhIH0gZnJvbSBcIkAvbGliL3NlZWQtam9ic1wiO1xuaW1wb3J0IHsgaW5pdENvbmZpZ0lmTmVlZGVkIH0gZnJvbSBcIkAvbGliL3MzLWNvbmZpZ1wiO1xuaW1wb3J0IHsgdmFsaWRhdGVSZXF1ZXN0Qm9keSwgY3JlYXRlSm9iU2NoZW1hIH0gZnJvbSBcIkAvbGliL3ZhbGlkYXRpb25cIjtcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJAL2xpYi9sb2dnZXJcIjtcbmltcG9ydCB7IHNhbml0aXplRXJyb3IgfSBmcm9tIFwiQC9saWIvc2VjdXJpdHlcIjtcblxuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYyc7XG5leHBvcnQgY29uc3QgcmV2YWxpZGF0ZSA9IDA7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyBJbml0aWFsaXplIHdpdGggc2VlZCBkYXRhIGlmIG5lZWRlZFxuICAgIGNvbnN0IGpvYnNEYXRhID0gYXdhaXQgaW5pdENvbmZpZ0lmTmVlZGVkKCdqb2JzJywgaW5pdGlhbEpvYnNEYXRhKTtcbiAgICBcbiAgICAvLyBHZXQgYWxsIGpvYnNcbiAgICBjb25zdCBqb2JzID0gYXdhaXQgZ2V0QWxsSm9icygpO1xuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihqb2JzKTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGxvZ2dlci5lcnJvcignR0VUIC9hcGkvam9icyBlcnJvcjonLCBlcnJvcik7XG4gICAgXG4gICAgLy8gRmFsbGJhY2sgdG8gc2VlZCBkYXRhIGlmIFMzIGZhaWxzXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGpvYnMgPSBPYmplY3QudmFsdWVzKGluaXRpYWxKb2JzRGF0YSk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oam9icyk7XG4gICAgfSBjYXRjaCAoc2VlZEVycm9yKSB7XG4gICAgICBjb25zdCBpc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IFxuICAgICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIGpvYnMnLCBcbiAgICAgICAgICBkZXRhaWxzOiBpc1Byb2R1Y3Rpb24gPyB1bmRlZmluZWQgOiBzYW5pdGl6ZUVycm9yKGVycm9yKVxuICAgICAgICB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gMS4gVmFsaWRhdGUgcmVxdWVzdCBib2R5XG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IGF3YWl0IHZhbGlkYXRlUmVxdWVzdEJvZHkocmVxdWVzdCwgY3JlYXRlSm9iU2NoZW1hKTtcbiAgICBpZiAoIXZhbGlkYXRpb24uc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiB2YWxpZGF0aW9uLmVycm9yIH0sXG4gICAgICAgIHsgc3RhdHVzOiB2YWxpZGF0aW9uLnN0YXR1cyB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBib2R5ID0gdmFsaWRhdGlvbi5kYXRhO1xuXG4gICAgLy8gMi4gQ2hlY2sgdXNhZ2UgbGltaXRcbiAgICBjb25zdCB7IGFsbG93ZWQsIHJlYXNvbiwgcmVtYWluaW5nIH0gPSBhd2FpdCBjYW5DcmVhdGVKb2IoKTtcbiAgICBpZiAoIWFsbG93ZWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0xpbWl0IHJlYWNoZWQnLCBtZXNzYWdlOiByZWFzb24sIHJlbWFpbmluZyB9LFxuICAgICAgICB7IHN0YXR1czogNDI5IH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBuYW1lLCB0eXBlLCBwb2lDb3VudCwgcG9pQ29sbGVjdGlvbklkLCBkYXRlUmFuZ2UsIHJhZGl1cywgc2NoZW1hLCB2ZXJhc2V0Q29uZmlnLCBwb2lNYXBwaW5nLCBwb2lOYW1lcyB9ID0gYm9keTtcblxuICAgIC8vIDMuIENhbGwgVmVyYXNldCBBUElcbiAgICBjb25zdCBhcGlVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8IFwiaHR0cHM6Ly9nbWMtbW9iaWxpdHktYXBpLnZlcmNlbC5hcHBcIjtcbiAgICBcbiAgICAvLyBMb2cgUE9JIGNvdW50IGJlaW5nIHNlbnQgKHNhbml0aXplZCBpbiBwcm9kdWN0aW9uKVxuICAgIC8vIEhhbmRsZSBib3RoIHBsYWNlX2tleSAoVmVyYXNldCBQT0lzKSBhbmQgZ2VvX3JhZGl1cyAoR2VvSlNPTiBQT0lzKVxuICAgIGNvbnN0IHBvaXNUb1NlbmQgPSB2ZXJhc2V0Q29uZmlnPy5wbGFjZV9rZXkgfHwgdmVyYXNldENvbmZpZz8uZ2VvX3JhZGl1cyB8fCBib2R5LnBvaXMgfHwgW107XG4gICAgY29uc3QgcG9pQ291bnRUb1NlbmQgPSBBcnJheS5pc0FycmF5KHBvaXNUb1NlbmQpID8gcG9pc1RvU2VuZC5sZW5ndGggOiAwO1xuICAgIGxvZ2dlci5sb2coYEpvYiBDcmVhdGlvbjogJHtuYW1lfWAsIHtcbiAgICAgIHBvaUNvdW50OiBwb2lDb3VudFRvU2VuZCxcbiAgICAgIGV4cGVjdGVkUG9pQ291bnQ6IHBvaUNvdW50IHx8IDAsXG4gICAgICBkYXRlUmFuZ2U6IHtcbiAgICAgICAgZnJvbTogZGF0ZVJhbmdlLmZyb21fZGF0ZSB8fCBkYXRlUmFuZ2UuZnJvbSxcbiAgICAgICAgdG86IGRhdGVSYW5nZS50b19kYXRlIHx8IGRhdGVSYW5nZS50byxcbiAgICAgIH0sXG4gICAgICB0eXBlLFxuICAgICAgc2NoZW1hOiBzY2hlbWEgfHwgJ0JBU0lDJyxcbiAgICB9KTtcbiAgICBcbiAgICBpZiAocG9pQ291bnRUb1NlbmQgIT09IHBvaUNvdW50ICYmIHBvaUNvdW50KSB7XG4gICAgICBsb2dnZXIud2FybihgUE9JIGNvdW50IG1pc21hdGNoOiBzZW5kaW5nICR7cG9pQ291bnRUb1NlbmR9IGJ1dCBleHBlY3RlZCAke3BvaUNvdW50fWApO1xuICAgIH1cbiAgICBcbiAgICBpZiAocG9pQ291bnRUb1NlbmQgPT09IDApIHtcbiAgICAgIGxvZ2dlci5lcnJvcignTm8gUE9JcyB0byBzZW5kISBUaGlzIHdpbGwgY2F1c2UgdGhlIGpvYiB0byBmYWlsLicpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnTm8gUE9JcyBwcm92aWRlZC4gUGxlYXNlIGVuc3VyZSBQT0kgY29sbGVjdGlvbiBpcyB2YWxpZCBhbmQgY29udGFpbnMgUG9pbnQgZ2VvbWV0cmllcy4nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgdmVyYXNldFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICBgJHthcGlVcmx9L2FwaS92ZXJhc2V0L21vdmVtZW50YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh2ZXJhc2V0Q29uZmlnIHx8IHtcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIGRhdGVfcmFuZ2U6IGRhdGVSYW5nZSxcbiAgICAgICAgICBwb2lzOiBib2R5LnBvaXMgfHwgW10sXG4gICAgICAgICAgc2NoZW1hOiBzY2hlbWEgfHwgJ0JBU0lDJyxcbiAgICAgICAgfSksXG4gICAgICB9XG4gICAgKTtcbiAgICBcbiAgICAvLyBMb2cgcmVzcG9uc2UgZm9yIGRlYnVnZ2luZyAoc2FuaXRpemVkIGluIHByb2R1Y3Rpb24pXG4gICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gYXdhaXQgdmVyYXNldFJlc3BvbnNlLnRleHQoKTtcbiAgICBsZXQgdmVyYXNldERhdGE7XG4gICAgdHJ5IHtcbiAgICAgIHZlcmFzZXREYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZVRleHQpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgdmVyYXNldERhdGEgPSB7IHJhdzogcmVzcG9uc2VUZXh0IH07XG4gICAgfVxuICAgIFxuICAgIGlmICghdmVyYXNldFJlc3BvbnNlLm9rKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ1ZlcmFzZXQgQVBJIGVycm9yIHJlc3BvbnNlJywgeyBzdGF0dXM6IHZlcmFzZXRSZXNwb25zZS5zdGF0dXMgfSk7XG4gICAgICBjb25zdCBpc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IFxuICAgICAgICAgIGVycm9yOiAnVmVyYXNldCBBUEkgZmFpbGVkJywgXG4gICAgICAgICAgZGV0YWlsczogaXNQcm9kdWN0aW9uID8gdW5kZWZpbmVkIDogcmVzcG9uc2VUZXh0LnN1YnN0cmluZygwLCA1MDApXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDIgfVxuICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgbG9nZ2VyLmxvZygnVmVyYXNldCBBUEkgc3VjY2VzcycsIHtcbiAgICAgIGpvYklkOiB2ZXJhc2V0RGF0YS5qb2JfaWQgfHwgdmVyYXNldERhdGEuZGF0YT8uam9iX2lkLFxuICAgICAgcHJvY2Vzc2VkUG9pczogdmVyYXNldERhdGEucHJvY2Vzc2VkX3BvaXMsXG4gICAgfSk7XG4gICAgXG4gICAgLy8gTG9nIGFueSB3YXJuaW5ncyBvciBpbmZvIGZyb20gVmVyYXNldCBhYm91dCBQT0kgcHJvY2Vzc2luZ1xuICAgIGlmICh2ZXJhc2V0RGF0YS53YXJuaW5ncyB8fCB2ZXJhc2V0RGF0YS5pbmZvKSB7XG4gICAgICBsb2dnZXIuaW5mbygnVmVyYXNldCBBUEkgaW5mby93YXJuaW5ncycsIHtcbiAgICAgICAgd2FybmluZ3M6IHZlcmFzZXREYXRhLndhcm5pbmdzLFxuICAgICAgICBpbmZvOiB2ZXJhc2V0RGF0YS5pbmZvLFxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIFZlcmFzZXQgcmV0dXJuZWQgYSBkaWZmZXJlbnQgUE9JIGNvdW50IHRoYW4gc2VudFxuICAgIGlmICh2ZXJhc2V0RGF0YS5wcm9jZXNzZWRfcG9pcyAhPT0gdW5kZWZpbmVkICYmIHBvaUNvdW50VG9TZW5kID4gMCkge1xuICAgICAgY29uc3QgcHJvY2Vzc2VkQ291bnQgPSB2ZXJhc2V0RGF0YS5wcm9jZXNzZWRfcG9pcztcbiAgICAgIGlmIChwcm9jZXNzZWRDb3VudCAhPT0gcG9pQ291bnRUb1NlbmQpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oYFZlcmFzZXQgcHJvY2Vzc2VkICR7cHJvY2Vzc2VkQ291bnR9IFBPSXMgb3V0IG9mICR7cG9pQ291bnRUb1NlbmR9IHNlbnRgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY29uc3Qgam9iSWQgPSB2ZXJhc2V0RGF0YS5qb2JfaWQgfHwgdmVyYXNldERhdGEuZGF0YT8uam9iX2lkO1xuXG4gICAgaWYgKCFqb2JJZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnTm8gam9iX2lkIHJldHVybmVkIGZyb20gVmVyYXNldCcsIGRhdGE6IHZlcmFzZXREYXRhIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDIgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyA0LiBTYXZlIGpvYiB0byBTMyAoam9icyBjcmVhdGVkIHRocm91Z2ggYXBwIGFyZSBOT1QgZXh0ZXJuYWwpXG4gICAgLy8gTm9ybWFsaXplIGRhdGVSYW5nZSB0byBhbHdheXMgaGF2ZSBmcm9tIGFuZCB0b1xuICAgIGNvbnN0IG5vcm1hbGl6ZWREYXRlUmFuZ2U6IHsgZnJvbTogc3RyaW5nOyB0bzogc3RyaW5nIH0gPSB7XG4gICAgICBmcm9tOiBkYXRlUmFuZ2UuZnJvbSB8fCBkYXRlUmFuZ2UuZnJvbV9kYXRlIHx8ICcnLFxuICAgICAgdG86IGRhdGVSYW5nZS50byB8fCBkYXRlUmFuZ2UudG9fZGF0ZSB8fCAnJyxcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IGpvYiA9IGF3YWl0IGNyZWF0ZUpvYih7XG4gICAgICBqb2JJZCxcbiAgICAgIG5hbWUsXG4gICAgICB0eXBlLFxuICAgICAgcG9pQ291bnQ6IHBvaUNvdW50IHx8IDAsXG4gICAgICBwb2lDb2xsZWN0aW9uSWQsXG4gICAgICBkYXRlUmFuZ2U6IG5vcm1hbGl6ZWREYXRlUmFuZ2UsXG4gICAgICByYWRpdXM6IHJhZGl1cyB8fCAxMCxcbiAgICAgIHNjaGVtYTogKHNjaGVtYSA9PT0gJ0VOSEFOQ0VEJyA/ICdFTkhBTkNFRCcgOiBzY2hlbWEgPT09ICdGVUxMJyA/ICdGVUxMJyA6ICdCQVNJQycpIGFzICdCQVNJQycgfCAnRlVMTCcgfCAnRU5IQU5DRUQnIHwgJ04vQScsXG4gICAgICBzdGF0dXM6ICdRVUVVRUQnLFxuICAgICAgczNTb3VyY2VQYXRoOiBgczM6Ly92ZXJhc2V0LXByZC1wbGF0Zm9ybS11cy13ZXN0LTIvb3V0cHV0L2dhcnJpdHovJHtqb2JJZH0vYCxcbiAgICAgIGV4dGVybmFsOiBmYWxzZSwgLy8gSm9icyBjcmVhdGVkIHRocm91Z2ggYXBwIGFyZSBub3QgZXh0ZXJuYWxcbiAgICAgIHBvaU1hcHBpbmc6IHBvaU1hcHBpbmcgfHwgdW5kZWZpbmVkLCAvLyBTYXZlIFBPSSBJRCBtYXBwaW5nIGlmIHByb3ZpZGVkXG4gICAgICBwb2lOYW1lczogcG9pTmFtZXMgfHwgdW5kZWZpbmVkLCAvLyBTYXZlIFBPSSBuYW1lcyBmb3IgZGlzcGxheSBpZiBwcm92aWRlZFxuICAgIH0pO1xuXG4gICAgLy8gNS4gSW5jcmVtZW50IHVzYWdlIChhdG9taWMgb3BlcmF0aW9uKSAtIG9ubHkgZm9yIG5vbi1leHRlcm5hbCBqb2JzXG4gICAgaWYgKCFqb2IuZXh0ZXJuYWwpIHtcbiAgICAgIGF3YWl0IGluY3JlbWVudFVzYWdlKGpvYklkKTtcbiAgICB9XG5cbiAgICAvLyA2LiBSZXR1cm4gc3VjY2Vzc1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgam9iLFxuICAgICAgcmVtYWluaW5nOiByZW1haW5pbmcgLSAxLFxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ1BPU1QgL2FwaS9qb2JzIGVycm9yOicsIGVycm9yKTtcbiAgICBjb25zdCBpc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgXG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSBqb2InLCBcbiAgICAgICAgZGV0YWlsczogaXNQcm9kdWN0aW9uID8gdW5kZWZpbmVkIDogc2FuaXRpemVFcnJvcihlcnJvcilcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0QWxsSm9icyIsImNyZWF0ZUpvYiIsImNhbkNyZWF0ZUpvYiIsImluY3JlbWVudFVzYWdlIiwiaW5pdGlhbEpvYnNEYXRhIiwiaW5pdENvbmZpZ0lmTmVlZGVkIiwidmFsaWRhdGVSZXF1ZXN0Qm9keSIsImNyZWF0ZUpvYlNjaGVtYSIsImxvZ2dlciIsInNhbml0aXplRXJyb3IiLCJkeW5hbWljIiwicmV2YWxpZGF0ZSIsIkdFVCIsInJlcXVlc3QiLCJqb2JzRGF0YSIsImpvYnMiLCJqc29uIiwiZXJyb3IiLCJPYmplY3QiLCJ2YWx1ZXMiLCJzZWVkRXJyb3IiLCJpc1Byb2R1Y3Rpb24iLCJwcm9jZXNzIiwiZGV0YWlscyIsInVuZGVmaW5lZCIsInN0YXR1cyIsIlBPU1QiLCJ2YWxpZGF0aW9uIiwic3VjY2VzcyIsImJvZHkiLCJkYXRhIiwiYWxsb3dlZCIsInJlYXNvbiIsInJlbWFpbmluZyIsIm1lc3NhZ2UiLCJuYW1lIiwidHlwZSIsInBvaUNvdW50IiwicG9pQ29sbGVjdGlvbklkIiwiZGF0ZVJhbmdlIiwicmFkaXVzIiwic2NoZW1hIiwidmVyYXNldENvbmZpZyIsInBvaU1hcHBpbmciLCJwb2lOYW1lcyIsImFwaVVybCIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJwb2lzVG9TZW5kIiwicGxhY2Vfa2V5IiwiZ2VvX3JhZGl1cyIsInBvaXMiLCJwb2lDb3VudFRvU2VuZCIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsImxvZyIsImV4cGVjdGVkUG9pQ291bnQiLCJmcm9tIiwiZnJvbV9kYXRlIiwidG8iLCJ0b19kYXRlIiwid2FybiIsInZlcmFzZXRSZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIkpTT04iLCJzdHJpbmdpZnkiLCJkYXRlX3JhbmdlIiwicmVzcG9uc2VUZXh0IiwidGV4dCIsInZlcmFzZXREYXRhIiwicGFyc2UiLCJyYXciLCJvayIsInN1YnN0cmluZyIsImpvYklkIiwiam9iX2lkIiwicHJvY2Vzc2VkUG9pcyIsInByb2Nlc3NlZF9wb2lzIiwid2FybmluZ3MiLCJpbmZvIiwicHJvY2Vzc2VkQ291bnQiLCJub3JtYWxpemVkRGF0ZVJhbmdlIiwiam9iIiwiczNTb3VyY2VQYXRoIiwiZXh0ZXJuYWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/jobs/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/jobs.ts":
/*!*********************!*\
  !*** ./lib/jobs.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createJob: () => (/* binding */ createJob),\n/* harmony export */   getAllJobs: () => (/* binding */ getAllJobs),\n/* harmony export */   getJob: () => (/* binding */ getJob),\n/* harmony export */   markJobSynced: () => (/* binding */ markJobSynced),\n/* harmony export */   updateJob: () => (/* binding */ updateJob),\n/* harmony export */   updateJobStatus: () => (/* binding */ updateJobStatus)\n/* harmony export */ });\n/* harmony import */ var _s3_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./s3-config */ \"(rsc)/./lib/s3-config.ts\");\n\nconst DEFAULT_JOBS = {};\n/**\n * Get all jobs sorted by creation date (newest first)\n */ async function getAllJobs() {\n    const data = await (0,_s3_config__WEBPACK_IMPORTED_MODULE_0__.initConfigIfNeeded)(\"jobs\", DEFAULT_JOBS);\n    return Object.values(data).sort((a, b)=>new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n}\n/**\n * Get a specific job by ID\n */ async function getJob(jobId) {\n    const data = await (0,_s3_config__WEBPACK_IMPORTED_MODULE_0__.initConfigIfNeeded)(\"jobs\", DEFAULT_JOBS);\n    return data[jobId] || null;\n}\n/**\n * Create a new job\n */ async function createJob(job) {\n    const data = await (0,_s3_config__WEBPACK_IMPORTED_MODULE_0__.initConfigIfNeeded)(\"jobs\", DEFAULT_JOBS);\n    const newJob = {\n        ...job,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString()\n    };\n    data[job.jobId] = newJob;\n    try {\n        await (0,_s3_config__WEBPACK_IMPORTED_MODULE_0__.putConfig)(\"jobs\", data);\n        console.log(`✅ Job created: ${job.jobId} - ${job.name}`);\n    } catch (error) {\n        console.error(`❌ Failed to save job ${job.jobId}:`, error);\n        throw error;\n    }\n    return newJob;\n}\n/**\n * Update an existing job\n */ async function updateJob(jobId, updates) {\n    const data = await (0,_s3_config__WEBPACK_IMPORTED_MODULE_0__.initConfigIfNeeded)(\"jobs\", DEFAULT_JOBS);\n    if (!data[jobId]) {\n        console.error(`❌ Job not found: ${jobId}`);\n        return null;\n    }\n    data[jobId] = {\n        ...data[jobId],\n        ...updates,\n        updatedAt: new Date().toISOString()\n    };\n    try {\n        await (0,_s3_config__WEBPACK_IMPORTED_MODULE_0__.putConfig)(\"jobs\", data);\n        console.log(`✅ Job updated: ${jobId}`);\n    } catch (error) {\n        console.error(`❌ Failed to update job ${jobId}:`, error);\n        throw error;\n    }\n    return data[jobId];\n}\n/**\n * Update job status\n */ async function updateJobStatus(jobId, status, errorMessage) {\n    return updateJob(jobId, {\n        status,\n        errorMessage\n    });\n}\n/**\n * Mark job as synced with S3 details\n */ async function markJobSynced(jobId, s3DestPath, objectCount, totalBytes) {\n    return updateJob(jobId, {\n        s3DestPath,\n        objectCount,\n        totalBytes,\n        syncedAt: new Date().toISOString()\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvam9icy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXVFO0FBNEJ2RSxNQUFNRSxlQUF5QixDQUFDO0FBRWhDOztDQUVDLEdBQ00sZUFBZUM7SUFDcEIsTUFBTUMsT0FBTyxNQUFNSCw4REFBa0JBLENBQVcsUUFBUUM7SUFDeEQsT0FBT0csT0FBT0MsTUFBTSxDQUFDRixNQUFNRyxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFDbEMsSUFBSUMsS0FBS0QsRUFBRUUsU0FBUyxFQUFFQyxPQUFPLEtBQUssSUFBSUYsS0FBS0YsRUFBRUcsU0FBUyxFQUFFQyxPQUFPO0FBRW5FO0FBRUE7O0NBRUMsR0FDTSxlQUFlQyxPQUFPQyxLQUFhO0lBQ3hDLE1BQU1WLE9BQU8sTUFBTUgsOERBQWtCQSxDQUFXLFFBQVFDO0lBQ3hELE9BQU9FLElBQUksQ0FBQ1UsTUFBTSxJQUFJO0FBQ3hCO0FBRUE7O0NBRUMsR0FDTSxlQUFlQyxVQUFVQyxHQUF5QztJQUN2RSxNQUFNWixPQUFPLE1BQU1ILDhEQUFrQkEsQ0FBVyxRQUFRQztJQUV4RCxNQUFNZSxTQUFjO1FBQ2xCLEdBQUdELEdBQUc7UUFDTkwsV0FBVyxJQUFJRCxPQUFPUSxXQUFXO1FBQ2pDQyxXQUFXLElBQUlULE9BQU9RLFdBQVc7SUFDbkM7SUFFQWQsSUFBSSxDQUFDWSxJQUFJRixLQUFLLENBQUMsR0FBR0c7SUFFbEIsSUFBSTtRQUNGLE1BQU1qQixxREFBU0EsQ0FBQyxRQUFRSTtRQUN4QmdCLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGVBQWUsRUFBRUwsSUFBSUYsS0FBSyxDQUFDLEdBQUcsRUFBRUUsSUFBSU0sSUFBSSxDQUFDLENBQUM7SUFDekQsRUFBRSxPQUFPQyxPQUFPO1FBQ2RILFFBQVFHLEtBQUssQ0FBQyxDQUFDLHFCQUFxQixFQUFFUCxJQUFJRixLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUVTO1FBQ3BELE1BQU1BO0lBQ1I7SUFFQSxPQUFPTjtBQUNUO0FBRUE7O0NBRUMsR0FDTSxlQUFlTyxVQUFVVixLQUFhLEVBQUVXLE9BQXFCO0lBQ2xFLE1BQU1yQixPQUFPLE1BQU1ILDhEQUFrQkEsQ0FBVyxRQUFRQztJQUV4RCxJQUFJLENBQUNFLElBQUksQ0FBQ1UsTUFBTSxFQUFFO1FBQ2hCTSxRQUFRRyxLQUFLLENBQUMsQ0FBQyxpQkFBaUIsRUFBRVQsTUFBTSxDQUFDO1FBQ3pDLE9BQU87SUFDVDtJQUVBVixJQUFJLENBQUNVLE1BQU0sR0FBRztRQUNaLEdBQUdWLElBQUksQ0FBQ1UsTUFBTTtRQUNkLEdBQUdXLE9BQU87UUFDVk4sV0FBVyxJQUFJVCxPQUFPUSxXQUFXO0lBQ25DO0lBRUEsSUFBSTtRQUNGLE1BQU1sQixxREFBU0EsQ0FBQyxRQUFRSTtRQUN4QmdCLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGVBQWUsRUFBRVAsTUFBTSxDQUFDO0lBQ3ZDLEVBQUUsT0FBT1MsT0FBTztRQUNkSCxRQUFRRyxLQUFLLENBQUMsQ0FBQyx1QkFBdUIsRUFBRVQsTUFBTSxDQUFDLENBQUMsRUFBRVM7UUFDbEQsTUFBTUE7SUFDUjtJQUVBLE9BQU9uQixJQUFJLENBQUNVLE1BQU07QUFDcEI7QUFFQTs7Q0FFQyxHQUNNLGVBQWVZLGdCQUNwQlosS0FBYSxFQUNiYSxNQUFxQixFQUNyQkMsWUFBcUI7SUFFckIsT0FBT0osVUFBVVYsT0FBTztRQUFFYTtRQUFRQztJQUFhO0FBQ2pEO0FBRUE7O0NBRUMsR0FDTSxlQUFlQyxjQUNwQmYsS0FBYSxFQUNiZ0IsVUFBa0IsRUFDbEJDLFdBQW1CLEVBQ25CQyxVQUFrQjtJQUVsQixPQUFPUixVQUFVVixPQUFPO1FBQ3RCZ0I7UUFDQUM7UUFDQUM7UUFDQUMsVUFBVSxJQUFJdkIsT0FBT1EsV0FBVztJQUNsQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ21jLXZlcmFzZXQtYXBpLy4vbGliL2pvYnMudHM/NzhiYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRDb25maWcsIHB1dENvbmZpZywgaW5pdENvbmZpZ0lmTmVlZGVkIH0gZnJvbSAnLi9zMy1jb25maWcnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEpvYiB7XG4gIGpvYklkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdHlwZTogJ3BpbmdzJyB8ICdhZ2dyZWdhdGUnIHwgJ2RldmljZXMnIHwgJ2NvaG9ydCc7XG4gIHBvaUNvdW50OiBudW1iZXI7XG4gIHBvaUNvbGxlY3Rpb25JZD86IHN0cmluZztcbiAgZGF0ZVJhbmdlOiB7IGZyb206IHN0cmluZzsgdG86IHN0cmluZyB9O1xuICByYWRpdXM6IG51bWJlcjtcbiAgc2NoZW1hOiAnQkFTSUMnIHwgJ0ZVTEwnIHwgJ0VOSEFOQ0VEJyB8ICdOL0EnO1xuICBzdGF0dXM6ICdRVUVVRUQnIHwgJ1JVTk5JTkcnIHwgJ1NVQ0NFU1MnIHwgJ0ZBSUxFRCcgfCAnU0NIRURVTEVEJztcbiAgczNTb3VyY2VQYXRoPzogc3RyaW5nO1xuICBzM0Rlc3RQYXRoPzogc3RyaW5nIHwgbnVsbDtcbiAgb2JqZWN0Q291bnQ/OiBudW1iZXI7XG4gIHRvdGFsQnl0ZXM/OiBudW1iZXI7XG4gIHN5bmNlZEF0Pzogc3RyaW5nIHwgbnVsbDtcbiAgZXJyb3JNZXNzYWdlPzogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IHN0cmluZztcbiAgdXBkYXRlZEF0Pzogc3RyaW5nO1xuICBzdW1tYXJ5TWV0cmljcz86IHN0cmluZztcbiAgZXh0ZXJuYWw/OiBib29sZWFuOyAvLyB0cnVlID0gY3JlYXRlZCBvdXRzaWRlIGFwcCwgZG9lc24ndCBjb3VudCB0b3dhcmQgcXVvdGFcbiAgcG9pTWFwcGluZz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47IC8vIE1hcHMgVmVyYXNldCBQT0kgSURzIChnZW9fcmFkaXVzX1gpIHRvIG9yaWdpbmFsIEdlb0pTT04gSURzXG4gIHBvaU5hbWVzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjsgLy8gTWFwcyBWZXJhc2V0IFBPSSBJRHMgKGdlb19yYWRpdXNfWCkgdG8gaHVtYW4tcmVhZGFibGUgbmFtZXMgZnJvbSBHZW9KU09OIHByb3BlcnRpZXMubmFtZVxufVxuXG50eXBlIEpvYnNEYXRhID0gUmVjb3JkPHN0cmluZywgSm9iPjtcblxuY29uc3QgREVGQVVMVF9KT0JTOiBKb2JzRGF0YSA9IHt9O1xuXG4vKipcbiAqIEdldCBhbGwgam9icyBzb3J0ZWQgYnkgY3JlYXRpb24gZGF0ZSAobmV3ZXN0IGZpcnN0KVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsSm9icygpOiBQcm9taXNlPEpvYltdPiB7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBpbml0Q29uZmlnSWZOZWVkZWQ8Sm9ic0RhdGE+KCdqb2JzJywgREVGQVVMVF9KT0JTKTtcbiAgcmV0dXJuIE9iamVjdC52YWx1ZXMoZGF0YSkuc29ydCgoYSwgYikgPT4gXG4gICAgbmV3IERhdGUoYi5jcmVhdGVkQXQpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEuY3JlYXRlZEF0KS5nZXRUaW1lKClcbiAgKTtcbn1cblxuLyoqXG4gKiBHZXQgYSBzcGVjaWZpYyBqb2IgYnkgSURcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEpvYihqb2JJZDogc3RyaW5nKTogUHJvbWlzZTxKb2IgfCBudWxsPiB7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBpbml0Q29uZmlnSWZOZWVkZWQ8Sm9ic0RhdGE+KCdqb2JzJywgREVGQVVMVF9KT0JTKTtcbiAgcmV0dXJuIGRhdGFbam9iSWRdIHx8IG51bGw7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGpvYlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlSm9iKGpvYjogT21pdDxKb2IsICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+KTogUHJvbWlzZTxKb2I+IHtcbiAgY29uc3QgZGF0YSA9IGF3YWl0IGluaXRDb25maWdJZk5lZWRlZDxKb2JzRGF0YT4oJ2pvYnMnLCBERUZBVUxUX0pPQlMpO1xuICBcbiAgY29uc3QgbmV3Sm9iOiBKb2IgPSB7XG4gICAgLi4uam9iLFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICB9O1xuICBcbiAgZGF0YVtqb2Iuam9iSWRdID0gbmV3Sm9iO1xuICBcbiAgdHJ5IHtcbiAgICBhd2FpdCBwdXRDb25maWcoJ2pvYnMnLCBkYXRhKTtcbiAgICBjb25zb2xlLmxvZyhg4pyFIEpvYiBjcmVhdGVkOiAke2pvYi5qb2JJZH0gLSAke2pvYi5uYW1lfWApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBGYWlsZWQgdG8gc2F2ZSBqb2IgJHtqb2Iuam9iSWR9OmAsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICBcbiAgcmV0dXJuIG5ld0pvYjtcbn1cblxuLyoqXG4gKiBVcGRhdGUgYW4gZXhpc3Rpbmcgam9iXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVKb2Ioam9iSWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxKb2I+KTogUHJvbWlzZTxKb2IgfCBudWxsPiB7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBpbml0Q29uZmlnSWZOZWVkZWQ8Sm9ic0RhdGE+KCdqb2JzJywgREVGQVVMVF9KT0JTKTtcbiAgXG4gIGlmICghZGF0YVtqb2JJZF0pIHtcbiAgICBjb25zb2xlLmVycm9yKGDinYwgSm9iIG5vdCBmb3VuZDogJHtqb2JJZH1gKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBcbiAgZGF0YVtqb2JJZF0gPSB7XG4gICAgLi4uZGF0YVtqb2JJZF0sXG4gICAgLi4udXBkYXRlcyxcbiAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgfTtcbiAgXG4gIHRyeSB7XG4gICAgYXdhaXQgcHV0Q29uZmlnKCdqb2JzJywgZGF0YSk7XG4gICAgY29uc29sZS5sb2coYOKchSBKb2IgdXBkYXRlZDogJHtqb2JJZH1gKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIHVwZGF0ZSBqb2IgJHtqb2JJZH06YCwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIFxuICByZXR1cm4gZGF0YVtqb2JJZF07XG59XG5cbi8qKlxuICogVXBkYXRlIGpvYiBzdGF0dXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUpvYlN0YXR1cyhcbiAgam9iSWQ6IHN0cmluZyxcbiAgc3RhdHVzOiBKb2JbJ3N0YXR1cyddLFxuICBlcnJvck1lc3NhZ2U/OiBzdHJpbmdcbik6IFByb21pc2U8Sm9iIHwgbnVsbD4ge1xuICByZXR1cm4gdXBkYXRlSm9iKGpvYklkLCB7IHN0YXR1cywgZXJyb3JNZXNzYWdlIH0pO1xufVxuXG4vKipcbiAqIE1hcmsgam9iIGFzIHN5bmNlZCB3aXRoIFMzIGRldGFpbHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1hcmtKb2JTeW5jZWQoXG4gIGpvYklkOiBzdHJpbmcsXG4gIHMzRGVzdFBhdGg6IHN0cmluZyxcbiAgb2JqZWN0Q291bnQ6IG51bWJlcixcbiAgdG90YWxCeXRlczogbnVtYmVyXG4pOiBQcm9taXNlPEpvYiB8IG51bGw+IHtcbiAgcmV0dXJuIHVwZGF0ZUpvYihqb2JJZCwge1xuICAgIHMzRGVzdFBhdGgsXG4gICAgb2JqZWN0Q291bnQsXG4gICAgdG90YWxCeXRlcyxcbiAgICBzeW5jZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJwdXRDb25maWciLCJpbml0Q29uZmlnSWZOZWVkZWQiLCJERUZBVUxUX0pPQlMiLCJnZXRBbGxKb2JzIiwiZGF0YSIsIk9iamVjdCIsInZhbHVlcyIsInNvcnQiLCJhIiwiYiIsIkRhdGUiLCJjcmVhdGVkQXQiLCJnZXRUaW1lIiwiZ2V0Sm9iIiwiam9iSWQiLCJjcmVhdGVKb2IiLCJqb2IiLCJuZXdKb2IiLCJ0b0lTT1N0cmluZyIsInVwZGF0ZWRBdCIsImNvbnNvbGUiLCJsb2ciLCJuYW1lIiwiZXJyb3IiLCJ1cGRhdGVKb2IiLCJ1cGRhdGVzIiwidXBkYXRlSm9iU3RhdHVzIiwic3RhdHVzIiwiZXJyb3JNZXNzYWdlIiwibWFya0pvYlN5bmNlZCIsInMzRGVzdFBhdGgiLCJvYmplY3RDb3VudCIsInRvdGFsQnl0ZXMiLCJzeW5jZWRBdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/jobs.ts\n");

/***/ }),

/***/ "(rsc)/./lib/logger.ts":
/*!***********************!*\
  !*** ./lib/logger.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n/**\n * Secure logging utilities\n * Prevents sensitive information from being logged in production\n */ const isProduction = \"development\" === \"production\";\n/**\n * Sanitize data before logging\n */ function sanitizeForLogging(data) {\n    if (typeof data !== \"object\" || data === null) {\n        return data;\n    }\n    if (Array.isArray(data)) {\n        return data.map(sanitizeForLogging);\n    }\n    const sensitiveKeys = [\n        \"password\",\n        \"secret\",\n        \"token\",\n        \"key\",\n        \"auth\",\n        \"credential\",\n        \"api_key\",\n        \"access_key\",\n        \"secret_key\"\n    ];\n    const sanitized = {};\n    for (const [key, value] of Object.entries(data)){\n        const lowerKey = key.toLowerCase();\n        const isSensitive = sensitiveKeys.some((sk)=>lowerKey.includes(sk));\n        if (isSensitive && isProduction) {\n            sanitized[key] = \"[REDACTED]\";\n        } else if (typeof value === \"object\" && value !== null) {\n            sanitized[key] = sanitizeForLogging(value);\n        } else {\n            sanitized[key] = value;\n        }\n    }\n    return sanitized;\n}\n/**\n * Safe logger that redacts sensitive information in production\n */ const logger = {\n    log: (...args)=>{\n        if (!isProduction) {\n            console.log(...args);\n        } else {\n            // In production, sanitize logs\n            const sanitized = args.map(sanitizeForLogging);\n            console.log(...sanitized);\n        }\n    },\n    error: (message, error)=>{\n        if (!isProduction) {\n            console.error(message, error);\n        } else {\n            // In production, only log error messages, not full error objects\n            const sanitizedError = error instanceof Error ? {\n                message: error.message,\n                name: error.name\n            } : sanitizeForLogging(error);\n            console.error(message, sanitizedError);\n        }\n    },\n    warn: (...args)=>{\n        if (!isProduction) {\n            console.warn(...args);\n        } else {\n            const sanitized = args.map(sanitizeForLogging);\n            console.warn(...sanitized);\n        }\n    },\n    info: (...args)=>{\n        if (!isProduction) {\n            console.info(...args);\n        } else {\n            const sanitized = args.map(sanitizeForLogging);\n            console.info(...sanitized);\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbG9nZ2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7O0NBR0MsR0FFRCxNQUFNQSxlQUFlQyxrQkFBeUI7QUFFOUM7O0NBRUMsR0FDRCxTQUFTQyxtQkFBbUJDLElBQWE7SUFDdkMsSUFBSSxPQUFPQSxTQUFTLFlBQVlBLFNBQVMsTUFBTTtRQUM3QyxPQUFPQTtJQUNUO0lBRUEsSUFBSUMsTUFBTUMsT0FBTyxDQUFDRixPQUFPO1FBQ3ZCLE9BQU9BLEtBQUtHLEdBQUcsQ0FBQ0o7SUFDbEI7SUFFQSxNQUFNSyxnQkFBZ0I7UUFDcEI7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO0tBQ0Q7SUFFRCxNQUFNQyxZQUFxQyxDQUFDO0lBRTVDLEtBQUssTUFBTSxDQUFDQyxLQUFLQyxNQUFNLElBQUlDLE9BQU9DLE9BQU8sQ0FBQ1QsTUFBTztRQUMvQyxNQUFNVSxXQUFXSixJQUFJSyxXQUFXO1FBQ2hDLE1BQU1DLGNBQWNSLGNBQWNTLElBQUksQ0FBQ0MsQ0FBQUEsS0FBTUosU0FBU0ssUUFBUSxDQUFDRDtRQUUvRCxJQUFJRixlQUFlZixjQUFjO1lBQy9CUSxTQUFTLENBQUNDLElBQUksR0FBRztRQUNuQixPQUFPLElBQUksT0FBT0MsVUFBVSxZQUFZQSxVQUFVLE1BQU07WUFDdERGLFNBQVMsQ0FBQ0MsSUFBSSxHQUFHUCxtQkFBbUJRO1FBQ3RDLE9BQU87WUFDTEYsU0FBUyxDQUFDQyxJQUFJLEdBQUdDO1FBQ25CO0lBQ0Y7SUFFQSxPQUFPRjtBQUNUO0FBRUE7O0NBRUMsR0FDTSxNQUFNVyxTQUFTO0lBQ3BCQyxLQUFLLENBQUMsR0FBR0M7UUFDUCxJQUFJLENBQUNyQixjQUFjO1lBQ2pCc0IsUUFBUUYsR0FBRyxJQUFJQztRQUNqQixPQUFPO1lBQ0wsK0JBQStCO1lBQy9CLE1BQU1iLFlBQVlhLEtBQUtmLEdBQUcsQ0FBQ0o7WUFDM0JvQixRQUFRRixHQUFHLElBQUlaO1FBQ2pCO0lBQ0Y7SUFFQWUsT0FBTyxDQUFDQyxTQUFpQkQ7UUFDdkIsSUFBSSxDQUFDdkIsY0FBYztZQUNqQnNCLFFBQVFDLEtBQUssQ0FBQ0MsU0FBU0Q7UUFDekIsT0FBTztZQUNMLGlFQUFpRTtZQUNqRSxNQUFNRSxpQkFBaUJGLGlCQUFpQkcsUUFDcEM7Z0JBQUVGLFNBQVNELE1BQU1DLE9BQU87Z0JBQUVHLE1BQU1KLE1BQU1JLElBQUk7WUFBQyxJQUMzQ3pCLG1CQUFtQnFCO1lBQ3ZCRCxRQUFRQyxLQUFLLENBQUNDLFNBQVNDO1FBQ3pCO0lBQ0Y7SUFFQUcsTUFBTSxDQUFDLEdBQUdQO1FBQ1IsSUFBSSxDQUFDckIsY0FBYztZQUNqQnNCLFFBQVFNLElBQUksSUFBSVA7UUFDbEIsT0FBTztZQUNMLE1BQU1iLFlBQVlhLEtBQUtmLEdBQUcsQ0FBQ0o7WUFDM0JvQixRQUFRTSxJQUFJLElBQUlwQjtRQUNsQjtJQUNGO0lBRUFxQixNQUFNLENBQUMsR0FBR1I7UUFDUixJQUFJLENBQUNyQixjQUFjO1lBQ2pCc0IsUUFBUU8sSUFBSSxJQUFJUjtRQUNsQixPQUFPO1lBQ0wsTUFBTWIsWUFBWWEsS0FBS2YsR0FBRyxDQUFDSjtZQUMzQm9CLFFBQVFPLElBQUksSUFBSXJCO1FBQ2xCO0lBQ0Y7QUFDRixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ21jLXZlcmFzZXQtYXBpLy4vbGliL2xvZ2dlci50cz9mZDVkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2VjdXJlIGxvZ2dpbmcgdXRpbGl0aWVzXG4gKiBQcmV2ZW50cyBzZW5zaXRpdmUgaW5mb3JtYXRpb24gZnJvbSBiZWluZyBsb2dnZWQgaW4gcHJvZHVjdGlvblxuICovXG5cbmNvbnN0IGlzUHJvZHVjdGlvbiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbidcblxuLyoqXG4gKiBTYW5pdGl6ZSBkYXRhIGJlZm9yZSBsb2dnaW5nXG4gKi9cbmZ1bmN0aW9uIHNhbml0aXplRm9yTG9nZ2luZyhkYXRhOiB1bmtub3duKTogdW5rbm93biB7XG4gIGlmICh0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcgfHwgZGF0YSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBkYXRhXG4gIH1cbiAgXG4gIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgcmV0dXJuIGRhdGEubWFwKHNhbml0aXplRm9yTG9nZ2luZylcbiAgfVxuICBcbiAgY29uc3Qgc2Vuc2l0aXZlS2V5cyA9IFtcbiAgICAncGFzc3dvcmQnLFxuICAgICdzZWNyZXQnLFxuICAgICd0b2tlbicsXG4gICAgJ2tleScsXG4gICAgJ2F1dGgnLFxuICAgICdjcmVkZW50aWFsJyxcbiAgICAnYXBpX2tleScsXG4gICAgJ2FjY2Vzc19rZXknLFxuICAgICdzZWNyZXRfa2V5JyxcbiAgXVxuICBcbiAgY29uc3Qgc2FuaXRpemVkOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHt9XG4gIFxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkge1xuICAgIGNvbnN0IGxvd2VyS2V5ID0ga2V5LnRvTG93ZXJDYXNlKClcbiAgICBjb25zdCBpc1NlbnNpdGl2ZSA9IHNlbnNpdGl2ZUtleXMuc29tZShzayA9PiBsb3dlcktleS5pbmNsdWRlcyhzaykpXG4gICAgXG4gICAgaWYgKGlzU2Vuc2l0aXZlICYmIGlzUHJvZHVjdGlvbikge1xuICAgICAgc2FuaXRpemVkW2tleV0gPSAnW1JFREFDVEVEXSdcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgIHNhbml0aXplZFtrZXldID0gc2FuaXRpemVGb3JMb2dnaW5nKHZhbHVlKVxuICAgIH0gZWxzZSB7XG4gICAgICBzYW5pdGl6ZWRba2V5XSA9IHZhbHVlXG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gc2FuaXRpemVkXG59XG5cbi8qKlxuICogU2FmZSBsb2dnZXIgdGhhdCByZWRhY3RzIHNlbnNpdGl2ZSBpbmZvcm1hdGlvbiBpbiBwcm9kdWN0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBsb2dnZXIgPSB7XG4gIGxvZzogKC4uLmFyZ3M6IHVua25vd25bXSkgPT4ge1xuICAgIGlmICghaXNQcm9kdWN0aW9uKSB7XG4gICAgICBjb25zb2xlLmxvZyguLi5hcmdzKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJbiBwcm9kdWN0aW9uLCBzYW5pdGl6ZSBsb2dzXG4gICAgICBjb25zdCBzYW5pdGl6ZWQgPSBhcmdzLm1hcChzYW5pdGl6ZUZvckxvZ2dpbmcpXG4gICAgICBjb25zb2xlLmxvZyguLi5zYW5pdGl6ZWQpXG4gICAgfVxuICB9LFxuICBcbiAgZXJyb3I6IChtZXNzYWdlOiBzdHJpbmcsIGVycm9yPzogdW5rbm93bikgPT4ge1xuICAgIGlmICghaXNQcm9kdWN0aW9uKSB7XG4gICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UsIGVycm9yKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJbiBwcm9kdWN0aW9uLCBvbmx5IGxvZyBlcnJvciBtZXNzYWdlcywgbm90IGZ1bGwgZXJyb3Igb2JqZWN0c1xuICAgICAgY29uc3Qgc2FuaXRpemVkRXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yIFxuICAgICAgICA/IHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwgbmFtZTogZXJyb3IubmFtZSB9XG4gICAgICAgIDogc2FuaXRpemVGb3JMb2dnaW5nKGVycm9yKVxuICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlLCBzYW5pdGl6ZWRFcnJvcilcbiAgICB9XG4gIH0sXG4gIFxuICB3YXJuOiAoLi4uYXJnczogdW5rbm93bltdKSA9PiB7XG4gICAgaWYgKCFpc1Byb2R1Y3Rpb24pIHtcbiAgICAgIGNvbnNvbGUud2FybiguLi5hcmdzKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzYW5pdGl6ZWQgPSBhcmdzLm1hcChzYW5pdGl6ZUZvckxvZ2dpbmcpXG4gICAgICBjb25zb2xlLndhcm4oLi4uc2FuaXRpemVkKVxuICAgIH1cbiAgfSxcbiAgXG4gIGluZm86ICguLi5hcmdzOiB1bmtub3duW10pID0+IHtcbiAgICBpZiAoIWlzUHJvZHVjdGlvbikge1xuICAgICAgY29uc29sZS5pbmZvKC4uLmFyZ3MpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNhbml0aXplZCA9IGFyZ3MubWFwKHNhbml0aXplRm9yTG9nZ2luZylcbiAgICAgIGNvbnNvbGUuaW5mbyguLi5zYW5pdGl6ZWQpXG4gICAgfVxuICB9LFxufVxuIl0sIm5hbWVzIjpbImlzUHJvZHVjdGlvbiIsInByb2Nlc3MiLCJzYW5pdGl6ZUZvckxvZ2dpbmciLCJkYXRhIiwiQXJyYXkiLCJpc0FycmF5IiwibWFwIiwic2Vuc2l0aXZlS2V5cyIsInNhbml0aXplZCIsImtleSIsInZhbHVlIiwiT2JqZWN0IiwiZW50cmllcyIsImxvd2VyS2V5IiwidG9Mb3dlckNhc2UiLCJpc1NlbnNpdGl2ZSIsInNvbWUiLCJzayIsImluY2x1ZGVzIiwibG9nZ2VyIiwibG9nIiwiYXJncyIsImNvbnNvbGUiLCJlcnJvciIsIm1lc3NhZ2UiLCJzYW5pdGl6ZWRFcnJvciIsIkVycm9yIiwibmFtZSIsIndhcm4iLCJpbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/logger.ts\n");

/***/ }),

/***/ "(rsc)/./lib/s3-config.ts":
/*!**************************!*\
  !*** ./lib/s3-config.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BUCKET: () => (/* binding */ BUCKET),\n/* harmony export */   configExists: () => (/* binding */ configExists),\n/* harmony export */   getConfig: () => (/* binding */ getConfig),\n/* harmony export */   getPOICollection: () => (/* binding */ getPOICollection),\n/* harmony export */   initConfigIfNeeded: () => (/* binding */ initConfigIfNeeded),\n/* harmony export */   listObjects: () => (/* binding */ listObjects),\n/* harmony export */   putConfig: () => (/* binding */ putConfig),\n/* harmony export */   putPOICollection: () => (/* binding */ putPOICollection),\n/* harmony export */   s3Client: () => (/* binding */ s3Client),\n/* harmony export */   updateConfig: () => (/* binding */ updateConfig)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/client-s3 */ \"@aws-sdk/client-s3\");\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst s3Client = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.S3Client({\n    region: process.env.AWS_REGION || \"us-west-2\",\n    credentials: {\n        accessKeyId: process.env.AWS_ACCESS_KEY_ID || \"\",\n        secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY || \"\"\n    }\n});\nconst BUCKET = process.env.S3_BUCKET || \"garritz-veraset-data-us-west-2\";\n/**\n * Check if config file exists in S3\n */ async function configExists(key) {\n    try {\n        if (!process.env.AWS_ACCESS_KEY_ID || !process.env.AWS_SECRET_ACCESS_KEY) {\n            return false;\n        }\n        await s3Client.send(new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.HeadObjectCommand({\n            Bucket: BUCKET,\n            Key: `config/${key}.json`\n        }));\n        return true;\n    } catch (error) {\n        if (error.name === \"NoSuchKey\" || error.$metadata?.httpStatusCode === 404) {\n            return false;\n        }\n        // Other errors (permissions, network) - assume doesn't exist\n        return false;\n    }\n}\n/**\n * Read a JSON config file from S3 with proper error handling\n */ async function getConfig(key) {\n    try {\n        // Check if AWS credentials are configured\n        if (!process.env.AWS_ACCESS_KEY_ID || !process.env.AWS_SECRET_ACCESS_KEY) {\n            console.warn(`AWS credentials not configured. Returning null for config/${key}.json`);\n            return null;\n        }\n        const command = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.GetObjectCommand({\n            Bucket: BUCKET,\n            Key: `config/${key}.json`\n        });\n        const response = await s3Client.send(command);\n        const body = await response.Body?.transformToString();\n        if (!body) {\n            return null;\n        }\n        return JSON.parse(body);\n    } catch (error) {\n        // File doesn't exist\n        if (error.name === \"NoSuchKey\" || error.$metadata?.httpStatusCode === 404) {\n            console.warn(`Config file not found: config/${key}.json`);\n            return null;\n        }\n        // Don't throw errors in development - just log and return null\n        if (true) {\n            console.warn(`Error reading config/${key}.json:`, error.message || error);\n            return null;\n        }\n        console.error(`Error reading config/${key}.json:`, error);\n        throw error;\n    }\n}\n/**\n * Write a JSON config file to S3 with validation\n */ async function putConfig(key, data) {\n    try {\n        if (!process.env.AWS_ACCESS_KEY_ID || !process.env.AWS_SECRET_ACCESS_KEY) {\n            throw new Error(\"AWS credentials not configured\");\n        }\n        const json = JSON.stringify(data, null, 2);\n        // Validate JSON before saving\n        JSON.parse(json);\n        const command = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.PutObjectCommand({\n            Bucket: BUCKET,\n            Key: `config/${key}.json`,\n            Body: json,\n            ContentType: \"application/json\"\n        });\n        await s3Client.send(command);\n        console.log(`✅ Saved config/${key}.json`);\n    } catch (error) {\n        console.error(`❌ Error saving config/${key}.json:`, error.message || error);\n        throw error;\n    }\n}\n/**\n * Initialize config file if it doesn't exist\n */ async function initConfigIfNeeded(key, defaultData) {\n    const exists = await configExists(key);\n    if (!exists) {\n        console.log(`📝 Initializing config/${key}.json with defaults`);\n        try {\n            await putConfig(key, defaultData);\n            return defaultData;\n        } catch (error) {\n            console.warn(`Could not initialize config/${key}.json, using in-memory default`);\n            return defaultData;\n        }\n    }\n    const existing = await getConfig(key);\n    return existing || defaultData;\n}\n/**\n * Update a JSON config file (read, modify, write)\n */ async function updateConfig(key, updater) {\n    const existing = await getConfig(key);\n    const updated = updater(existing);\n    await putConfig(key, updated);\n    return updated;\n}\n/**\n * List all objects in a prefix\n */ async function listObjects(prefix) {\n    try {\n        if (!process.env.AWS_ACCESS_KEY_ID || !process.env.AWS_SECRET_ACCESS_KEY) {\n            return [];\n        }\n        const { ListObjectsV2Command } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! @aws-sdk/client-s3 */ \"@aws-sdk/client-s3\", 23));\n        const command = new ListObjectsV2Command({\n            Bucket: BUCKET,\n            Prefix: prefix\n        });\n        const response = await s3Client.send(command);\n        return (response.Contents || []).map((obj)=>obj.Key || \"\").filter(Boolean);\n    } catch (error) {\n        console.warn(`Error listing objects with prefix ${prefix}:`, error);\n        return [];\n    }\n}\n/**\n * Get POI collection GeoJSON from S3, with fallback to local files\n */ async function getPOICollection(collectionId) {\n    try {\n        // Get collection metadata to find the correct GeoJSON path\n        const collections = await getConfig(\"poi-collections\") || {};\n        const collection = collections[collectionId];\n        // Use geojsonPath from collection metadata if available, otherwise construct from ID\n        const geojsonKey = collection?.geojsonPath || `pois/${collectionId}.geojson`;\n        // Try S3 first if credentials are configured and collection exists in config\n        if (collection && process.env.AWS_ACCESS_KEY_ID && process.env.AWS_SECRET_ACCESS_KEY) {\n            try {\n                const command = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.GetObjectCommand({\n                    Bucket: BUCKET,\n                    Key: geojsonKey\n                });\n                const response = await s3Client.send(command);\n                const body = await response.Body?.transformToString();\n                if (body) {\n                    return JSON.parse(body);\n                }\n            } catch (s3Error) {\n                if (s3Error.name !== \"NoSuchKey\" && s3Error.$metadata?.httpStatusCode !== 404) {\n                    console.warn(`S3 error for ${geojsonKey}, trying local fallback:`, s3Error.message);\n                }\n            // Fall through to local file check\n            }\n        }\n        // Fallback: Try to read from local POIs directory\n        // Map collection IDs to local file names (with underscores)\n        const localFileMap = {\n            \"spain-ecigarette-combined\": \"spain_ecigarette_combined.geojson\",\n            \"spain-tobacco-combined\": \"spain_tobacco_combined.geojson\",\n            \"spain-nicotine-full\": \"overture_spain_nicotine_clean.geojson\"\n        };\n        const localFileName = localFileMap[collectionId] || `${collectionId.replace(/-/g, \"_\")}.geojson`;\n        const localPath = path__WEBPACK_IMPORTED_MODULE_2__.join(process.cwd(), \"POIs\", localFileName);\n        if (fs__WEBPACK_IMPORTED_MODULE_1__.existsSync(localPath)) {\n            console.log(`📁 Using local GeoJSON file: ${localPath}`);\n            const fileContent = fs__WEBPACK_IMPORTED_MODULE_1__.readFileSync(localPath, \"utf-8\");\n            return JSON.parse(fileContent);\n        }\n        if (!collection) {\n            console.warn(`POI collection ${collectionId} not found in config and no local file found`);\n        } else {\n            console.warn(`GeoJSON file not found in S3 or locally for collection ${collectionId}`);\n        }\n        return null;\n    } catch (error) {\n        console.error(`Error reading GeoJSON for collection ${collectionId}:`, error);\n        throw error;\n    }\n}\n/**\n * Save POI collection GeoJSON to S3\n */ async function putPOICollection(collectionId, geojson) {\n    if (!process.env.AWS_ACCESS_KEY_ID || !process.env.AWS_SECRET_ACCESS_KEY) {\n        throw new Error(\"AWS credentials not configured\");\n    }\n    const command = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.PutObjectCommand({\n        Bucket: BUCKET,\n        Key: `pois/${collectionId}.geojson`,\n        Body: JSON.stringify(geojson, null, 2),\n        ContentType: \"application/json\"\n    });\n    await s3Client.send(command);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxFQUFFdkM7UUFDdkUsTUFBTUE7SUFDUjtBQUNGO0FBRUE7O0NBRUMsR0FDTSxlQUFlc0QsaUJBQWlCZixZQUFvQixFQUFFZ0IsT0FBWTtJQUN2RSxJQUFJLENBQUN0RSxRQUFRQyxHQUFHLENBQUNJLGlCQUFpQixJQUFJLENBQUNMLFFBQVFDLEdBQUcsQ0FBQ00scUJBQXFCLEVBQUU7UUFDeEUsTUFBTSxJQUFJeUIsTUFBTTtJQUNsQjtJQUVBLE1BQU1WLFVBQVUsSUFBSTVCLGdFQUFnQkEsQ0FBQztRQUNuQ21CLFFBQVFMO1FBQ1JNLEtBQUssQ0FBQyxLQUFLLEVBQUV3QyxhQUFhLFFBQVEsQ0FBQztRQUNuQzdCLE1BQU1FLEtBQUtPLFNBQVMsQ0FBQ29DLFNBQVMsTUFBTTtRQUNwQ25DLGFBQWE7SUFDZjtJQUVBLE1BQU1yQyxTQUFTYyxJQUFJLENBQUNVO0FBQ3RCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ21jLXZlcmFzZXQtYXBpLy4vbGliL3MzLWNvbmZpZy50cz9mYTFjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFMzQ2xpZW50LCBHZXRPYmplY3RDb21tYW5kLCBQdXRPYmplY3RDb21tYW5kLCBIZWFkT2JqZWN0Q29tbWFuZCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1zMyc7XG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuXG5leHBvcnQgY29uc3QgczNDbGllbnQgPSBuZXcgUzNDbGllbnQoe1xuICByZWdpb246IHByb2Nlc3MuZW52LkFXU19SRUdJT04gfHwgJ3VzLXdlc3QtMicsXG4gIGNyZWRlbnRpYWxzOiB7XG4gICAgYWNjZXNzS2V5SWQ6IHByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lEIHx8ICcnLFxuICAgIHNlY3JldEFjY2Vzc0tleTogcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIHx8ICcnLFxuICB9LFxufSk7XG5cbmV4cG9ydCBjb25zdCBCVUNLRVQgPSBwcm9jZXNzLmVudi5TM19CVUNLRVQgfHwgJ2dhcnJpdHotdmVyYXNldC1kYXRhLXVzLXdlc3QtMic7XG5cbi8qKlxuICogQ2hlY2sgaWYgY29uZmlnIGZpbGUgZXhpc3RzIGluIFMzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25maWdFeGlzdHMoa2V5OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICBpZiAoIXByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lEIHx8ICFwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgYXdhaXQgczNDbGllbnQuc2VuZChuZXcgSGVhZE9iamVjdENvbW1hbmQoe1xuICAgICAgQnVja2V0OiBCVUNLRVQsXG4gICAgICBLZXk6IGBjb25maWcvJHtrZXl9Lmpzb25gLFxuICAgIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGlmIChlcnJvci5uYW1lID09PSAnTm9TdWNoS2V5JyB8fCBlcnJvci4kbWV0YWRhdGE/Lmh0dHBTdGF0dXNDb2RlID09PSA0MDQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gT3RoZXIgZXJyb3JzIChwZXJtaXNzaW9ucywgbmV0d29yaykgLSBhc3N1bWUgZG9lc24ndCBleGlzdFxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIFJlYWQgYSBKU09OIGNvbmZpZyBmaWxlIGZyb20gUzMgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmdcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbmZpZzxUPihrZXk6IHN0cmluZyk6IFByb21pc2U8VCB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICAvLyBDaGVjayBpZiBBV1MgY3JlZGVudGlhbHMgYXJlIGNvbmZpZ3VyZWRcbiAgICBpZiAoIXByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lEIHx8ICFwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkpIHtcbiAgICAgIGNvbnNvbGUud2FybihgQVdTIGNyZWRlbnRpYWxzIG5vdCBjb25maWd1cmVkLiBSZXR1cm5pbmcgbnVsbCBmb3IgY29uZmlnLyR7a2V5fS5qc29uYCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBjb21tYW5kID0gbmV3IEdldE9iamVjdENvbW1hbmQoe1xuICAgICAgQnVja2V0OiBCVUNLRVQsXG4gICAgICBLZXk6IGBjb25maWcvJHtrZXl9Lmpzb25gLFxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgczNDbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVzcG9uc2UuQm9keT8udHJhbnNmb3JtVG9TdHJpbmcoKTtcbiAgICBcbiAgICBpZiAoIWJvZHkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gSlNPTi5wYXJzZShib2R5KSBhcyBUO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgLy8gRmlsZSBkb2Vzbid0IGV4aXN0XG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdOb1N1Y2hLZXknIHx8IGVycm9yLiRtZXRhZGF0YT8uaHR0cFN0YXR1c0NvZGUgPT09IDQwNCkge1xuICAgICAgY29uc29sZS53YXJuKGBDb25maWcgZmlsZSBub3QgZm91bmQ6IGNvbmZpZy8ke2tleX0uanNvbmApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIC8vIERvbid0IHRocm93IGVycm9ycyBpbiBkZXZlbG9wbWVudCAtIGp1c3QgbG9nIGFuZCByZXR1cm4gbnVsbFxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgY29uc29sZS53YXJuKGBFcnJvciByZWFkaW5nIGNvbmZpZy8ke2tleX0uanNvbjpgLCBlcnJvci5tZXNzYWdlIHx8IGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciByZWFkaW5nIGNvbmZpZy8ke2tleX0uanNvbjpgLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBXcml0ZSBhIEpTT04gY29uZmlnIGZpbGUgdG8gUzMgd2l0aCB2YWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwdXRDb25maWc8VD4oa2V5OiBzdHJpbmcsIGRhdGE6IFQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBpZiAoIXByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lEIHx8ICFwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQVdTIGNyZWRlbnRpYWxzIG5vdCBjb25maWd1cmVkJyk7XG4gICAgfVxuXG4gICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpO1xuICAgIFxuICAgIC8vIFZhbGlkYXRlIEpTT04gYmVmb3JlIHNhdmluZ1xuICAgIEpTT04ucGFyc2UoanNvbik7XG4gICAgXG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBQdXRPYmplY3RDb21tYW5kKHtcbiAgICAgIEJ1Y2tldDogQlVDS0VULFxuICAgICAgS2V5OiBgY29uZmlnLyR7a2V5fS5qc29uYCxcbiAgICAgIEJvZHk6IGpzb24sXG4gICAgICBDb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIH0pO1xuICAgIFxuICAgIGF3YWl0IHMzQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgY29uc29sZS5sb2coYOKchSBTYXZlZCBjb25maWcvJHtrZXl9Lmpzb25gKTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBFcnJvciBzYXZpbmcgY29uZmlnLyR7a2V5fS5qc29uOmAsIGVycm9yLm1lc3NhZ2UgfHwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBjb25maWcgZmlsZSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0Q29uZmlnSWZOZWVkZWQ8VD4oa2V5OiBzdHJpbmcsIGRlZmF1bHREYXRhOiBUKTogUHJvbWlzZTxUPiB7XG4gIGNvbnN0IGV4aXN0cyA9IGF3YWl0IGNvbmZpZ0V4aXN0cyhrZXkpO1xuICBcbiAgaWYgKCFleGlzdHMpIHtcbiAgICBjb25zb2xlLmxvZyhg8J+TnSBJbml0aWFsaXppbmcgY29uZmlnLyR7a2V5fS5qc29uIHdpdGggZGVmYXVsdHNgKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgcHV0Q29uZmlnKGtleSwgZGVmYXVsdERhdGEpO1xuICAgICAgcmV0dXJuIGRlZmF1bHREYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBpbml0aWFsaXplIGNvbmZpZy8ke2tleX0uanNvbiwgdXNpbmcgaW4tbWVtb3J5IGRlZmF1bHRgKTtcbiAgICAgIHJldHVybiBkZWZhdWx0RGF0YTtcbiAgICB9XG4gIH1cbiAgXG4gIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgZ2V0Q29uZmlnPFQ+KGtleSk7XG4gIHJldHVybiBleGlzdGluZyB8fCBkZWZhdWx0RGF0YTtcbn1cblxuLyoqXG4gKiBVcGRhdGUgYSBKU09OIGNvbmZpZyBmaWxlIChyZWFkLCBtb2RpZnksIHdyaXRlKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQ29uZmlnPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+PihcbiAga2V5OiBzdHJpbmcsXG4gIHVwZGF0ZXI6IChkYXRhOiBUIHwgbnVsbCkgPT4gVFxuKTogUHJvbWlzZTxUPiB7XG4gIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgZ2V0Q29uZmlnPFQ+KGtleSk7XG4gIGNvbnN0IHVwZGF0ZWQgPSB1cGRhdGVyKGV4aXN0aW5nKTtcbiAgYXdhaXQgcHV0Q29uZmlnKGtleSwgdXBkYXRlZCk7XG4gIHJldHVybiB1cGRhdGVkO1xufVxuXG4vKipcbiAqIExpc3QgYWxsIG9iamVjdHMgaW4gYSBwcmVmaXhcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxpc3RPYmplY3RzKHByZWZpeDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICB0cnkge1xuICAgIGlmICghcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVlfSUQgfHwgIXByb2Nlc3MuZW52LkFXU19TRUNSRVRfQUNDRVNTX0tFWSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHsgTGlzdE9iamVjdHNWMkNvbW1hbmQgfSA9IGF3YWl0IGltcG9ydCgnQGF3cy1zZGsvY2xpZW50LXMzJyk7XG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBMaXN0T2JqZWN0c1YyQ29tbWFuZCh7XG4gICAgICBCdWNrZXQ6IEJVQ0tFVCxcbiAgICAgIFByZWZpeDogcHJlZml4LFxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgczNDbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICByZXR1cm4gKHJlc3BvbnNlLkNvbnRlbnRzIHx8IFtdKS5tYXAob2JqID0+IG9iai5LZXkgfHwgJycpLmZpbHRlcihCb29sZWFuKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oYEVycm9yIGxpc3Rpbmcgb2JqZWN0cyB3aXRoIHByZWZpeCAke3ByZWZpeH06YCwgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBQT0kgY29sbGVjdGlvbiBHZW9KU09OIGZyb20gUzMsIHdpdGggZmFsbGJhY2sgdG8gbG9jYWwgZmlsZXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBPSUNvbGxlY3Rpb24oY29sbGVjdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPGFueSB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICAvLyBHZXQgY29sbGVjdGlvbiBtZXRhZGF0YSB0byBmaW5kIHRoZSBjb3JyZWN0IEdlb0pTT04gcGF0aFxuICAgIGNvbnN0IGNvbGxlY3Rpb25zID0gYXdhaXQgZ2V0Q29uZmlnPFJlY29yZDxzdHJpbmcsIGFueT4+KCdwb2ktY29sbGVjdGlvbnMnKSB8fCB7fTtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gY29sbGVjdGlvbnNbY29sbGVjdGlvbklkXTtcbiAgICBcbiAgICAvLyBVc2UgZ2VvanNvblBhdGggZnJvbSBjb2xsZWN0aW9uIG1ldGFkYXRhIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGNvbnN0cnVjdCBmcm9tIElEXG4gICAgY29uc3QgZ2VvanNvbktleSA9IGNvbGxlY3Rpb24/Lmdlb2pzb25QYXRoIHx8IGBwb2lzLyR7Y29sbGVjdGlvbklkfS5nZW9qc29uYDtcblxuICAgIC8vIFRyeSBTMyBmaXJzdCBpZiBjcmVkZW50aWFscyBhcmUgY29uZmlndXJlZCBhbmQgY29sbGVjdGlvbiBleGlzdHMgaW4gY29uZmlnXG4gICAgaWYgKGNvbGxlY3Rpb24gJiYgcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVlfSUQgJiYgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IEdldE9iamVjdENvbW1hbmQoe1xuICAgICAgICAgIEJ1Y2tldDogQlVDS0VULFxuICAgICAgICAgIEtleTogZ2VvanNvbktleSxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHMzQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXNwb25zZS5Cb2R5Py50cmFuc2Zvcm1Ub1N0cmluZygpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGJvZHkpIHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShib2R5KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoczNFcnJvcjogYW55KSB7XG4gICAgICAgIGlmIChzM0Vycm9yLm5hbWUgIT09ICdOb1N1Y2hLZXknICYmIHMzRXJyb3IuJG1ldGFkYXRhPy5odHRwU3RhdHVzQ29kZSAhPT0gNDA0KSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBTMyBlcnJvciBmb3IgJHtnZW9qc29uS2V5fSwgdHJ5aW5nIGxvY2FsIGZhbGxiYWNrOmAsIHMzRXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRmFsbCB0aHJvdWdoIHRvIGxvY2FsIGZpbGUgY2hlY2tcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGYWxsYmFjazogVHJ5IHRvIHJlYWQgZnJvbSBsb2NhbCBQT0lzIGRpcmVjdG9yeVxuICAgIC8vIE1hcCBjb2xsZWN0aW9uIElEcyB0byBsb2NhbCBmaWxlIG5hbWVzICh3aXRoIHVuZGVyc2NvcmVzKVxuICAgIGNvbnN0IGxvY2FsRmlsZU1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICdzcGFpbi1lY2lnYXJldHRlLWNvbWJpbmVkJzogJ3NwYWluX2VjaWdhcmV0dGVfY29tYmluZWQuZ2VvanNvbicsXG4gICAgICAnc3BhaW4tdG9iYWNjby1jb21iaW5lZCc6ICdzcGFpbl90b2JhY2NvX2NvbWJpbmVkLmdlb2pzb24nLFxuICAgICAgJ3NwYWluLW5pY290aW5lLWZ1bGwnOiAnb3ZlcnR1cmVfc3BhaW5fbmljb3RpbmVfY2xlYW4uZ2VvanNvbicsIC8vIFVzZSB0aGUgY29tYmluZWQgbmljb3RpbmUgZmlsZVxuICAgIH07XG5cbiAgICBjb25zdCBsb2NhbEZpbGVOYW1lID0gbG9jYWxGaWxlTWFwW2NvbGxlY3Rpb25JZF0gfHwgYCR7Y29sbGVjdGlvbklkLnJlcGxhY2UoLy0vZywgJ18nKX0uZ2VvanNvbmA7XG4gICAgY29uc3QgbG9jYWxQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdQT0lzJywgbG9jYWxGaWxlTmFtZSk7XG5cbiAgICBpZiAoZnMuZXhpc3RzU3luYyhsb2NhbFBhdGgpKSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+TgSBVc2luZyBsb2NhbCBHZW9KU09OIGZpbGU6ICR7bG9jYWxQYXRofWApO1xuICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMobG9jYWxQYXRoLCAndXRmLTgnKTtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGZpbGVDb250ZW50KTtcbiAgICB9XG5cbiAgICBpZiAoIWNvbGxlY3Rpb24pIHtcbiAgICAgIGNvbnNvbGUud2FybihgUE9JIGNvbGxlY3Rpb24gJHtjb2xsZWN0aW9uSWR9IG5vdCBmb3VuZCBpbiBjb25maWcgYW5kIG5vIGxvY2FsIGZpbGUgZm91bmRgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKGBHZW9KU09OIGZpbGUgbm90IGZvdW5kIGluIFMzIG9yIGxvY2FsbHkgZm9yIGNvbGxlY3Rpb24gJHtjb2xsZWN0aW9uSWR9YCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgcmVhZGluZyBHZW9KU09OIGZvciBjb2xsZWN0aW9uICR7Y29sbGVjdGlvbklkfTpgLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBTYXZlIFBPSSBjb2xsZWN0aW9uIEdlb0pTT04gdG8gUzNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHB1dFBPSUNvbGxlY3Rpb24oY29sbGVjdGlvbklkOiBzdHJpbmcsIGdlb2pzb246IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIXByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lEIHx8ICFwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0FXUyBjcmVkZW50aWFscyBub3QgY29uZmlndXJlZCcpO1xuICB9XG5cbiAgY29uc3QgY29tbWFuZCA9IG5ldyBQdXRPYmplY3RDb21tYW5kKHtcbiAgICBCdWNrZXQ6IEJVQ0tFVCxcbiAgICBLZXk6IGBwb2lzLyR7Y29sbGVjdGlvbklkfS5nZW9qc29uYCxcbiAgICBCb2R5OiBKU09OLnN0cmluZ2lmeShnZW9qc29uLCBudWxsLCAyKSxcbiAgICBDb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICB9KTtcbiAgXG4gIGF3YWl0IHMzQ2xpZW50LnNlbmQoY29tbWFuZCk7XG59XG4iXSwibmFtZXMiOlsiUzNDbGllbnQiLCJHZXRPYmplY3RDb21tYW5kIiwiUHV0T2JqZWN0Q29tbWFuZCIsIkhlYWRPYmplY3RDb21tYW5kIiwiZnMiLCJwYXRoIiwiczNDbGllbnQiLCJyZWdpb24iLCJwcm9jZXNzIiwiZW52IiwiQVdTX1JFR0lPTiIsImNyZWRlbnRpYWxzIiwiYWNjZXNzS2V5SWQiLCJBV1NfQUNDRVNTX0tFWV9JRCIsInNlY3JldEFjY2Vzc0tleSIsIkFXU19TRUNSRVRfQUNDRVNTX0tFWSIsIkJVQ0tFVCIsIlMzX0JVQ0tFVCIsImNvbmZpZ0V4aXN0cyIsImtleSIsInNlbmQiLCJCdWNrZXQiLCJLZXkiLCJlcnJvciIsIm5hbWUiLCIkbWV0YWRhdGEiLCJodHRwU3RhdHVzQ29kZSIsImdldENvbmZpZyIsImNvbnNvbGUiLCJ3YXJuIiwiY29tbWFuZCIsInJlc3BvbnNlIiwiYm9keSIsIkJvZHkiLCJ0cmFuc2Zvcm1Ub1N0cmluZyIsIkpTT04iLCJwYXJzZSIsIm1lc3NhZ2UiLCJwdXRDb25maWciLCJkYXRhIiwiRXJyb3IiLCJqc29uIiwic3RyaW5naWZ5IiwiQ29udGVudFR5cGUiLCJsb2ciLCJpbml0Q29uZmlnSWZOZWVkZWQiLCJkZWZhdWx0RGF0YSIsImV4aXN0cyIsImV4aXN0aW5nIiwidXBkYXRlQ29uZmlnIiwidXBkYXRlciIsInVwZGF0ZWQiLCJsaXN0T2JqZWN0cyIsInByZWZpeCIsIkxpc3RPYmplY3RzVjJDb21tYW5kIiwiUHJlZml4IiwiQ29udGVudHMiLCJtYXAiLCJvYmoiLCJmaWx0ZXIiLCJCb29sZWFuIiwiZ2V0UE9JQ29sbGVjdGlvbiIsImNvbGxlY3Rpb25JZCIsImNvbGxlY3Rpb25zIiwiY29sbGVjdGlvbiIsImdlb2pzb25LZXkiLCJnZW9qc29uUGF0aCIsInMzRXJyb3IiLCJsb2NhbEZpbGVNYXAiLCJsb2NhbEZpbGVOYW1lIiwicmVwbGFjZSIsImxvY2FsUGF0aCIsImpvaW4iLCJjd2QiLCJleGlzdHNTeW5jIiwiZmlsZUNvbnRlbnQiLCJyZWFkRmlsZVN5bmMiLCJwdXRQT0lDb2xsZWN0aW9uIiwiZ2VvanNvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/s3-config.ts\n");

/***/ }),

/***/ "(rsc)/./lib/security.ts":
/*!*************************!*\
  !*** ./lib/security.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkRateLimit: () => (/* binding */ checkRateLimit),\n/* harmony export */   getAllowedOrigins: () => (/* binding */ getAllowedOrigins),\n/* harmony export */   getClientIdentifier: () => (/* binding */ getClientIdentifier),\n/* harmony export */   getCorsHeaders: () => (/* binding */ getCorsHeaders),\n/* harmony export */   isOriginAllowed: () => (/* binding */ isOriginAllowed),\n/* harmony export */   sanitizeError: () => (/* binding */ sanitizeError)\n/* harmony export */ });\n/**\n * Security utilities for the application\n */ /**\n * Get allowed origins from environment variable\n * Format: comma-separated list of origins, e.g., \"https://example.com,https://app.example.com\"\n */ function getAllowedOrigins() {\n    const allowedOrigins = process.env.ALLOWED_ORIGINS;\n    if (!allowedOrigins) {\n        // Default to same origin in production, allow all in development\n        return  false ? 0 : [\n            \"http://localhost:3000\",\n            \"http://127.0.0.1:3000\"\n        ];\n    }\n    return allowedOrigins.split(\",\").map((origin)=>origin.trim()).filter(Boolean);\n}\n/**\n * Check if an origin is allowed\n */ function isOriginAllowed(origin) {\n    if (!origin) return false;\n    const allowedOrigins = getAllowedOrigins();\n    // In development, allow localhost\n    if (true) {\n        if (origin.startsWith(\"http://localhost\") || origin.startsWith(\"http://127.0.0.1\")) {\n            return true;\n        }\n    }\n    return allowedOrigins.includes(origin);\n}\n/**\n * Get CORS headers for a given request origin\n */ function getCorsHeaders(origin) {\n    const headers = {\n        \"Access-Control-Allow-Methods\": \"GET, POST, OPTIONS\",\n        \"Access-Control-Allow-Headers\": \"Content-Type, Authorization, X-Requested-With\",\n        \"Access-Control-Allow-Credentials\": \"true\"\n    };\n    if (origin && isOriginAllowed(origin)) {\n        headers[\"Access-Control-Allow-Origin\"] = origin;\n    } else if (true) {\n        // In development, allow the origin if it's localhost\n        headers[\"Access-Control-Allow-Origin\"] = origin || \"*\";\n    } else {}\n    return headers;\n}\n/**\n * Sanitize error messages for production\n * Prevents leaking sensitive information\n */ function sanitizeError(error, isProduction = \"development\" === \"production\") {\n    if (!isProduction) {\n        return error instanceof Error ? error.message : String(error);\n    }\n    // In production, return generic error messages\n    if (error instanceof Error) {\n        // Only expose specific error types that are safe\n        if (error.message.includes(\"not configured\") || error.message.includes(\"missing\")) {\n            return \"Configuration error. Please contact support.\";\n        }\n        return \"An error occurred. Please try again later.\";\n    }\n    return \"An error occurred. Please try again later.\";\n}\n/**\n * Rate limiting helper (in-memory, simple implementation)\n * For production, consider using Redis or a dedicated service\n */ const rateLimitStore = new Map();\nfunction checkRateLimit(identifier, maxRequests = 10, windowMs = 60000 // 1 minute\n) {\n    const now = Date.now();\n    const record = rateLimitStore.get(identifier);\n    if (!record || now > record.resetTime) {\n        // Create new record\n        const resetAt = now + windowMs;\n        rateLimitStore.set(identifier, {\n            count: 1,\n            resetTime: resetAt\n        });\n        // Cleanup old entries periodically\n        if (rateLimitStore.size > 10000) {\n            for (const [key, value] of rateLimitStore.entries()){\n                if (now > value.resetTime) {\n                    rateLimitStore.delete(key);\n                }\n            }\n        }\n        return {\n            allowed: true,\n            remaining: maxRequests - 1,\n            resetAt\n        };\n    }\n    if (record.count >= maxRequests) {\n        return {\n            allowed: false,\n            remaining: 0,\n            resetAt: record.resetTime\n        };\n    }\n    record.count++;\n    return {\n        allowed: true,\n        remaining: maxRequests - record.count,\n        resetAt: record.resetTime\n    };\n}\n/**\n * Get client identifier for rate limiting\n */ function getClientIdentifier(request) {\n    // Try to get IP from various headers (for Vercel/proxy environments)\n    const forwardedFor = request.headers.get(\"x-forwarded-for\");\n    const realIp = request.headers.get(\"x-real-ip\");\n    const ip = forwardedFor?.split(\",\")[0] || realIp || \"unknown\";\n    return ip;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFDWixPQUFPO1FBQUVNLFNBQVM7UUFBTUMsV0FBV2hCLGNBQWNJLE9BQU9LLEtBQUs7UUFBRUYsU0FBU0gsT0FBT0UsU0FBUztJQUFDO0FBQzNGO0FBRUE7O0NBRUMsR0FDTSxTQUFTVyxvQkFBb0JDLE9BQXdFO0lBQzFHLHFFQUFxRTtJQUNyRSxNQUFNQyxlQUFlRCxRQUFRN0IsT0FBTyxDQUFDZ0IsR0FBRyxDQUFDO0lBQ3pDLE1BQU1lLFNBQVNGLFFBQVE3QixPQUFPLENBQUNnQixHQUFHLENBQUM7SUFDbkMsTUFBTWdCLEtBQUtGLGNBQWN4QyxNQUFNLElBQUksQ0FBQyxFQUFFLElBQUl5QyxVQUFVO0lBRXBELE9BQU9DO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nbWMtdmVyYXNldC1hcGkvLi9saWIvc2VjdXJpdHkudHM/MTkwYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNlY3VyaXR5IHV0aWxpdGllcyBmb3IgdGhlIGFwcGxpY2F0aW9uXG4gKi9cblxuLyoqXG4gKiBHZXQgYWxsb3dlZCBvcmlnaW5zIGZyb20gZW52aXJvbm1lbnQgdmFyaWFibGVcbiAqIEZvcm1hdDogY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2Ygb3JpZ2lucywgZS5nLiwgXCJodHRwczovL2V4YW1wbGUuY29tLGh0dHBzOi8vYXBwLmV4YW1wbGUuY29tXCJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFsbG93ZWRPcmlnaW5zKCk6IHN0cmluZ1tdIHtcbiAgY29uc3QgYWxsb3dlZE9yaWdpbnMgPSBwcm9jZXNzLmVudi5BTExPV0VEX09SSUdJTlM7XG4gIFxuICBpZiAoIWFsbG93ZWRPcmlnaW5zKSB7XG4gICAgLy8gRGVmYXVsdCB0byBzYW1lIG9yaWdpbiBpbiBwcm9kdWN0aW9uLCBhbGxvdyBhbGwgaW4gZGV2ZWxvcG1lbnRcbiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyBcbiAgICAgID8gW10gXG4gICAgICA6IFsnaHR0cDovL2xvY2FsaG9zdDozMDAwJywgJ2h0dHA6Ly8xMjcuMC4wLjE6MzAwMCddO1xuICB9XG4gIFxuICByZXR1cm4gYWxsb3dlZE9yaWdpbnMuc3BsaXQoJywnKS5tYXAob3JpZ2luID0+IG9yaWdpbi50cmltKCkpLmZpbHRlcihCb29sZWFuKTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBvcmlnaW4gaXMgYWxsb3dlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNPcmlnaW5BbGxvd2VkKG9yaWdpbjogc3RyaW5nIHwgbnVsbCk6IGJvb2xlYW4ge1xuICBpZiAoIW9yaWdpbikgcmV0dXJuIGZhbHNlO1xuICBcbiAgY29uc3QgYWxsb3dlZE9yaWdpbnMgPSBnZXRBbGxvd2VkT3JpZ2lucygpO1xuICBcbiAgLy8gSW4gZGV2ZWxvcG1lbnQsIGFsbG93IGxvY2FsaG9zdFxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChvcmlnaW4uc3RhcnRzV2l0aCgnaHR0cDovL2xvY2FsaG9zdCcpIHx8IG9yaWdpbi5zdGFydHNXaXRoKCdodHRwOi8vMTI3LjAuMC4xJykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIGFsbG93ZWRPcmlnaW5zLmluY2x1ZGVzKG9yaWdpbik7XG59XG5cbi8qKlxuICogR2V0IENPUlMgaGVhZGVycyBmb3IgYSBnaXZlbiByZXF1ZXN0IG9yaWdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29yc0hlYWRlcnMob3JpZ2luOiBzdHJpbmcgfCBudWxsKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnOiAnR0VULCBQT1NULCBPUFRJT05TJyxcbiAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyc6ICdDb250ZW50LVR5cGUsIEF1dGhvcml6YXRpb24sIFgtUmVxdWVzdGVkLVdpdGgnLFxuICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscyc6ICd0cnVlJyxcbiAgfTtcbiAgXG4gIGlmIChvcmlnaW4gJiYgaXNPcmlnaW5BbGxvd2VkKG9yaWdpbikpIHtcbiAgICBoZWFkZXJzWydBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nXSA9IG9yaWdpbjtcbiAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgLy8gSW4gZGV2ZWxvcG1lbnQsIGFsbG93IHRoZSBvcmlnaW4gaWYgaXQncyBsb2NhbGhvc3RcbiAgICBoZWFkZXJzWydBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nXSA9IG9yaWdpbiB8fCAnKic7XG4gIH0gZWxzZSB7XG4gICAgLy8gSW4gcHJvZHVjdGlvbiwgZG9uJ3Qgc2V0IHRoZSBoZWFkZXIgaWYgb3JpZ2luIGlzIG5vdCBhbGxvd2VkXG4gICAgLy8gVGhpcyBlZmZlY3RpdmVseSBibG9ja3MgQ09SUyByZXF1ZXN0cyBmcm9tIHVuYXV0aG9yaXplZCBvcmlnaW5zXG4gIH1cbiAgXG4gIHJldHVybiBoZWFkZXJzO1xufVxuXG4vKipcbiAqIFNhbml0aXplIGVycm9yIG1lc3NhZ2VzIGZvciBwcm9kdWN0aW9uXG4gKiBQcmV2ZW50cyBsZWFraW5nIHNlbnNpdGl2ZSBpbmZvcm1hdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVFcnJvcihlcnJvcjogdW5rbm93biwgaXNQcm9kdWN0aW9uOiBib29sZWFuID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyk6IHN0cmluZyB7XG4gIGlmICghaXNQcm9kdWN0aW9uKSB7XG4gICAgcmV0dXJuIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcbiAgfVxuICBcbiAgLy8gSW4gcHJvZHVjdGlvbiwgcmV0dXJuIGdlbmVyaWMgZXJyb3IgbWVzc2FnZXNcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAvLyBPbmx5IGV4cG9zZSBzcGVjaWZpYyBlcnJvciB0eXBlcyB0aGF0IGFyZSBzYWZlXG4gICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ25vdCBjb25maWd1cmVkJykgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnbWlzc2luZycpKSB7XG4gICAgICByZXR1cm4gJ0NvbmZpZ3VyYXRpb24gZXJyb3IuIFBsZWFzZSBjb250YWN0IHN1cHBvcnQuJztcbiAgICB9XG4gICAgcmV0dXJuICdBbiBlcnJvciBvY2N1cnJlZC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nO1xuICB9XG4gIFxuICByZXR1cm4gJ0FuIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLic7XG59XG5cbi8qKlxuICogUmF0ZSBsaW1pdGluZyBoZWxwZXIgKGluLW1lbW9yeSwgc2ltcGxlIGltcGxlbWVudGF0aW9uKVxuICogRm9yIHByb2R1Y3Rpb24sIGNvbnNpZGVyIHVzaW5nIFJlZGlzIG9yIGEgZGVkaWNhdGVkIHNlcnZpY2VcbiAqL1xuY29uc3QgcmF0ZUxpbWl0U3RvcmUgPSBuZXcgTWFwPHN0cmluZywgeyBjb3VudDogbnVtYmVyOyByZXNldFRpbWU6IG51bWJlciB9PigpO1xuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tSYXRlTGltaXQoXG4gIGlkZW50aWZpZXI6IHN0cmluZyxcbiAgbWF4UmVxdWVzdHM6IG51bWJlciA9IDEwLFxuICB3aW5kb3dNczogbnVtYmVyID0gNjAwMDAgLy8gMSBtaW51dGVcbik6IHsgYWxsb3dlZDogYm9vbGVhbjsgcmVtYWluaW5nOiBudW1iZXI7IHJlc2V0QXQ6IG51bWJlciB9IHtcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgY29uc3QgcmVjb3JkID0gcmF0ZUxpbWl0U3RvcmUuZ2V0KGlkZW50aWZpZXIpO1xuICBcbiAgaWYgKCFyZWNvcmQgfHwgbm93ID4gcmVjb3JkLnJlc2V0VGltZSkge1xuICAgIC8vIENyZWF0ZSBuZXcgcmVjb3JkXG4gICAgY29uc3QgcmVzZXRBdCA9IG5vdyArIHdpbmRvd01zO1xuICAgIHJhdGVMaW1pdFN0b3JlLnNldChpZGVudGlmaWVyLCB7IGNvdW50OiAxLCByZXNldFRpbWU6IHJlc2V0QXQgfSk7XG4gICAgXG4gICAgLy8gQ2xlYW51cCBvbGQgZW50cmllcyBwZXJpb2RpY2FsbHlcbiAgICBpZiAocmF0ZUxpbWl0U3RvcmUuc2l6ZSA+IDEwMDAwKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiByYXRlTGltaXRTdG9yZS5lbnRyaWVzKCkpIHtcbiAgICAgICAgaWYgKG5vdyA+IHZhbHVlLnJlc2V0VGltZSkge1xuICAgICAgICAgIHJhdGVMaW1pdFN0b3JlLmRlbGV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7IGFsbG93ZWQ6IHRydWUsIHJlbWFpbmluZzogbWF4UmVxdWVzdHMgLSAxLCByZXNldEF0IH07XG4gIH1cbiAgXG4gIGlmIChyZWNvcmQuY291bnQgPj0gbWF4UmVxdWVzdHMpIHtcbiAgICByZXR1cm4geyBhbGxvd2VkOiBmYWxzZSwgcmVtYWluaW5nOiAwLCByZXNldEF0OiByZWNvcmQucmVzZXRUaW1lIH07XG4gIH1cbiAgXG4gIHJlY29yZC5jb3VudCsrO1xuICByZXR1cm4geyBhbGxvd2VkOiB0cnVlLCByZW1haW5pbmc6IG1heFJlcXVlc3RzIC0gcmVjb3JkLmNvdW50LCByZXNldEF0OiByZWNvcmQucmVzZXRUaW1lIH07XG59XG5cbi8qKlxuICogR2V0IGNsaWVudCBpZGVudGlmaWVyIGZvciByYXRlIGxpbWl0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDbGllbnRJZGVudGlmaWVyKHJlcXVlc3Q6IFJlcXVlc3QgfCB7IGhlYWRlcnM6IHsgZ2V0OiAobmFtZTogc3RyaW5nKSA9PiBzdHJpbmcgfCBudWxsIH0gfSk6IHN0cmluZyB7XG4gIC8vIFRyeSB0byBnZXQgSVAgZnJvbSB2YXJpb3VzIGhlYWRlcnMgKGZvciBWZXJjZWwvcHJveHkgZW52aXJvbm1lbnRzKVxuICBjb25zdCBmb3J3YXJkZWRGb3IgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LWZvcndhcmRlZC1mb3InKTtcbiAgY29uc3QgcmVhbElwID0gcmVxdWVzdC5oZWFkZXJzLmdldCgneC1yZWFsLWlwJyk7XG4gIGNvbnN0IGlwID0gZm9yd2FyZGVkRm9yPy5zcGxpdCgnLCcpWzBdIHx8IHJlYWxJcCB8fCAndW5rbm93bic7XG4gIFxuICByZXR1cm4gaXA7XG59XG4iXSwibmFtZXMiOlsiZ2V0QWxsb3dlZE9yaWdpbnMiLCJhbGxvd2VkT3JpZ2lucyIsInByb2Nlc3MiLCJlbnYiLCJBTExPV0VEX09SSUdJTlMiLCJzcGxpdCIsIm1hcCIsIm9yaWdpbiIsInRyaW0iLCJmaWx0ZXIiLCJCb29sZWFuIiwiaXNPcmlnaW5BbGxvd2VkIiwic3RhcnRzV2l0aCIsImluY2x1ZGVzIiwiZ2V0Q29yc0hlYWRlcnMiLCJoZWFkZXJzIiwic2FuaXRpemVFcnJvciIsImVycm9yIiwiaXNQcm9kdWN0aW9uIiwiRXJyb3IiLCJtZXNzYWdlIiwiU3RyaW5nIiwicmF0ZUxpbWl0U3RvcmUiLCJNYXAiLCJjaGVja1JhdGVMaW1pdCIsImlkZW50aWZpZXIiLCJtYXhSZXF1ZXN0cyIsIndpbmRvd01zIiwibm93IiwiRGF0ZSIsInJlY29yZCIsImdldCIsInJlc2V0VGltZSIsInJlc2V0QXQiLCJzZXQiLCJjb3VudCIsInNpemUiLCJrZXkiLCJ2YWx1ZSIsImVudHJpZXMiLCJkZWxldGUiLCJhbGxvd2VkIiwicmVtYWluaW5nIiwiZ2V0Q2xpZW50SWRlbnRpZmllciIsInJlcXVlc3QiLCJmb3J3YXJkZWRGb3IiLCJyZWFsSXAiLCJpcCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/security.ts\n");

/***/ }),

/***/ "(rsc)/./lib/seed-jobs.ts":
/*!**************************!*\
  !*** ./lib/seed-jobs.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initialJobsData: () => (/* binding */ initialJobsData),\n/* harmony export */   initialPOICollectionsData: () => (/* binding */ initialPOICollectionsData),\n/* harmony export */   initialUsageData: () => (/* binding */ initialUsageData)\n/* harmony export */ });\n/**\n * Seed initial jobs data\n * This file contains the initial job data to populate the jobs.json file\n */ const initialJobsData = {\n    \"29f5e76b-7423-4d78-bbfb-1f3de6761f58\": {\n        jobId: \"29f5e76b-7423-4d78-bbfb-1f3de6761f58\",\n        name: \"Test Madrid\",\n        type: \"aggregate\",\n        poiCollectionId: undefined,\n        poiCount: 1,\n        dateRange: {\n            from: \"2025-10-01\",\n            to: \"2025-10-05\"\n        },\n        radius: 500,\n        schema: \"N/A\",\n        status: \"SUCCESS\",\n        s3SourcePath: \"s3://veraset-prd-platform-us-west-2/output/garritz/29f5e76b-7423-4d78-bbfb-1f3de6761f58/\",\n        s3DestPath: null,\n        syncedAt: null,\n        objectCount: undefined,\n        totalBytes: undefined,\n        createdAt: \"2025-10-01T10:00:00Z\",\n        updatedAt: \"2025-10-05T15:30:00Z\",\n        summaryMetrics: \"571,057 pings, 143,224 device-days\"\n    },\n    \"bf5ba123-8207-442a-a6f9-959b68908a16\": {\n        jobId: \"bf5ba123-8207-442a-a6f9-959b68908a16\",\n        name: \"E-cigarette Spain (Overture)\",\n        type: \"pings\",\n        poiCollectionId: undefined,\n        poiCount: 273,\n        dateRange: {\n            from: \"2026-01-05\",\n            to: \"2026-02-04\"\n        },\n        radius: 10,\n        schema: \"BASIC\",\n        status: \"SUCCESS\",\n        s3SourcePath: \"s3://veraset-prd-platform-us-west-2/output/garritz/bf5ba123-8207-442a-a6f9-959b68908a16/\",\n        s3DestPath: \"s3://garritz-veraset-data-us-west-2/ecigarette-spain-jan/\",\n        syncedAt: \"2026-02-04T12:00:00Z\",\n        objectCount: 3823,\n        totalBytes: 14364000,\n        createdAt: \"2026-02-04T11:00:00Z\",\n        updatedAt: \"2026-02-04T12:00:00Z\",\n        summaryMetrics: \"3,823 objects, 13.7 MB\"\n    },\n    \"eb77c276-a9dc-4ef6-88fc-01090e375a39\": {\n        jobId: \"eb77c276-a9dc-4ef6-88fc-01090e375a39\",\n        name: \"Tobacco Spain (Overture)\",\n        type: \"pings\",\n        poiCollectionId: undefined,\n        poiCount: 1954,\n        dateRange: {\n            from: \"2026-01-05\",\n            to: \"2026-02-04\"\n        },\n        radius: 10,\n        schema: \"BASIC\",\n        status: \"SUCCESS\",\n        s3SourcePath: \"s3://veraset-prd-platform-us-west-2/output/garritz/eb77c276-a9dc-4ef6-88fc-01090e375a39/\",\n        s3DestPath: \"s3://garritz-veraset-data-us-west-2/tobacco-spain-jan/\",\n        syncedAt: \"2026-02-04T14:00:00Z\",\n        objectCount: 6668,\n        totalBytes: 27828051,\n        createdAt: \"2026-02-04T13:00:00Z\",\n        updatedAt: \"2026-02-04T14:00:00Z\",\n        summaryMetrics: \"6,668 objects, 27.8 MB\"\n    },\n    \"93d45013-9e36-44ef-8c73-1b2b2b5efc58\": {\n        jobId: \"93d45013-9e36-44ef-8c73-1b2b2b5efc58\",\n        name: \"Spain Nicotine Full (OSM+Overture)\",\n        type: \"pings\",\n        poiCollectionId: undefined,\n        poiCount: 4778,\n        dateRange: {\n            from: \"2026-01-05\",\n            to: \"2026-02-04\"\n        },\n        radius: 10,\n        schema: \"BASIC\",\n        status: \"SUCCESS\",\n        s3SourcePath: \"s3://veraset-prd-platform-us-west-2/output/garritz/93d45013-9e36-44ef-8c73-1b2b2b5efc58/\",\n        s3DestPath: \"s3://garritz-veraset-data-us-west-2/spain-nicotine-full-jan/\",\n        syncedAt: \"2026-02-04T16:00:00Z\",\n        objectCount: undefined,\n        totalBytes: undefined,\n        createdAt: \"2026-02-04T15:30:00Z\",\n        updatedAt: \"2026-02-04T16:00:00Z\",\n        summaryMetrics: \"337 e-cig + 4,441 tobacco\"\n    }\n};\nconst initialUsageData = {\n    \"2026-02\": {\n        used: 4,\n        limit: 200,\n        lastJobId: \"93d45013-9e36-44ef-8c73-1b2b2b5efc58\",\n        lastJobAt: \"2026-02-04T16:00:00Z\"\n    }\n};\nconst initialPOICollectionsData = {\n    \"spain-ecigarette-combined\": {\n        id: \"spain-ecigarette-combined\",\n        name: \"Spain E-cigarette Combined\",\n        poiCount: 337,\n        sources: {\n            osm: 94,\n            overture: 243\n        },\n        geojsonPath: \"pois/spain-ecigarette-combined.geojson\",\n        createdAt: \"2026-02-04T14:00:00Z\"\n    },\n    \"spain-tobacco-combined\": {\n        id: \"spain-tobacco-combined\",\n        name: \"Spain Tobacco Combined\",\n        poiCount: 4441,\n        sources: {\n            osm: 3077,\n            overture: 1364\n        },\n        geojsonPath: \"pois/spain-tobacco-combined.geojson\",\n        createdAt: \"2026-02-04T14:00:00Z\"\n    },\n    \"spain-nicotine-full\": {\n        id: \"spain-nicotine-full\",\n        name: \"Spain Nicotine Full\",\n        poiCount: 4778,\n        sources: {\n            osm_ecigarette: 94,\n            osm_tobacco: 3077,\n            overture_ecigarette: 243,\n            overture_tobacco: 1364\n        },\n        geojsonPath: \"pois/spain-nicotine-full.geojson\",\n        createdAt: \"2026-02-04T15:00:00Z\"\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2VlZC1qb2JzLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7Q0FHQyxHQUlNLE1BQU1BLGtCQUF1QztJQUNsRCx3Q0FBd0M7UUFDdENDLE9BQU87UUFDUEMsTUFBTTtRQUNOQyxNQUFNO1FBQ05DLGlCQUFpQkM7UUFDakJDLFVBQVU7UUFDVkMsV0FBVztZQUFFQyxNQUFNO1lBQWNDLElBQUk7UUFBYTtRQUNsREMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsY0FBYztRQUNkQyxZQUFZO1FBQ1pDLFVBQVU7UUFDVkMsYUFBYVg7UUFDYlksWUFBWVo7UUFDWmEsV0FBVztRQUNYQyxXQUFXO1FBQ1hDLGdCQUFnQjtJQUNsQjtJQUNBLHdDQUF3QztRQUN0Q25CLE9BQU87UUFDUEMsTUFBTTtRQUNOQyxNQUFNO1FBQ05DLGlCQUFpQkM7UUFDakJDLFVBQVU7UUFDVkMsV0FBVztZQUFFQyxNQUFNO1lBQWNDLElBQUk7UUFBYTtRQUNsREMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsY0FBYztRQUNkQyxZQUFZO1FBQ1pDLFVBQVU7UUFDVkMsYUFBYTtRQUNiQyxZQUFZO1FBQ1pDLFdBQVc7UUFDWEMsV0FBVztRQUNYQyxnQkFBZ0I7SUFDbEI7SUFDQSx3Q0FBd0M7UUFDdENuQixPQUFPO1FBQ1BDLE1BQU07UUFDTkMsTUFBTTtRQUNOQyxpQkFBaUJDO1FBQ2pCQyxVQUFVO1FBQ1ZDLFdBQVc7WUFBRUMsTUFBTTtZQUFjQyxJQUFJO1FBQWE7UUFDbERDLFFBQVE7UUFDUkMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLGNBQWM7UUFDZEMsWUFBWTtRQUNaQyxVQUFVO1FBQ1ZDLGFBQWE7UUFDYkMsWUFBWTtRQUNaQyxXQUFXO1FBQ1hDLFdBQVc7UUFDWEMsZ0JBQWdCO0lBQ2xCO0lBQ0Esd0NBQXdDO1FBQ3RDbkIsT0FBTztRQUNQQyxNQUFNO1FBQ05DLE1BQU07UUFDTkMsaUJBQWlCQztRQUNqQkMsVUFBVTtRQUNWQyxXQUFXO1lBQUVDLE1BQU07WUFBY0MsSUFBSTtRQUFhO1FBQ2xEQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsUUFBUTtRQUNSQyxjQUFjO1FBQ2RDLFlBQVk7UUFDWkMsVUFBVTtRQUNWQyxhQUFhWDtRQUNiWSxZQUFZWjtRQUNaYSxXQUFXO1FBQ1hDLFdBQVc7UUFDWEMsZ0JBQWdCO0lBQ2xCO0FBQ0YsRUFBRTtBQUVLLE1BQU1DLG1CQUFtQjtJQUM5QixXQUFXO1FBQ1RDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxXQUFXO1FBQ1hDLFdBQVc7SUFDYjtBQUNGLEVBQUU7QUFFSyxNQUFNQyw0QkFBNEI7SUFDdkMsNkJBQTZCO1FBQzNCQyxJQUFJO1FBQ0p6QixNQUFNO1FBQ05JLFVBQVU7UUFDVnNCLFNBQVM7WUFBRUMsS0FBSztZQUFJQyxVQUFVO1FBQUk7UUFDbENDLGFBQWE7UUFDYmIsV0FBVztJQUNiO0lBQ0EsMEJBQTBCO1FBQ3hCUyxJQUFJO1FBQ0p6QixNQUFNO1FBQ05JLFVBQVU7UUFDVnNCLFNBQVM7WUFBRUMsS0FBSztZQUFNQyxVQUFVO1FBQUs7UUFDckNDLGFBQWE7UUFDYmIsV0FBVztJQUNiO0lBQ0EsdUJBQXVCO1FBQ3JCUyxJQUFJO1FBQ0p6QixNQUFNO1FBQ05JLFVBQVU7UUFDVnNCLFNBQVM7WUFBRUksZ0JBQWdCO1lBQUlDLGFBQWE7WUFBTUMscUJBQXFCO1lBQUtDLGtCQUFrQjtRQUFLO1FBQ25HSixhQUFhO1FBQ2JiLFdBQVc7SUFDYjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nbWMtdmVyYXNldC1hcGkvLi9saWIvc2VlZC1qb2JzLnRzP2RmMzQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTZWVkIGluaXRpYWwgam9icyBkYXRhXG4gKiBUaGlzIGZpbGUgY29udGFpbnMgdGhlIGluaXRpYWwgam9iIGRhdGEgdG8gcG9wdWxhdGUgdGhlIGpvYnMuanNvbiBmaWxlXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBKb2IgfSBmcm9tICcuL2pvYnMnO1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbEpvYnNEYXRhOiBSZWNvcmQ8c3RyaW5nLCBKb2I+ID0ge1xuICBcIjI5ZjVlNzZiLTc0MjMtNGQ3OC1iYmZiLTFmM2RlNjc2MWY1OFwiOiB7XG4gICAgam9iSWQ6IFwiMjlmNWU3NmItNzQyMy00ZDc4LWJiZmItMWYzZGU2NzYxZjU4XCIsXG4gICAgbmFtZTogXCJUZXN0IE1hZHJpZFwiLFxuICAgIHR5cGU6IFwiYWdncmVnYXRlXCIsXG4gICAgcG9pQ29sbGVjdGlvbklkOiB1bmRlZmluZWQsXG4gICAgcG9pQ291bnQ6IDEsXG4gICAgZGF0ZVJhbmdlOiB7IGZyb206IFwiMjAyNS0xMC0wMVwiLCB0bzogXCIyMDI1LTEwLTA1XCIgfSxcbiAgICByYWRpdXM6IDUwMCxcbiAgICBzY2hlbWE6IFwiTi9BXCIsXG4gICAgc3RhdHVzOiBcIlNVQ0NFU1NcIixcbiAgICBzM1NvdXJjZVBhdGg6IFwiczM6Ly92ZXJhc2V0LXByZC1wbGF0Zm9ybS11cy13ZXN0LTIvb3V0cHV0L2dhcnJpdHovMjlmNWU3NmItNzQyMy00ZDc4LWJiZmItMWYzZGU2NzYxZjU4L1wiLFxuICAgIHMzRGVzdFBhdGg6IG51bGwsXG4gICAgc3luY2VkQXQ6IG51bGwsXG4gICAgb2JqZWN0Q291bnQ6IHVuZGVmaW5lZCxcbiAgICB0b3RhbEJ5dGVzOiB1bmRlZmluZWQsXG4gICAgY3JlYXRlZEF0OiBcIjIwMjUtMTAtMDFUMTA6MDA6MDBaXCIsXG4gICAgdXBkYXRlZEF0OiBcIjIwMjUtMTAtMDVUMTU6MzA6MDBaXCIsXG4gICAgc3VtbWFyeU1ldHJpY3M6IFwiNTcxLDA1NyBwaW5ncywgMTQzLDIyNCBkZXZpY2UtZGF5c1wiLFxuICB9LFxuICBcImJmNWJhMTIzLTgyMDctNDQyYS1hNmY5LTk1OWI2ODkwOGExNlwiOiB7XG4gICAgam9iSWQ6IFwiYmY1YmExMjMtODIwNy00NDJhLWE2ZjktOTU5YjY4OTA4YTE2XCIsXG4gICAgbmFtZTogXCJFLWNpZ2FyZXR0ZSBTcGFpbiAoT3ZlcnR1cmUpXCIsXG4gICAgdHlwZTogXCJwaW5nc1wiLFxuICAgIHBvaUNvbGxlY3Rpb25JZDogdW5kZWZpbmVkLFxuICAgIHBvaUNvdW50OiAyNzMsXG4gICAgZGF0ZVJhbmdlOiB7IGZyb206IFwiMjAyNi0wMS0wNVwiLCB0bzogXCIyMDI2LTAyLTA0XCIgfSxcbiAgICByYWRpdXM6IDEwLFxuICAgIHNjaGVtYTogXCJCQVNJQ1wiLFxuICAgIHN0YXR1czogXCJTVUNDRVNTXCIsXG4gICAgczNTb3VyY2VQYXRoOiBcInMzOi8vdmVyYXNldC1wcmQtcGxhdGZvcm0tdXMtd2VzdC0yL291dHB1dC9nYXJyaXR6L2JmNWJhMTIzLTgyMDctNDQyYS1hNmY5LTk1OWI2ODkwOGExNi9cIixcbiAgICBzM0Rlc3RQYXRoOiBcInMzOi8vZ2Fycml0ei12ZXJhc2V0LWRhdGEtdXMtd2VzdC0yL2VjaWdhcmV0dGUtc3BhaW4tamFuL1wiLFxuICAgIHN5bmNlZEF0OiBcIjIwMjYtMDItMDRUMTI6MDA6MDBaXCIsXG4gICAgb2JqZWN0Q291bnQ6IDM4MjMsXG4gICAgdG90YWxCeXRlczogMTQzNjQwMDAsXG4gICAgY3JlYXRlZEF0OiBcIjIwMjYtMDItMDRUMTE6MDA6MDBaXCIsXG4gICAgdXBkYXRlZEF0OiBcIjIwMjYtMDItMDRUMTI6MDA6MDBaXCIsXG4gICAgc3VtbWFyeU1ldHJpY3M6IFwiMyw4MjMgb2JqZWN0cywgMTMuNyBNQlwiLFxuICB9LFxuICBcImViNzdjMjc2LWE5ZGMtNGVmNi04OGZjLTAxMDkwZTM3NWEzOVwiOiB7XG4gICAgam9iSWQ6IFwiZWI3N2MyNzYtYTlkYy00ZWY2LTg4ZmMtMDEwOTBlMzc1YTM5XCIsXG4gICAgbmFtZTogXCJUb2JhY2NvIFNwYWluIChPdmVydHVyZSlcIixcbiAgICB0eXBlOiBcInBpbmdzXCIsXG4gICAgcG9pQ29sbGVjdGlvbklkOiB1bmRlZmluZWQsXG4gICAgcG9pQ291bnQ6IDE5NTQsXG4gICAgZGF0ZVJhbmdlOiB7IGZyb206IFwiMjAyNi0wMS0wNVwiLCB0bzogXCIyMDI2LTAyLTA0XCIgfSxcbiAgICByYWRpdXM6IDEwLFxuICAgIHNjaGVtYTogXCJCQVNJQ1wiLFxuICAgIHN0YXR1czogXCJTVUNDRVNTXCIsXG4gICAgczNTb3VyY2VQYXRoOiBcInMzOi8vdmVyYXNldC1wcmQtcGxhdGZvcm0tdXMtd2VzdC0yL291dHB1dC9nYXJyaXR6L2ViNzdjMjc2LWE5ZGMtNGVmNi04OGZjLTAxMDkwZTM3NWEzOS9cIixcbiAgICBzM0Rlc3RQYXRoOiBcInMzOi8vZ2Fycml0ei12ZXJhc2V0LWRhdGEtdXMtd2VzdC0yL3RvYmFjY28tc3BhaW4tamFuL1wiLFxuICAgIHN5bmNlZEF0OiBcIjIwMjYtMDItMDRUMTQ6MDA6MDBaXCIsXG4gICAgb2JqZWN0Q291bnQ6IDY2NjgsXG4gICAgdG90YWxCeXRlczogMjc4MjgwNTEsXG4gICAgY3JlYXRlZEF0OiBcIjIwMjYtMDItMDRUMTM6MDA6MDBaXCIsXG4gICAgdXBkYXRlZEF0OiBcIjIwMjYtMDItMDRUMTQ6MDA6MDBaXCIsXG4gICAgc3VtbWFyeU1ldHJpY3M6IFwiNiw2Njggb2JqZWN0cywgMjcuOCBNQlwiLFxuICB9LFxuICBcIjkzZDQ1MDEzLTllMzYtNDRlZi04YzczLTFiMmIyYjVlZmM1OFwiOiB7XG4gICAgam9iSWQ6IFwiOTNkNDUwMTMtOWUzNi00NGVmLThjNzMtMWIyYjJiNWVmYzU4XCIsXG4gICAgbmFtZTogXCJTcGFpbiBOaWNvdGluZSBGdWxsIChPU00rT3ZlcnR1cmUpXCIsXG4gICAgdHlwZTogXCJwaW5nc1wiLFxuICAgIHBvaUNvbGxlY3Rpb25JZDogdW5kZWZpbmVkLFxuICAgIHBvaUNvdW50OiA0Nzc4LFxuICAgIGRhdGVSYW5nZTogeyBmcm9tOiBcIjIwMjYtMDEtMDVcIiwgdG86IFwiMjAyNi0wMi0wNFwiIH0sXG4gICAgcmFkaXVzOiAxMCxcbiAgICBzY2hlbWE6IFwiQkFTSUNcIixcbiAgICBzdGF0dXM6IFwiU1VDQ0VTU1wiLFxuICAgIHMzU291cmNlUGF0aDogXCJzMzovL3ZlcmFzZXQtcHJkLXBsYXRmb3JtLXVzLXdlc3QtMi9vdXRwdXQvZ2Fycml0ei85M2Q0NTAxMy05ZTM2LTQ0ZWYtOGM3My0xYjJiMmI1ZWZjNTgvXCIsXG4gICAgczNEZXN0UGF0aDogXCJzMzovL2dhcnJpdHotdmVyYXNldC1kYXRhLXVzLXdlc3QtMi9zcGFpbi1uaWNvdGluZS1mdWxsLWphbi9cIixcbiAgICBzeW5jZWRBdDogXCIyMDI2LTAyLTA0VDE2OjAwOjAwWlwiLFxuICAgIG9iamVjdENvdW50OiB1bmRlZmluZWQsXG4gICAgdG90YWxCeXRlczogdW5kZWZpbmVkLFxuICAgIGNyZWF0ZWRBdDogXCIyMDI2LTAyLTA0VDE1OjMwOjAwWlwiLFxuICAgIHVwZGF0ZWRBdDogXCIyMDI2LTAyLTA0VDE2OjAwOjAwWlwiLFxuICAgIHN1bW1hcnlNZXRyaWNzOiBcIjMzNyBlLWNpZyArIDQsNDQxIHRvYmFjY29cIixcbiAgfSxcbn07XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsVXNhZ2VEYXRhID0ge1xuICBcIjIwMjYtMDJcIjoge1xuICAgIHVzZWQ6IDQsXG4gICAgbGltaXQ6IDIwMCxcbiAgICBsYXN0Sm9iSWQ6IFwiOTNkNDUwMTMtOWUzNi00NGVmLThjNzMtMWIyYjJiNWVmYzU4XCIsXG4gICAgbGFzdEpvYkF0OiBcIjIwMjYtMDItMDRUMTY6MDA6MDBaXCIsXG4gIH0sXG59O1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbFBPSUNvbGxlY3Rpb25zRGF0YSA9IHtcbiAgXCJzcGFpbi1lY2lnYXJldHRlLWNvbWJpbmVkXCI6IHtcbiAgICBpZDogXCJzcGFpbi1lY2lnYXJldHRlLWNvbWJpbmVkXCIsXG4gICAgbmFtZTogXCJTcGFpbiBFLWNpZ2FyZXR0ZSBDb21iaW5lZFwiLFxuICAgIHBvaUNvdW50OiAzMzcsXG4gICAgc291cmNlczogeyBvc206IDk0LCBvdmVydHVyZTogMjQzIH0sXG4gICAgZ2VvanNvblBhdGg6IFwicG9pcy9zcGFpbi1lY2lnYXJldHRlLWNvbWJpbmVkLmdlb2pzb25cIixcbiAgICBjcmVhdGVkQXQ6IFwiMjAyNi0wMi0wNFQxNDowMDowMFpcIixcbiAgfSxcbiAgXCJzcGFpbi10b2JhY2NvLWNvbWJpbmVkXCI6IHtcbiAgICBpZDogXCJzcGFpbi10b2JhY2NvLWNvbWJpbmVkXCIsXG4gICAgbmFtZTogXCJTcGFpbiBUb2JhY2NvIENvbWJpbmVkXCIsXG4gICAgcG9pQ291bnQ6IDQ0NDEsXG4gICAgc291cmNlczogeyBvc206IDMwNzcsIG92ZXJ0dXJlOiAxMzY0IH0sXG4gICAgZ2VvanNvblBhdGg6IFwicG9pcy9zcGFpbi10b2JhY2NvLWNvbWJpbmVkLmdlb2pzb25cIixcbiAgICBjcmVhdGVkQXQ6IFwiMjAyNi0wMi0wNFQxNDowMDowMFpcIixcbiAgfSxcbiAgXCJzcGFpbi1uaWNvdGluZS1mdWxsXCI6IHtcbiAgICBpZDogXCJzcGFpbi1uaWNvdGluZS1mdWxsXCIsXG4gICAgbmFtZTogXCJTcGFpbiBOaWNvdGluZSBGdWxsXCIsXG4gICAgcG9pQ291bnQ6IDQ3NzgsXG4gICAgc291cmNlczogeyBvc21fZWNpZ2FyZXR0ZTogOTQsIG9zbV90b2JhY2NvOiAzMDc3LCBvdmVydHVyZV9lY2lnYXJldHRlOiAyNDMsIG92ZXJ0dXJlX3RvYmFjY286IDEzNjQgfSxcbiAgICBnZW9qc29uUGF0aDogXCJwb2lzL3NwYWluLW5pY290aW5lLWZ1bGwuZ2VvanNvblwiLFxuICAgIGNyZWF0ZWRBdDogXCIyMDI2LTAyLTA0VDE1OjAwOjAwWlwiLFxuICB9LFxufTtcbiJdLCJuYW1lcyI6WyJpbml0aWFsSm9ic0RhdGEiLCJqb2JJZCIsIm5hbWUiLCJ0eXBlIiwicG9pQ29sbGVjdGlvbklkIiwidW5kZWZpbmVkIiwicG9pQ291bnQiLCJkYXRlUmFuZ2UiLCJmcm9tIiwidG8iLCJyYWRpdXMiLCJzY2hlbWEiLCJzdGF0dXMiLCJzM1NvdXJjZVBhdGgiLCJzM0Rlc3RQYXRoIiwic3luY2VkQXQiLCJvYmplY3RDb3VudCIsInRvdGFsQnl0ZXMiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJzdW1tYXJ5TWV0cmljcyIsImluaXRpYWxVc2FnZURhdGEiLCJ1c2VkIiwibGltaXQiLCJsYXN0Sm9iSWQiLCJsYXN0Sm9iQXQiLCJpbml0aWFsUE9JQ29sbGVjdGlvbnNEYXRhIiwiaWQiLCJzb3VyY2VzIiwib3NtIiwib3ZlcnR1cmUiLCJnZW9qc29uUGF0aCIsIm9zbV9lY2lnYXJldHRlIiwib3NtX3RvYmFjY28iLCJvdmVydHVyZV9lY2lnYXJldHRlIiwib3ZlcnR1cmVfdG9iYWNjbyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/seed-jobs.ts\n");

/***/ }),

/***/ "(rsc)/./lib/usage.ts":
/*!**********************!*\
  !*** ./lib/usage.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   canCreateJob: () => (/* binding */ canCreateJob),\n/* harmony export */   getCurrentMonth: () => (/* binding */ getCurrentMonth),\n/* harmony export */   getRemaining: () => (/* binding */ getRemaining),\n/* harmony export */   getUsage: () => (/* binding */ getUsage),\n/* harmony export */   getUsageForMonth: () => (/* binding */ getUsageForMonth),\n/* harmony export */   incrementUsage: () => (/* binding */ incrementUsage),\n/* harmony export */   isLimitReached: () => (/* binding */ isLimitReached)\n/* harmony export */ });\n/* harmony import */ var _s3_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./s3-config */ \"(rsc)/./lib/s3-config.ts\");\n/* harmony import */ var _jobs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./jobs */ \"(rsc)/./lib/jobs.ts\");\n\n\nconst DEFAULT_USAGE = {};\n/**\n * Get current month in YYYY-MM format\n */ function getCurrentMonth() {\n    const now = new Date();\n    const year = now.getFullYear();\n    const month = String(now.getMonth() + 1).padStart(2, \"0\");\n    return `${year}-${month}`;\n}\n/**\n * Get usage for current month with initialization\n */ async function getUsage() {\n    const [data, jobs] = await Promise.all([\n        (0,_s3_config__WEBPACK_IMPORTED_MODULE_0__.initConfigIfNeeded)(\"usage\", DEFAULT_USAGE),\n        (0,_jobs__WEBPACK_IMPORTED_MODULE_1__.getAllJobs)()\n    ]);\n    const month = getCurrentMonth();\n    const monthData = data[month] || {\n        used: 0,\n        limit: 200\n    };\n    // Count external jobs (for display only, not subtracted)\n    const externalJobs = jobs.filter((job)=>job.external === true).length;\n    return {\n        month,\n        used: monthData.used,\n        limit: monthData.limit,\n        remaining: monthData.limit - monthData.used,\n        lastJobId: monthData.lastJobId,\n        lastJobAt: monthData.lastJobAt,\n        externalJobs\n    };\n}\n/**\n * Get usage for a specific month\n */ async function getUsageForMonth(month) {\n    const data = await (0,_s3_config__WEBPACK_IMPORTED_MODULE_0__.getConfig)(\"usage\") || {};\n    return data[month] || {\n        used: 0,\n        limit: 200\n    };\n}\n/**\n * Increment usage counter for current month (atomic operation)\n */ async function incrementUsage(jobId) {\n    const data = await (0,_s3_config__WEBPACK_IMPORTED_MODULE_0__.initConfigIfNeeded)(\"usage\", DEFAULT_USAGE);\n    const month = getCurrentMonth();\n    const current = data[month] || {\n        used: 0,\n        limit: 200\n    };\n    // Check limit BEFORE incrementing\n    if (current.used >= current.limit) {\n        throw new Error(`Monthly limit reached: ${current.used}/${current.limit}`);\n    }\n    const updated = {\n        used: current.used + 1,\n        limit: current.limit,\n        lastJobId: jobId,\n        lastJobAt: new Date().toISOString()\n    };\n    data[month] = updated;\n    try {\n        await (0,_s3_config__WEBPACK_IMPORTED_MODULE_0__.putConfig)(\"usage\", data);\n        console.log(`✅ Usage incremented: ${updated.used}/${updated.limit} for ${month}`);\n    } catch (error) {\n        console.error(`❌ Failed to save usage increment:`, error);\n        throw error;\n    }\n    return updated;\n}\n/**\n * Check if usage limit has been reached\n */ async function isLimitReached() {\n    const usage = await getUsage();\n    return usage.remaining <= 0;\n}\n/**\n * Get remaining API calls\n */ async function getRemaining() {\n    const usage = await getUsage();\n    return Math.max(0, usage.remaining);\n}\n/**\n * Check if job creation is allowed\n */ async function canCreateJob() {\n    const usage = await getUsage();\n    if (usage.remaining <= 0) {\n        return {\n            allowed: false,\n            reason: `Monthly limit reached (${usage.limit} calls). Resets next month.`,\n            remaining: 0\n        };\n    }\n    return {\n        allowed: true,\n        remaining: usage.remaining\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdXNhZ2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXVFO0FBQ25DO0FBV3BDLE1BQU1JLGdCQUEyQixDQUFDO0FBRWxDOztDQUVDLEdBQ00sU0FBU0M7SUFDZCxNQUFNQyxNQUFNLElBQUlDO0lBQ2hCLE1BQU1DLE9BQU9GLElBQUlHLFdBQVc7SUFDNUIsTUFBTUMsUUFBUUMsT0FBT0wsSUFBSU0sUUFBUSxLQUFLLEdBQUdDLFFBQVEsQ0FBQyxHQUFHO0lBQ3JELE9BQU8sQ0FBQyxFQUFFTCxLQUFLLENBQUMsRUFBRUUsTUFBTSxDQUFDO0FBQzNCO0FBRUE7O0NBRUMsR0FDTSxlQUFlSTtJQUNwQixNQUFNLENBQUNDLE1BQU1DLEtBQUssR0FBRyxNQUFNQyxRQUFRQyxHQUFHLENBQUM7UUFDckNoQiw4REFBa0JBLENBQVksU0FBU0U7UUFDdkNELGlEQUFVQTtLQUNYO0lBRUQsTUFBTU8sUUFBUUw7SUFDZCxNQUFNYyxZQUFZSixJQUFJLENBQUNMLE1BQU0sSUFBSTtRQUFFVSxNQUFNO1FBQUdDLE9BQU87SUFBSTtJQUV2RCx5REFBeUQ7SUFDekQsTUFBTUMsZUFBZU4sS0FBS08sTUFBTSxDQUFDQyxDQUFBQSxNQUFPQSxJQUFJQyxRQUFRLEtBQUssTUFBTUMsTUFBTTtJQUVyRSxPQUFPO1FBQ0xoQjtRQUNBVSxNQUFNRCxVQUFVQyxJQUFJO1FBQ3BCQyxPQUFPRixVQUFVRSxLQUFLO1FBQ3RCTSxXQUFXUixVQUFVRSxLQUFLLEdBQUdGLFVBQVVDLElBQUk7UUFDM0NRLFdBQVdULFVBQVVTLFNBQVM7UUFDOUJDLFdBQVdWLFVBQVVVLFNBQVM7UUFDOUJQO0lBQ0Y7QUFDRjtBQUVBOztDQUVDLEdBQ00sZUFBZVEsaUJBQWlCcEIsS0FBYTtJQUNsRCxNQUFNSyxPQUFPLE1BQU1mLHFEQUFTQSxDQUFZLFlBQVksQ0FBQztJQUNyRCxPQUFPZSxJQUFJLENBQUNMLE1BQU0sSUFBSTtRQUFFVSxNQUFNO1FBQUdDLE9BQU87SUFBSTtBQUM5QztBQUVBOztDQUVDLEdBQ00sZUFBZVUsZUFBZUMsS0FBYTtJQUNoRCxNQUFNakIsT0FBTyxNQUFNYiw4REFBa0JBLENBQVksU0FBU0U7SUFDMUQsTUFBTU0sUUFBUUw7SUFFZCxNQUFNNEIsVUFBVWxCLElBQUksQ0FBQ0wsTUFBTSxJQUFJO1FBQUVVLE1BQU07UUFBR0MsT0FBTztJQUFJO0lBRXJELGtDQUFrQztJQUNsQyxJQUFJWSxRQUFRYixJQUFJLElBQUlhLFFBQVFaLEtBQUssRUFBRTtRQUNqQyxNQUFNLElBQUlhLE1BQU0sQ0FBQyx1QkFBdUIsRUFBRUQsUUFBUWIsSUFBSSxDQUFDLENBQUMsRUFBRWEsUUFBUVosS0FBSyxDQUFDLENBQUM7SUFDM0U7SUFFQSxNQUFNYyxVQUFzQjtRQUMxQmYsTUFBTWEsUUFBUWIsSUFBSSxHQUFHO1FBQ3JCQyxPQUFPWSxRQUFRWixLQUFLO1FBQ3BCTyxXQUFXSTtRQUNYSCxXQUFXLElBQUl0QixPQUFPNkIsV0FBVztJQUNuQztJQUVBckIsSUFBSSxDQUFDTCxNQUFNLEdBQUd5QjtJQUVkLElBQUk7UUFDRixNQUFNbEMscURBQVNBLENBQUMsU0FBU2M7UUFDekJzQixRQUFRQyxHQUFHLENBQUMsQ0FBQyxxQkFBcUIsRUFBRUgsUUFBUWYsSUFBSSxDQUFDLENBQUMsRUFBRWUsUUFBUWQsS0FBSyxDQUFDLEtBQUssRUFBRVgsTUFBTSxDQUFDO0lBQ2xGLEVBQUUsT0FBTzZCLE9BQU87UUFDZEYsUUFBUUUsS0FBSyxDQUFDLENBQUMsaUNBQWlDLENBQUMsRUFBRUE7UUFDbkQsTUFBTUE7SUFDUjtJQUVBLE9BQU9KO0FBQ1Q7QUFFQTs7Q0FFQyxHQUNNLGVBQWVLO0lBQ3BCLE1BQU1DLFFBQVEsTUFBTTNCO0lBQ3BCLE9BQU8yQixNQUFNZCxTQUFTLElBQUk7QUFDNUI7QUFFQTs7Q0FFQyxHQUNNLGVBQWVlO0lBQ3BCLE1BQU1ELFFBQVEsTUFBTTNCO0lBQ3BCLE9BQU82QixLQUFLQyxHQUFHLENBQUMsR0FBR0gsTUFBTWQsU0FBUztBQUNwQztBQUVBOztDQUVDLEdBQ00sZUFBZWtCO0lBQ3BCLE1BQU1KLFFBQVEsTUFBTTNCO0lBRXBCLElBQUkyQixNQUFNZCxTQUFTLElBQUksR0FBRztRQUN4QixPQUFPO1lBQ0xtQixTQUFTO1lBQ1RDLFFBQVEsQ0FBQyx1QkFBdUIsRUFBRU4sTUFBTXBCLEtBQUssQ0FBQywyQkFBMkIsQ0FBQztZQUMxRU0sV0FBVztRQUNiO0lBQ0Y7SUFFQSxPQUFPO1FBQUVtQixTQUFTO1FBQU1uQixXQUFXYyxNQUFNZCxTQUFTO0lBQUM7QUFDckQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nbWMtdmVyYXNldC1hcGkvLi9saWIvdXNhZ2UudHM/ZDZiYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRDb25maWcsIHB1dENvbmZpZywgaW5pdENvbmZpZ0lmTmVlZGVkIH0gZnJvbSAnLi9zMy1jb25maWcnO1xuaW1wb3J0IHsgZ2V0QWxsSm9icyB9IGZyb20gJy4vam9icyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9udGhVc2FnZSB7XG4gIHVzZWQ6IG51bWJlcjtcbiAgbGltaXQ6IG51bWJlcjtcbiAgbGFzdEpvYklkPzogc3RyaW5nO1xuICBsYXN0Sm9iQXQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIFVzYWdlRGF0YSA9IFJlY29yZDxzdHJpbmcsIE1vbnRoVXNhZ2U+O1xuXG5jb25zdCBERUZBVUxUX1VTQUdFOiBVc2FnZURhdGEgPSB7fTtcblxuLyoqXG4gKiBHZXQgY3VycmVudCBtb250aCBpbiBZWVlZLU1NIGZvcm1hdFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudE1vbnRoKCk6IHN0cmluZyB7XG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gIGNvbnN0IHllYXIgPSBub3cuZ2V0RnVsbFllYXIoKTtcbiAgY29uc3QgbW9udGggPSBTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xuICByZXR1cm4gYCR7eWVhcn0tJHttb250aH1gO1xufVxuXG4vKipcbiAqIEdldCB1c2FnZSBmb3IgY3VycmVudCBtb250aCB3aXRoIGluaXRpYWxpemF0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2FnZSgpOiBQcm9taXNlPE1vbnRoVXNhZ2UgJiB7IG1vbnRoOiBzdHJpbmc7IHJlbWFpbmluZzogbnVtYmVyOyBleHRlcm5hbEpvYnM6IG51bWJlciB9PiB7XG4gIGNvbnN0IFtkYXRhLCBqb2JzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBpbml0Q29uZmlnSWZOZWVkZWQ8VXNhZ2VEYXRhPigndXNhZ2UnLCBERUZBVUxUX1VTQUdFKSxcbiAgICBnZXRBbGxKb2JzKClcbiAgXSk7XG4gIFxuICBjb25zdCBtb250aCA9IGdldEN1cnJlbnRNb250aCgpO1xuICBjb25zdCBtb250aERhdGEgPSBkYXRhW21vbnRoXSB8fCB7IHVzZWQ6IDAsIGxpbWl0OiAyMDAgfTtcbiAgXG4gIC8vIENvdW50IGV4dGVybmFsIGpvYnMgKGZvciBkaXNwbGF5IG9ubHksIG5vdCBzdWJ0cmFjdGVkKVxuICBjb25zdCBleHRlcm5hbEpvYnMgPSBqb2JzLmZpbHRlcihqb2IgPT4gam9iLmV4dGVybmFsID09PSB0cnVlKS5sZW5ndGg7XG4gIFxuICByZXR1cm4ge1xuICAgIG1vbnRoLFxuICAgIHVzZWQ6IG1vbnRoRGF0YS51c2VkLFxuICAgIGxpbWl0OiBtb250aERhdGEubGltaXQsXG4gICAgcmVtYWluaW5nOiBtb250aERhdGEubGltaXQgLSBtb250aERhdGEudXNlZCxcbiAgICBsYXN0Sm9iSWQ6IG1vbnRoRGF0YS5sYXN0Sm9iSWQsXG4gICAgbGFzdEpvYkF0OiBtb250aERhdGEubGFzdEpvYkF0LFxuICAgIGV4dGVybmFsSm9icyxcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXQgdXNhZ2UgZm9yIGEgc3BlY2lmaWMgbW9udGhcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzYWdlRm9yTW9udGgobW9udGg6IHN0cmluZyk6IFByb21pc2U8TW9udGhVc2FnZT4ge1xuICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0Q29uZmlnPFVzYWdlRGF0YT4oJ3VzYWdlJykgfHwge307XG4gIHJldHVybiBkYXRhW21vbnRoXSB8fCB7IHVzZWQ6IDAsIGxpbWl0OiAyMDAgfTtcbn1cblxuLyoqXG4gKiBJbmNyZW1lbnQgdXNhZ2UgY291bnRlciBmb3IgY3VycmVudCBtb250aCAoYXRvbWljIG9wZXJhdGlvbilcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluY3JlbWVudFVzYWdlKGpvYklkOiBzdHJpbmcpOiBQcm9taXNlPE1vbnRoVXNhZ2U+IHtcbiAgY29uc3QgZGF0YSA9IGF3YWl0IGluaXRDb25maWdJZk5lZWRlZDxVc2FnZURhdGE+KCd1c2FnZScsIERFRkFVTFRfVVNBR0UpO1xuICBjb25zdCBtb250aCA9IGdldEN1cnJlbnRNb250aCgpO1xuICBcbiAgY29uc3QgY3VycmVudCA9IGRhdGFbbW9udGhdIHx8IHsgdXNlZDogMCwgbGltaXQ6IDIwMCB9O1xuICBcbiAgLy8gQ2hlY2sgbGltaXQgQkVGT1JFIGluY3JlbWVudGluZ1xuICBpZiAoY3VycmVudC51c2VkID49IGN1cnJlbnQubGltaXQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1vbnRobHkgbGltaXQgcmVhY2hlZDogJHtjdXJyZW50LnVzZWR9LyR7Y3VycmVudC5saW1pdH1gKTtcbiAgfVxuICBcbiAgY29uc3QgdXBkYXRlZDogTW9udGhVc2FnZSA9IHtcbiAgICB1c2VkOiBjdXJyZW50LnVzZWQgKyAxLFxuICAgIGxpbWl0OiBjdXJyZW50LmxpbWl0LFxuICAgIGxhc3RKb2JJZDogam9iSWQsXG4gICAgbGFzdEpvYkF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gIH07XG4gIFxuICBkYXRhW21vbnRoXSA9IHVwZGF0ZWQ7XG4gIFxuICB0cnkge1xuICAgIGF3YWl0IHB1dENvbmZpZygndXNhZ2UnLCBkYXRhKTtcbiAgICBjb25zb2xlLmxvZyhg4pyFIFVzYWdlIGluY3JlbWVudGVkOiAke3VwZGF0ZWQudXNlZH0vJHt1cGRhdGVkLmxpbWl0fSBmb3IgJHttb250aH1gKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIHNhdmUgdXNhZ2UgaW5jcmVtZW50OmAsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICBcbiAgcmV0dXJuIHVwZGF0ZWQ7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdXNhZ2UgbGltaXQgaGFzIGJlZW4gcmVhY2hlZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaXNMaW1pdFJlYWNoZWQoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIGNvbnN0IHVzYWdlID0gYXdhaXQgZ2V0VXNhZ2UoKTtcbiAgcmV0dXJuIHVzYWdlLnJlbWFpbmluZyA8PSAwO1xufVxuXG4vKipcbiAqIEdldCByZW1haW5pbmcgQVBJIGNhbGxzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSZW1haW5pbmcoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgY29uc3QgdXNhZ2UgPSBhd2FpdCBnZXRVc2FnZSgpO1xuICByZXR1cm4gTWF0aC5tYXgoMCwgdXNhZ2UucmVtYWluaW5nKTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBqb2IgY3JlYXRpb24gaXMgYWxsb3dlZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2FuQ3JlYXRlSm9iKCk6IFByb21pc2U8eyBhbGxvd2VkOiBib29sZWFuOyByZWFzb24/OiBzdHJpbmc7IHJlbWFpbmluZzogbnVtYmVyIH0+IHtcbiAgY29uc3QgdXNhZ2UgPSBhd2FpdCBnZXRVc2FnZSgpO1xuICBcbiAgaWYgKHVzYWdlLnJlbWFpbmluZyA8PSAwKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFsbG93ZWQ6IGZhbHNlLFxuICAgICAgcmVhc29uOiBgTW9udGhseSBsaW1pdCByZWFjaGVkICgke3VzYWdlLmxpbWl0fSBjYWxscykuIFJlc2V0cyBuZXh0IG1vbnRoLmAsXG4gICAgICByZW1haW5pbmc6IDAsXG4gICAgfTtcbiAgfVxuICBcbiAgcmV0dXJuIHsgYWxsb3dlZDogdHJ1ZSwgcmVtYWluaW5nOiB1c2FnZS5yZW1haW5pbmcgfTtcbn1cbiJdLCJuYW1lcyI6WyJnZXRDb25maWciLCJwdXRDb25maWciLCJpbml0Q29uZmlnSWZOZWVkZWQiLCJnZXRBbGxKb2JzIiwiREVGQVVMVF9VU0FHRSIsImdldEN1cnJlbnRNb250aCIsIm5vdyIsIkRhdGUiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJtb250aCIsIlN0cmluZyIsImdldE1vbnRoIiwicGFkU3RhcnQiLCJnZXRVc2FnZSIsImRhdGEiLCJqb2JzIiwiUHJvbWlzZSIsImFsbCIsIm1vbnRoRGF0YSIsInVzZWQiLCJsaW1pdCIsImV4dGVybmFsSm9icyIsImZpbHRlciIsImpvYiIsImV4dGVybmFsIiwibGVuZ3RoIiwicmVtYWluaW5nIiwibGFzdEpvYklkIiwibGFzdEpvYkF0IiwiZ2V0VXNhZ2VGb3JNb250aCIsImluY3JlbWVudFVzYWdlIiwiam9iSWQiLCJjdXJyZW50IiwiRXJyb3IiLCJ1cGRhdGVkIiwidG9JU09TdHJpbmciLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJpc0xpbWl0UmVhY2hlZCIsInVzYWdlIiwiZ2V0UmVtYWluaW5nIiwiTWF0aCIsIm1heCIsImNhbkNyZWF0ZUpvYiIsImFsbG93ZWQiLCJyZWFzb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/usage.ts\n");

/***/ }),

/***/ "(rsc)/./lib/validation.ts":
/*!***************************!*\
  !*** ./lib/validation.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   analysisFiltersSchema: () => (/* binding */ analysisFiltersSchema),\n/* harmony export */   createJobSchema: () => (/* binding */ createJobSchema),\n/* harmony export */   dateRangeSchema: () => (/* binding */ dateRangeSchema),\n/* harmony export */   loginSchema: () => (/* binding */ loginSchema),\n/* harmony export */   sanitizeString: () => (/* binding */ sanitizeString),\n/* harmony export */   sanitizeStringArray: () => (/* binding */ sanitizeStringArray),\n/* harmony export */   validateRequestBody: () => (/* binding */ validateRequestBody)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n/**\n * Validation schemas using Zod\n */ \n/**\n * Date range validation schema\n */ const dateRangeSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    from: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    to: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    from_date: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    to_date: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n}).refine((data)=>(data.from || data.from_date) && (data.to || data.to_date), {\n    message: \"Both from and to dates are required\"\n});\n/**\n * Job creation schema\n */ const createJobSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1).max(200),\n    type: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"pings\",\n        \"devices\",\n        \"aggregate\"\n    ]),\n    poiCount: zod__WEBPACK_IMPORTED_MODULE_0__.number().int().min(0).optional(),\n    poiCollectionId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    dateRange: dateRangeSchema,\n    radius: zod__WEBPACK_IMPORTED_MODULE_0__.number().min(1).max(1000).optional().default(10),\n    schema: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"BASIC\",\n        \"ENHANCED\",\n        \"FULL\"\n    ]).optional().default(\"BASIC\"),\n    verasetConfig: zod__WEBPACK_IMPORTED_MODULE_0__.object({\n        geo_radius: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.any()).optional(),\n        place_key: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).optional()\n    }).optional(),\n    pois: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.any()).optional(),\n    poiMapping: zod__WEBPACK_IMPORTED_MODULE_0__.record(zod__WEBPACK_IMPORTED_MODULE_0__.string()).optional(),\n    poiNames: zod__WEBPACK_IMPORTED_MODULE_0__.record(zod__WEBPACK_IMPORTED_MODULE_0__.string()).optional()\n});\n/**\n * Login schema\n */ const loginSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    username: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1).max(100),\n    password: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1).max(500)\n});\n/**\n * Dataset analysis filters schema\n */ const analysisFiltersSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    startDate: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    endDate: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    poiIds: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).optional(),\n    minDwellMinutes: zod__WEBPACK_IMPORTED_MODULE_0__.number().min(0).optional(),\n    maxDwellMinutes: zod__WEBPACK_IMPORTED_MODULE_0__.number().min(0).optional()\n}).refine((data)=>!data.minDwellMinutes || !data.maxDwellMinutes || data.minDwellMinutes <= data.maxDwellMinutes, {\n    message: \"minDwellMinutes must be less than or equal to maxDwellMinutes\",\n    path: [\n        \"minDwellMinutes\"\n    ]\n});\n/**\n * Validate and parse request body\n */ async function validateRequestBody(request, schema) {\n    try {\n        const body = await request.json();\n        const validatedData = schema.parse(body);\n        return {\n            success: true,\n            data: validatedData\n        };\n    } catch (error) {\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_1__.ZodError) {\n            const errorMessages = error.errors.map((e)=>`${e.path.join(\".\")}: ${e.message}`).join(\", \");\n            return {\n                success: false,\n                error: `Validation error: ${errorMessages}`,\n                status: 400\n            };\n        }\n        return {\n            success: false,\n            error: \"Invalid request body\",\n            status: 400\n        };\n    }\n}\n/**\n * Sanitize string input (basic XSS prevention)\n */ function sanitizeString(input, maxLength = 1000) {\n    return input.trim().slice(0, maxLength).replace(/[<>]/g, \"\") // Remove potential HTML tags\n    ;\n}\n/**\n * Validate and sanitize array of strings\n */ function sanitizeStringArray(input, maxLength = 100) {\n    if (!Array.isArray(input)) {\n        return [];\n    }\n    return input.filter((item)=>typeof item === \"string\").map((item)=>sanitizeString(item, maxLength)).filter(Boolean);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dUM7UUFBYztJQUM5QyxFQUFFLE9BQU9HLE9BQU87UUFDZCxJQUFJQSxpQkFBaUJwRCx5Q0FBVSxFQUFFO1lBQy9CLE1BQU1zRCxnQkFBZ0JGLE1BQU1HLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDQyxDQUFBQSxJQUFLLENBQUMsRUFBRUEsRUFBRWIsSUFBSSxDQUFDYyxJQUFJLENBQUMsS0FBSyxFQUFFLEVBQUVELEVBQUU5QyxPQUFPLENBQUMsQ0FBQyxFQUFFK0MsSUFBSSxDQUFDO1lBQ3RGLE9BQU87Z0JBQ0xQLFNBQVM7Z0JBQ1RDLE9BQU8sQ0FBQyxrQkFBa0IsRUFBRUUsY0FBYyxDQUFDO2dCQUMzQ0ssUUFBUTtZQUNWO1FBQ0Y7UUFFQSxPQUFPO1lBQ0xSLFNBQVM7WUFDVEMsT0FBTztZQUNQTyxRQUFRO1FBQ1Y7SUFDRjtBQUNGO0FBRUE7O0NBRUMsR0FDTSxTQUFTQyxlQUFlQyxLQUFhLEVBQUVDLFlBQW9CLElBQUk7SUFDcEUsT0FBT0QsTUFDSkUsSUFBSSxHQUNKQyxLQUFLLENBQUMsR0FBR0YsV0FDVEcsT0FBTyxDQUFDLFNBQVMsSUFBSSw2QkFBNkI7O0FBQ3ZEO0FBRUE7O0NBRUMsR0FDTSxTQUFTQyxvQkFBb0JMLEtBQWMsRUFBRUMsWUFBb0IsR0FBRztJQUN6RSxJQUFJLENBQUNLLE1BQU1DLE9BQU8sQ0FBQ1AsUUFBUTtRQUN6QixPQUFPLEVBQUU7SUFDWDtJQUVBLE9BQU9BLE1BQ0pRLE1BQU0sQ0FBQyxDQUFDQyxPQUF5QixPQUFPQSxTQUFTLFVBQ2pEZCxHQUFHLENBQUNjLENBQUFBLE9BQVFWLGVBQWVVLE1BQU1SLFlBQ2pDTyxNQUFNLENBQUNFO0FBQ1oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nbWMtdmVyYXNldC1hcGkvLi9saWIvdmFsaWRhdGlvbi50cz81MGFjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVmFsaWRhdGlvbiBzY2hlbWFzIHVzaW5nIFpvZFxuICovXG5cbmltcG9ydCB7IHogfSBmcm9tICd6b2QnXG5cbi8qKlxuICogRGF0ZSByYW5nZSB2YWxpZGF0aW9uIHNjaGVtYVxuICovXG5leHBvcnQgY29uc3QgZGF0ZVJhbmdlU2NoZW1hID0gei5vYmplY3Qoe1xuICBmcm9tOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHRvOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGZyb21fZGF0ZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB0b19kYXRlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KS5yZWZpbmUoXG4gIChkYXRhKSA9PiAoZGF0YS5mcm9tIHx8IGRhdGEuZnJvbV9kYXRlKSAmJiAoZGF0YS50byB8fCBkYXRhLnRvX2RhdGUpLFxuICB7IG1lc3NhZ2U6ICdCb3RoIGZyb20gYW5kIHRvIGRhdGVzIGFyZSByZXF1aXJlZCcgfVxuKVxuXG4vKipcbiAqIEpvYiBjcmVhdGlvbiBzY2hlbWFcbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUpvYlNjaGVtYSA9IHoub2JqZWN0KHtcbiAgbmFtZTogei5zdHJpbmcoKS5taW4oMSkubWF4KDIwMCksXG4gIHR5cGU6IHouZW51bShbJ3BpbmdzJywgJ2RldmljZXMnLCAnYWdncmVnYXRlJ10pLFxuICBwb2lDb3VudDogei5udW1iZXIoKS5pbnQoKS5taW4oMCkub3B0aW9uYWwoKSxcbiAgcG9pQ29sbGVjdGlvbklkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGRhdGVSYW5nZTogZGF0ZVJhbmdlU2NoZW1hLFxuICByYWRpdXM6IHoubnVtYmVyKCkubWluKDEpLm1heCgxMDAwKS5vcHRpb25hbCgpLmRlZmF1bHQoMTApLFxuICBzY2hlbWE6IHouZW51bShbJ0JBU0lDJywgJ0VOSEFOQ0VEJywgJ0ZVTEwnXSkub3B0aW9uYWwoKS5kZWZhdWx0KCdCQVNJQycpLFxuICB2ZXJhc2V0Q29uZmlnOiB6Lm9iamVjdCh7XG4gICAgZ2VvX3JhZGl1czogei5hcnJheSh6LmFueSgpKS5vcHRpb25hbCgpLFxuICAgIHBsYWNlX2tleTogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLCAvLyBGb3IgVmVyYXNldCBQT0lzICh1c2VzIHBsYWNlX2tleSBpbnN0ZWFkIG9mIGNvb3JkaW5hdGVzKVxuICB9KS5vcHRpb25hbCgpLFxuICBwb2lzOiB6LmFycmF5KHouYW55KCkpLm9wdGlvbmFsKCksXG4gIHBvaU1hcHBpbmc6IHoucmVjb3JkKHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gIHBvaU5hbWVzOiB6LnJlY29yZCh6LnN0cmluZygpKS5vcHRpb25hbCgpLFxufSlcblxuLyoqXG4gKiBMb2dpbiBzY2hlbWFcbiAqL1xuZXhwb3J0IGNvbnN0IGxvZ2luU2NoZW1hID0gei5vYmplY3Qoe1xuICB1c2VybmFtZTogei5zdHJpbmcoKS5taW4oMSkubWF4KDEwMCksXG4gIHBhc3N3b3JkOiB6LnN0cmluZygpLm1pbigxKS5tYXgoNTAwKSxcbn0pXG5cbi8qKlxuICogRGF0YXNldCBhbmFseXNpcyBmaWx0ZXJzIHNjaGVtYVxuICovXG5leHBvcnQgY29uc3QgYW5hbHlzaXNGaWx0ZXJzU2NoZW1hID0gei5vYmplY3Qoe1xuICBzdGFydERhdGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgZW5kRGF0ZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBwb2lJZHM6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgbWluRHdlbGxNaW51dGVzOiB6Lm51bWJlcigpLm1pbigwKS5vcHRpb25hbCgpLFxuICBtYXhEd2VsbE1pbnV0ZXM6IHoubnVtYmVyKCkubWluKDApLm9wdGlvbmFsKCksXG59KS5yZWZpbmUoXG4gIChkYXRhKSA9PiAhZGF0YS5taW5Ed2VsbE1pbnV0ZXMgfHwgIWRhdGEubWF4RHdlbGxNaW51dGVzIHx8IGRhdGEubWluRHdlbGxNaW51dGVzIDw9IGRhdGEubWF4RHdlbGxNaW51dGVzLFxuICB7IG1lc3NhZ2U6ICdtaW5Ed2VsbE1pbnV0ZXMgbXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gbWF4RHdlbGxNaW51dGVzJywgcGF0aDogWydtaW5Ed2VsbE1pbnV0ZXMnXSB9XG4pXG5cbi8qKlxuICogVmFsaWRhdGUgYW5kIHBhcnNlIHJlcXVlc3QgYm9keVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVSZXF1ZXN0Qm9keTxUPihcbiAgcmVxdWVzdDogUmVxdWVzdCxcbiAgc2NoZW1hOiB6LlpvZFNjaGVtYTxUPlxuKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IHRydWU7IGRhdGE6IFQgfSB8IHsgc3VjY2VzczogZmFsc2U7IGVycm9yOiBzdHJpbmc7IHN0YXR1czogbnVtYmVyIH0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBjb25zdCB2YWxpZGF0ZWREYXRhID0gc2NoZW1hLnBhcnNlKGJvZHkpXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogdmFsaWRhdGVkRGF0YSB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlcyA9IGVycm9yLmVycm9ycy5tYXAoZSA9PiBgJHtlLnBhdGguam9pbignLicpfTogJHtlLm1lc3NhZ2V9YCkuam9pbignLCAnKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBgVmFsaWRhdGlvbiBlcnJvcjogJHtlcnJvck1lc3NhZ2VzfWAsXG4gICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogJ0ludmFsaWQgcmVxdWVzdCBib2R5JyxcbiAgICAgIHN0YXR1czogNDAwLFxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFNhbml0aXplIHN0cmluZyBpbnB1dCAoYmFzaWMgWFNTIHByZXZlbnRpb24pXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZVN0cmluZyhpbnB1dDogc3RyaW5nLCBtYXhMZW5ndGg6IG51bWJlciA9IDEwMDApOiBzdHJpbmcge1xuICByZXR1cm4gaW5wdXRcbiAgICAudHJpbSgpXG4gICAgLnNsaWNlKDAsIG1heExlbmd0aClcbiAgICAucmVwbGFjZSgvWzw+XS9nLCAnJykgLy8gUmVtb3ZlIHBvdGVudGlhbCBIVE1MIHRhZ3Ncbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBhbmQgc2FuaXRpemUgYXJyYXkgb2Ygc3RyaW5nc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVTdHJpbmdBcnJheShpbnB1dDogdW5rbm93biwgbWF4TGVuZ3RoOiBudW1iZXIgPSAxMDApOiBzdHJpbmdbXSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICByZXR1cm4gW11cbiAgfVxuICBcbiAgcmV0dXJuIGlucHV0XG4gICAgLmZpbHRlcigoaXRlbSk6IGl0ZW0gaXMgc3RyaW5nID0+IHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJylcbiAgICAubWFwKGl0ZW0gPT4gc2FuaXRpemVTdHJpbmcoaXRlbSwgbWF4TGVuZ3RoKSlcbiAgICAuZmlsdGVyKEJvb2xlYW4pXG59XG4iXSwibmFtZXMiOlsieiIsImRhdGVSYW5nZVNjaGVtYSIsIm9iamVjdCIsImZyb20iLCJzdHJpbmciLCJvcHRpb25hbCIsInRvIiwiZnJvbV9kYXRlIiwidG9fZGF0ZSIsInJlZmluZSIsImRhdGEiLCJtZXNzYWdlIiwiY3JlYXRlSm9iU2NoZW1hIiwibmFtZSIsIm1pbiIsIm1heCIsInR5cGUiLCJlbnVtIiwicG9pQ291bnQiLCJudW1iZXIiLCJpbnQiLCJwb2lDb2xsZWN0aW9uSWQiLCJkYXRlUmFuZ2UiLCJyYWRpdXMiLCJkZWZhdWx0Iiwic2NoZW1hIiwidmVyYXNldENvbmZpZyIsImdlb19yYWRpdXMiLCJhcnJheSIsImFueSIsInBsYWNlX2tleSIsInBvaXMiLCJwb2lNYXBwaW5nIiwicmVjb3JkIiwicG9pTmFtZXMiLCJsb2dpblNjaGVtYSIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJhbmFseXNpc0ZpbHRlcnNTY2hlbWEiLCJzdGFydERhdGUiLCJlbmREYXRlIiwicG9pSWRzIiwibWluRHdlbGxNaW51dGVzIiwibWF4RHdlbGxNaW51dGVzIiwicGF0aCIsInZhbGlkYXRlUmVxdWVzdEJvZHkiLCJyZXF1ZXN0IiwiYm9keSIsImpzb24iLCJ2YWxpZGF0ZWREYXRhIiwicGFyc2UiLCJzdWNjZXNzIiwiZXJyb3IiLCJab2RFcnJvciIsImVycm9yTWVzc2FnZXMiLCJlcnJvcnMiLCJtYXAiLCJlIiwiam9pbiIsInN0YXR1cyIsInNhbml0aXplU3RyaW5nIiwiaW5wdXQiLCJtYXhMZW5ndGgiLCJ0cmltIiwic2xpY2UiLCJyZXBsYWNlIiwic2FuaXRpemVTdHJpbmdBcnJheSIsIkFycmF5IiwiaXNBcnJheSIsImZpbHRlciIsIml0ZW0iLCJCb29sZWFuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/validation.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fjobs%2Froute&page=%2Fapi%2Fjobs%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fjobs%2Froute.ts&appDir=%2FUsers%2Fjuliangarritz%2Fdev%2Fpy%2Fveraset%2Fveraset-api%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjuliangarritz%2Fdev%2Fpy%2Fveraset%2Fveraset-api&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();