"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var _lib_security__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/security */ \"(middleware)/./lib/security.ts\");\n\n\n// Public API routes that don't require authentication\nconst PUBLIC_API_ROUTES = [\n    \"/api/auth/login\",\n    \"/api/auth/logout\",\n    \"/api/health\"\n];\n// External API routes that use API key authentication (not cookie auth)\n// These routes handle their own authentication via API keys\nconst EXTERNAL_API_ROUTES = [\n    \"/api/external\"\n];\n// Veraset API routes that should be protected but may be called externally\n// These should validate API keys or tokens separately\nconst VERASET_API_ROUTES = [\n    \"/api/veraset\"\n];\nfunction middleware(request) {\n    const authCookie = request.cookies.get(\"auth-token\");\n    const isLoginPage = request.nextUrl.pathname === \"/login\";\n    const pathname = request.nextUrl.pathname;\n    const isApiRoute = pathname.startsWith(\"/api/\");\n    // Handle CORS for API routes\n    if (isApiRoute) {\n        const origin = request.headers.get(\"origin\");\n        // Check route types first\n        const isPublicRoute = PUBLIC_API_ROUTES.some((route)=>pathname.startsWith(route));\n        const isExternalRoute = EXTERNAL_API_ROUTES.some((route)=>pathname.startsWith(route));\n        const isVerasetRoute = pathname.startsWith(\"/api/veraset\");\n        // External API routes allow CORS from any origin (they use API key auth)\n        const corsHeaders = isExternalRoute ? {\n            \"Access-Control-Allow-Origin\": origin || \"*\",\n            \"Access-Control-Allow-Methods\": \"GET, POST, OPTIONS\",\n            \"Access-Control-Allow-Headers\": \"Content-Type, Authorization, X-API-Key, X-Requested-With\",\n            \"Access-Control-Allow-Credentials\": \"false\"\n        } : (0,_lib_security__WEBPACK_IMPORTED_MODULE_1__.getCorsHeaders)(origin);\n        // Handle preflight requests\n        if (request.method === \"OPTIONS\") {\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n                status: 204,\n                headers: corsHeaders\n            });\n        }\n        // Apply rate limiting to all API routes\n        const clientId = (0,_lib_security__WEBPACK_IMPORTED_MODULE_1__.getClientIdentifier)(request);\n        // External routes get higher limits (they use API key auth)\n        const rateLimitMax = isPublicRoute ? 5 : isExternalRoute ? 100 : 20;\n        const rateLimit = (0,_lib_security__WEBPACK_IMPORTED_MODULE_1__.checkRateLimit)(`${clientId}:${pathname}`, rateLimitMax, 60000 // 1 minute window\n        );\n        if (!rateLimit.allowed) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Too many requests. Please try again later.\"\n            }, {\n                status: 429,\n                headers: {\n                    ...corsHeaders,\n                    \"Retry-After\": String(Math.ceil((rateLimit.resetAt - Date.now()) / 1000)),\n                    \"X-RateLimit-Limit\": String(rateLimitMax),\n                    \"X-RateLimit-Remaining\": \"0\",\n                    \"X-RateLimit-Reset\": String(Math.floor(rateLimit.resetAt / 1000))\n                }\n            });\n        }\n        // Protect non-public API routes (except External and Veraset routes which handle their own auth)\n        if (!isPublicRoute && !isVerasetRoute && !isExternalRoute) {\n            if (!authCookie || authCookie.value !== process.env.AUTH_SECRET) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Unauthorized\"\n                }, {\n                    status: 401,\n                    headers: corsHeaders\n                });\n            }\n        }\n        // Add rate limit headers to response\n        const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n        Object.entries(corsHeaders).forEach(([key, value])=>{\n            response.headers.set(key, value);\n        });\n        response.headers.set(\"X-RateLimit-Limit\", String(rateLimitMax));\n        response.headers.set(\"X-RateLimit-Remaining\", String(rateLimit.remaining));\n        response.headers.set(\"X-RateLimit-Reset\", String(Math.floor(rateLimit.resetAt / 1000)));\n        return response;\n    }\n    // Allow login page\n    if (isLoginPage) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Check authentication for all other routes (frontend pages)\n    if (!authCookie || authCookie.value !== process.env.AUTH_SECRET) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/login\", request.url));\n    }\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n}\nconst config = {\n    matcher: [\n        \"/((?!_next/static|_next/image|favicon.ico|logo|images|assets).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTBDO0FBRTBDO0FBRXBGLHNEQUFzRDtBQUN0RCxNQUFNSSxvQkFBb0I7SUFDeEI7SUFDQTtJQUNBO0NBQ0Q7QUFFRCx3RUFBd0U7QUFDeEUsNERBQTREO0FBQzVELE1BQU1DLHNCQUFzQjtJQUMxQjtDQUNEO0FBRUQsMkVBQTJFO0FBQzNFLHNEQUFzRDtBQUN0RCxNQUFNQyxxQkFBcUI7SUFDekI7Q0FDRDtBQUVNLFNBQVNDLFdBQVdDLE9BQW9CO0lBQzdDLE1BQU1DLGFBQWFELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQ3ZDLE1BQU1DLGNBQWNKLFFBQVFLLE9BQU8sQ0FBQ0MsUUFBUSxLQUFLO0lBQ2pELE1BQU1BLFdBQVdOLFFBQVFLLE9BQU8sQ0FBQ0MsUUFBUTtJQUN6QyxNQUFNQyxhQUFhRCxTQUFTRSxVQUFVLENBQUM7SUFFdkMsNkJBQTZCO0lBQzdCLElBQUlELFlBQVk7UUFDZCxNQUFNRSxTQUFTVCxRQUFRVSxPQUFPLENBQUNQLEdBQUcsQ0FBQztRQUVuQywwQkFBMEI7UUFDMUIsTUFBTVEsZ0JBQWdCZixrQkFBa0JnQixJQUFJLENBQUNDLENBQUFBLFFBQVNQLFNBQVNFLFVBQVUsQ0FBQ0s7UUFDMUUsTUFBTUMsa0JBQWtCakIsb0JBQW9CZSxJQUFJLENBQUNDLENBQUFBLFFBQVNQLFNBQVNFLFVBQVUsQ0FBQ0s7UUFDOUUsTUFBTUUsaUJBQWlCVCxTQUFTRSxVQUFVLENBQUM7UUFFM0MseUVBQXlFO1FBQ3pFLE1BQU1RLGNBQWNGLGtCQUNoQjtZQUNFLCtCQUErQkwsVUFBVTtZQUN6QyxnQ0FBZ0M7WUFDaEMsZ0NBQWdDO1lBQ2hDLG9DQUFvQztRQUN0QyxJQUNBZCw2REFBY0EsQ0FBQ2M7UUFFbkIsNEJBQTRCO1FBQzVCLElBQUlULFFBQVFpQixNQUFNLEtBQUssV0FBVztZQUNoQyxPQUFPLElBQUl6QixxREFBWUEsQ0FBQyxNQUFNO2dCQUM1QjBCLFFBQVE7Z0JBQ1JSLFNBQVNNO1lBQ1g7UUFDRjtRQUVBLHdDQUF3QztRQUN4QyxNQUFNRyxXQUFXekIsa0VBQW1CQSxDQUFDTTtRQUNyQyw0REFBNEQ7UUFDNUQsTUFBTW9CLGVBQWVULGdCQUFnQixJQUFLRyxrQkFBa0IsTUFBTTtRQUNsRSxNQUFNTyxZQUFZNUIsNkRBQWNBLENBQzlCLENBQUMsRUFBRTBCLFNBQVMsQ0FBQyxFQUFFYixTQUFTLENBQUMsRUFDekJjLGNBQ0EsTUFBTSxrQkFBa0I7O1FBRzFCLElBQUksQ0FBQ0MsVUFBVUMsT0FBTyxFQUFFO1lBQ3RCLE9BQU85QixxREFBWUEsQ0FBQytCLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBNkMsR0FDdEQ7Z0JBQ0VOLFFBQVE7Z0JBQ1JSLFNBQVM7b0JBQ1AsR0FBR00sV0FBVztvQkFDZCxlQUFlUyxPQUFPQyxLQUFLQyxJQUFJLENBQUMsQ0FBQ04sVUFBVU8sT0FBTyxHQUFHQyxLQUFLQyxHQUFHLEVBQUMsSUFBSztvQkFDbkUscUJBQXFCTCxPQUFPTDtvQkFDNUIseUJBQXlCO29CQUN6QixxQkFBcUJLLE9BQU9DLEtBQUtLLEtBQUssQ0FBQ1YsVUFBVU8sT0FBTyxHQUFHO2dCQUM3RDtZQUNGO1FBRUo7UUFFQSxpR0FBaUc7UUFDakcsSUFBSSxDQUFDakIsaUJBQWlCLENBQUNJLGtCQUFrQixDQUFDRCxpQkFBaUI7WUFDekQsSUFBSSxDQUFDYixjQUFjQSxXQUFXK0IsS0FBSyxLQUFLQyxRQUFRQyxHQUFHLENBQUNDLFdBQVcsRUFBRTtnQkFDL0QsT0FBTzNDLHFEQUFZQSxDQUFDK0IsSUFBSSxDQUN0QjtvQkFBRUMsT0FBTztnQkFBZSxHQUN4QjtvQkFDRU4sUUFBUTtvQkFDUlIsU0FBU007Z0JBQ1g7WUFFSjtRQUNGO1FBRUEscUNBQXFDO1FBQ3JDLE1BQU1vQixXQUFXNUMscURBQVlBLENBQUM2QyxJQUFJO1FBQ2xDQyxPQUFPQyxPQUFPLENBQUN2QixhQUFhd0IsT0FBTyxDQUFDLENBQUMsQ0FBQ0MsS0FBS1QsTUFBTTtZQUMvQ0ksU0FBUzFCLE9BQU8sQ0FBQ2dDLEdBQUcsQ0FBQ0QsS0FBS1Q7UUFDNUI7UUFDQUksU0FBUzFCLE9BQU8sQ0FBQ2dDLEdBQUcsQ0FBQyxxQkFBcUJqQixPQUFPTDtRQUNqRGdCLFNBQVMxQixPQUFPLENBQUNnQyxHQUFHLENBQUMseUJBQXlCakIsT0FBT0osVUFBVXNCLFNBQVM7UUFDeEVQLFNBQVMxQixPQUFPLENBQUNnQyxHQUFHLENBQUMscUJBQXFCakIsT0FBT0MsS0FBS0ssS0FBSyxDQUFDVixVQUFVTyxPQUFPLEdBQUc7UUFFaEYsT0FBT1E7SUFDVDtJQUVBLG1CQUFtQjtJQUNuQixJQUFJaEMsYUFBYTtRQUNmLE9BQU9aLHFEQUFZQSxDQUFDNkMsSUFBSTtJQUMxQjtJQUVBLDZEQUE2RDtJQUM3RCxJQUFJLENBQUNwQyxjQUFjQSxXQUFXK0IsS0FBSyxLQUFLQyxRQUFRQyxHQUFHLENBQUNDLFdBQVcsRUFBRTtRQUMvRCxPQUFPM0MscURBQVlBLENBQUNvRCxRQUFRLENBQUMsSUFBSUMsSUFBSSxVQUFVN0MsUUFBUThDLEdBQUc7SUFDNUQ7SUFFQSxPQUFPdEQscURBQVlBLENBQUM2QyxJQUFJO0FBQzFCO0FBRU8sTUFBTVUsU0FBUztJQUNwQkMsU0FBUztRQUFDO0tBQW1FO0FBQy9FLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbWlkZGxld2FyZS50cz80MjJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHR5cGUgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgY2hlY2tSYXRlTGltaXQsIGdldENsaWVudElkZW50aWZpZXIsIGdldENvcnNIZWFkZXJzIH0gZnJvbSAnLi9saWIvc2VjdXJpdHknXG5cbi8vIFB1YmxpYyBBUEkgcm91dGVzIHRoYXQgZG9uJ3QgcmVxdWlyZSBhdXRoZW50aWNhdGlvblxuY29uc3QgUFVCTElDX0FQSV9ST1VURVMgPSBbXG4gICcvYXBpL2F1dGgvbG9naW4nLFxuICAnL2FwaS9hdXRoL2xvZ291dCcsXG4gICcvYXBpL2hlYWx0aCcsXG5dXG5cbi8vIEV4dGVybmFsIEFQSSByb3V0ZXMgdGhhdCB1c2UgQVBJIGtleSBhdXRoZW50aWNhdGlvbiAobm90IGNvb2tpZSBhdXRoKVxuLy8gVGhlc2Ugcm91dGVzIGhhbmRsZSB0aGVpciBvd24gYXV0aGVudGljYXRpb24gdmlhIEFQSSBrZXlzXG5jb25zdCBFWFRFUk5BTF9BUElfUk9VVEVTID0gW1xuICAnL2FwaS9leHRlcm5hbCcsXG5dXG5cbi8vIFZlcmFzZXQgQVBJIHJvdXRlcyB0aGF0IHNob3VsZCBiZSBwcm90ZWN0ZWQgYnV0IG1heSBiZSBjYWxsZWQgZXh0ZXJuYWxseVxuLy8gVGhlc2Ugc2hvdWxkIHZhbGlkYXRlIEFQSSBrZXlzIG9yIHRva2VucyBzZXBhcmF0ZWx5XG5jb25zdCBWRVJBU0VUX0FQSV9ST1VURVMgPSBbXG4gICcvYXBpL3ZlcmFzZXQnLFxuXVxuXG5leHBvcnQgZnVuY3Rpb24gbWlkZGxld2FyZShyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCBhdXRoQ29va2llID0gcmVxdWVzdC5jb29raWVzLmdldCgnYXV0aC10b2tlbicpXG4gIGNvbnN0IGlzTG9naW5QYWdlID0gcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lID09PSAnL2xvZ2luJ1xuICBjb25zdCBwYXRobmFtZSA9IHJlcXVlc3QubmV4dFVybC5wYXRobmFtZVxuICBjb25zdCBpc0FwaVJvdXRlID0gcGF0aG5hbWUuc3RhcnRzV2l0aCgnL2FwaS8nKVxuICBcbiAgLy8gSGFuZGxlIENPUlMgZm9yIEFQSSByb3V0ZXNcbiAgaWYgKGlzQXBpUm91dGUpIHtcbiAgICBjb25zdCBvcmlnaW4gPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdvcmlnaW4nKVxuICAgIFxuICAgIC8vIENoZWNrIHJvdXRlIHR5cGVzIGZpcnN0XG4gICAgY29uc3QgaXNQdWJsaWNSb3V0ZSA9IFBVQkxJQ19BUElfUk9VVEVTLnNvbWUocm91dGUgPT4gcGF0aG5hbWUuc3RhcnRzV2l0aChyb3V0ZSkpXG4gICAgY29uc3QgaXNFeHRlcm5hbFJvdXRlID0gRVhURVJOQUxfQVBJX1JPVVRFUy5zb21lKHJvdXRlID0+IHBhdGhuYW1lLnN0YXJ0c1dpdGgocm91dGUpKVxuICAgIGNvbnN0IGlzVmVyYXNldFJvdXRlID0gcGF0aG5hbWUuc3RhcnRzV2l0aCgnL2FwaS92ZXJhc2V0JylcbiAgICBcbiAgICAvLyBFeHRlcm5hbCBBUEkgcm91dGVzIGFsbG93IENPUlMgZnJvbSBhbnkgb3JpZ2luICh0aGV5IHVzZSBBUEkga2V5IGF1dGgpXG4gICAgY29uc3QgY29yc0hlYWRlcnMgPSBpc0V4dGVybmFsUm91dGUgXG4gICAgICA/IHtcbiAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogb3JpZ2luIHx8ICcqJyxcbiAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdHRVQsIFBPU1QsIE9QVElPTlMnLFxuICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0NvbnRlbnQtVHlwZSwgQXV0aG9yaXphdGlvbiwgWC1BUEktS2V5LCBYLVJlcXVlc3RlZC1XaXRoJyxcbiAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnOiAnZmFsc2UnLFxuICAgICAgICB9XG4gICAgICA6IGdldENvcnNIZWFkZXJzKG9yaWdpbilcbiAgICBcbiAgICAvLyBIYW5kbGUgcHJlZmxpZ2h0IHJlcXVlc3RzXG4gICAgaWYgKHJlcXVlc3QubWV0aG9kID09PSAnT1BUSU9OUycpIHtcbiAgICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgc3RhdHVzOiAyMDQsXG4gICAgICAgIGhlYWRlcnM6IGNvcnNIZWFkZXJzLFxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gQXBwbHkgcmF0ZSBsaW1pdGluZyB0byBhbGwgQVBJIHJvdXRlc1xuICAgIGNvbnN0IGNsaWVudElkID0gZ2V0Q2xpZW50SWRlbnRpZmllcihyZXF1ZXN0KVxuICAgIC8vIEV4dGVybmFsIHJvdXRlcyBnZXQgaGlnaGVyIGxpbWl0cyAodGhleSB1c2UgQVBJIGtleSBhdXRoKVxuICAgIGNvbnN0IHJhdGVMaW1pdE1heCA9IGlzUHVibGljUm91dGUgPyA1IDogKGlzRXh0ZXJuYWxSb3V0ZSA/IDEwMCA6IDIwKVxuICAgIGNvbnN0IHJhdGVMaW1pdCA9IGNoZWNrUmF0ZUxpbWl0KFxuICAgICAgYCR7Y2xpZW50SWR9OiR7cGF0aG5hbWV9YCxcbiAgICAgIHJhdGVMaW1pdE1heCxcbiAgICAgIDYwMDAwIC8vIDEgbWludXRlIHdpbmRvd1xuICAgIClcbiAgICBcbiAgICBpZiAoIXJhdGVMaW1pdC5hbGxvd2VkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdUb28gbWFueSByZXF1ZXN0cy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBzdGF0dXM6IDQyOSxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAuLi5jb3JzSGVhZGVycyxcbiAgICAgICAgICAgICdSZXRyeS1BZnRlcic6IFN0cmluZyhNYXRoLmNlaWwoKHJhdGVMaW1pdC5yZXNldEF0IC0gRGF0ZS5ub3coKSkgLyAxMDAwKSksXG4gICAgICAgICAgICAnWC1SYXRlTGltaXQtTGltaXQnOiBTdHJpbmcocmF0ZUxpbWl0TWF4KSxcbiAgICAgICAgICAgICdYLVJhdGVMaW1pdC1SZW1haW5pbmcnOiAnMCcsXG4gICAgICAgICAgICAnWC1SYXRlTGltaXQtUmVzZXQnOiBTdHJpbmcoTWF0aC5mbG9vcihyYXRlTGltaXQucmVzZXRBdCAvIDEwMDApKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApXG4gICAgfVxuICAgIFxuICAgIC8vIFByb3RlY3Qgbm9uLXB1YmxpYyBBUEkgcm91dGVzIChleGNlcHQgRXh0ZXJuYWwgYW5kIFZlcmFzZXQgcm91dGVzIHdoaWNoIGhhbmRsZSB0aGVpciBvd24gYXV0aClcbiAgICBpZiAoIWlzUHVibGljUm91dGUgJiYgIWlzVmVyYXNldFJvdXRlICYmICFpc0V4dGVybmFsUm91dGUpIHtcbiAgICAgIGlmICghYXV0aENvb2tpZSB8fCBhdXRoQ29va2llLnZhbHVlICE9PSBwcm9jZXNzLmVudi5BVVRIX1NFQ1JFVCkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzdGF0dXM6IDQwMSxcbiAgICAgICAgICAgIGhlYWRlcnM6IGNvcnNIZWFkZXJzLFxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBBZGQgcmF0ZSBsaW1pdCBoZWFkZXJzIHRvIHJlc3BvbnNlXG4gICAgY29uc3QgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCgpXG4gICAgT2JqZWN0LmVudHJpZXMoY29yc0hlYWRlcnMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoa2V5LCB2YWx1ZSlcbiAgICB9KVxuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdYLVJhdGVMaW1pdC1MaW1pdCcsIFN0cmluZyhyYXRlTGltaXRNYXgpKVxuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdYLVJhdGVMaW1pdC1SZW1haW5pbmcnLCBTdHJpbmcocmF0ZUxpbWl0LnJlbWFpbmluZykpXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ1gtUmF0ZUxpbWl0LVJlc2V0JywgU3RyaW5nKE1hdGguZmxvb3IocmF0ZUxpbWl0LnJlc2V0QXQgLyAxMDAwKSkpXG4gICAgXG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gIH1cbiAgXG4gIC8vIEFsbG93IGxvZ2luIHBhZ2VcbiAgaWYgKGlzTG9naW5QYWdlKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KClcbiAgfVxuICBcbiAgLy8gQ2hlY2sgYXV0aGVudGljYXRpb24gZm9yIGFsbCBvdGhlciByb3V0ZXMgKGZyb250ZW5kIHBhZ2VzKVxuICBpZiAoIWF1dGhDb29raWUgfHwgYXV0aENvb2tpZS52YWx1ZSAhPT0gcHJvY2Vzcy5lbnYuQVVUSF9TRUNSRVQpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy9sb2dpbicsIHJlcXVlc3QudXJsKSlcbiAgfVxuICBcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KClcbn1cblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgbWF0Y2hlcjogWycvKCg/IV9uZXh0L3N0YXRpY3xfbmV4dC9pbWFnZXxmYXZpY29uLmljb3xsb2dvfGltYWdlc3xhc3NldHMpLiopJ11cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjaGVja1JhdGVMaW1pdCIsImdldENsaWVudElkZW50aWZpZXIiLCJnZXRDb3JzSGVhZGVycyIsIlBVQkxJQ19BUElfUk9VVEVTIiwiRVhURVJOQUxfQVBJX1JPVVRFUyIsIlZFUkFTRVRfQVBJX1JPVVRFUyIsIm1pZGRsZXdhcmUiLCJyZXF1ZXN0IiwiYXV0aENvb2tpZSIsImNvb2tpZXMiLCJnZXQiLCJpc0xvZ2luUGFnZSIsIm5leHRVcmwiLCJwYXRobmFtZSIsImlzQXBpUm91dGUiLCJzdGFydHNXaXRoIiwib3JpZ2luIiwiaGVhZGVycyIsImlzUHVibGljUm91dGUiLCJzb21lIiwicm91dGUiLCJpc0V4dGVybmFsUm91dGUiLCJpc1ZlcmFzZXRSb3V0ZSIsImNvcnNIZWFkZXJzIiwibWV0aG9kIiwic3RhdHVzIiwiY2xpZW50SWQiLCJyYXRlTGltaXRNYXgiLCJyYXRlTGltaXQiLCJhbGxvd2VkIiwianNvbiIsImVycm9yIiwiU3RyaW5nIiwiTWF0aCIsImNlaWwiLCJyZXNldEF0IiwiRGF0ZSIsIm5vdyIsImZsb29yIiwidmFsdWUiLCJwcm9jZXNzIiwiZW52IiwiQVVUSF9TRUNSRVQiLCJyZXNwb25zZSIsIm5leHQiLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImtleSIsInNldCIsInJlbWFpbmluZyIsInJlZGlyZWN0IiwiVVJMIiwidXJsIiwiY29uZmlnIiwibWF0Y2hlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});